import{a as A}from"./index-e08c3f39.js";import{a as $,k as o,A as j,h as T,w as i,r as c,o as m,b as r,i as s,u as a,x as L,c as y,g as B,F as E,I as b,t as w,z as J,B as Q,C as X,_ as Y}from"./index-ba90849c.js";const ee=g=>(Q("data-v-48c3e47f"),g=g(),X(),g),le={class:"log_select"},oe={class:"log_title"},te=ee(()=>r("span",{style:{"margin-right":"10px"}},"日志",-1)),ae={class:"select_log"},se={class:"timestamp"},ne=$({__name:"index",setup(g){let z=o([]),R=o([]),F=o("0"),d=o(""),u=o(500),k=o(500),p=o("#c8c7c7"),I=o("#c8c7c7"),_=o(16),v=o(16);const U=o(["#c8c7c7","rgba(30, 244, 251, 1)","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]),V=o({STDOUT:"stdout",TRACE:"level-trace",DEBUG:"level-debug",INFO:"level-info",WARN:"level-warn",WARNING:"level-warn",ERROR:"level-error",ERRO:"level-error",FATAL:"level-fatal",MARK:"level-mark"});j(()=>{C()});const D=t=>{k.value=u.value},N=t=>{v.value=_.value},M=()=>{I.value=p.value},C=async t=>{let l;t=="0"||!t?l=await A("0"):l=await A(t),l.code==200&&(z.value=l.data.logText.split("\r").map(n=>G(n.trim())),R.value=l.data.logList,d.value=l.data.curLog)},O=t=>{C(t)},H=()=>{C(F.value)},G=t=>{const n=/^(\[\d+:\d+:\d+.\d+\])\[([A-Z]+?)\](.*)/.exec(t);if(n&&n.length>=4){const f=n[1],h=n[2],x=n[3];return{time:f,level:h,detail:x}}else return{time:"",level:"",detail:t}};return(t,l)=>{const n=c("el-color-picker"),f=c("el-button"),h=c("el-slider"),x=c("el-form-item"),W=c("el-form"),q=c("el-popover"),K=c("el-option"),P=c("el-select"),Z=c("el-card");return m(),T(Z,{class:"log_box"},{default:i(()=>[r("div",le,[r("div",oe,[te,s(n,{onChange:M,modelValue:a(p),"onUpdate:modelValue":l[0]||(l[0]=e=>L(p)?p.value=e:p=e),size:"small","show-alpha":"",predefine:U.value},null,8,["modelValue","predefine"])]),r("div",ae,[s(f,{class:"update_btn",size:"small",icon:"Refresh",circle:"",onClick:H}),s(q,{placement:"bottom",title:"日志设置",width:300,trigger:"hover"},{reference:i(()=>[s(f,{size:"small",icon:"Setting",circle:"",style:{"margin-right":"10px"}})]),default:i(()=>[s(W,null,{default:i(()=>[s(x,{label:"窗口高度"},{default:i(()=>[s(h,{modelValue:a(u),"onUpdate:modelValue":l[1]||(l[1]=e=>L(u)?u.value=e:u=e),size:"large",min:400,max:1e3,onInput:D},null,8,["modelValue"])]),_:1}),s(x,{label:"字体大小"},{default:i(()=>[s(h,{modelValue:a(_),"onUpdate:modelValue":l[2]||(l[2]=e=>L(_)?_.value=e:_=e),size:"large",min:12,max:30,onInput:N},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(P,{modelValue:a(d),"onUpdate:modelValue":l[3]||(l[3]=e=>L(d)?d.value=e:d=e),placeholder:"Select",style:{width:"150px"},onChange:O},{default:i(()=>[(m(!0),y(E,null,B(a(R),(e,S)=>(m(),T(K,{key:S,label:e.replace("command.",""),value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),r("div",{class:"page-logs",style:b({height:`${a(k)}px`})},[(m(!0),y(E,null,B(a(z),(e,S)=>(m(),y("div",{class:"line",key:S,style:b({fontSize:`${a(v)}px`,marginTop:`${Math.round(a(v)*.2)}px`,lineHeight:`${String(Math.round(1.5*a(v)))}px`})},[r("span",se,w(e.time),1),r("span",{class:J(V.value[e.level]?V.value[e.level]:V.value.STDOUT)}," ["+w(e.level)+"] ",3),r("span",{class:"detail",style:b({color:`${a(I)}`})},w(e.detail),5)],4))),128))],4)]),_:1})}}});const ie=Y(ne,[["__scopeId","data-v-48c3e47f"]]);export{ie as default};
