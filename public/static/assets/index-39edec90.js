import{ac as St,ad as ar,a as Ja,q as Bv,k as ke,l as Tv,A as Ya,N as Mv,r as et,o as Xe,c as $t,e as ut,i as Re,w as Le,_ as Za,E as Ga,aa as Ov,ae as Iv,p as vn,v as Va,u as Ge,x as Ui,h as si,y as Nt,b as ni,af as pn,z as Pv,t as hr,I as Hv,F as Fv,g as Wv,ag as Uv,ah as xi,n as ja}from"./index-629e8f85.js";import{E as Nv}from"./codeEditor-5f5b71b2.js";import{W as $v}from"./index-cd3ba7a0.js";const zv=ye=>St.get("/fs/listdir/?path="+ye),Kv=(ye,Fe)=>St.get("/fs/filesize?path="+ye+"&type="+Fe),qv=ye=>St.get("/fs/mkdir/?path="+ye),Gv=ye=>St.get("/fs/open/?path="+ye),gn=ye=>St.get("/fs/media?path="+ye,{responseType:"blob"}),Vv=ye=>St.delete("/fs/rmfile/?path="+ye),jv=ye=>St.delete("/fs/rmdir/?path="+ye),Xa=(ye,Fe)=>St.post("/fs/savefile/?path="+ye,{content:Fe}),Xv=(ye,Fe)=>St.get("/fs/movefile/?path="+ye+"&newPath="+Fe),Jv=(ye,Fe)=>St.get("/fs/copyfile/?path="+ye+"&newPath="+Fe),Yv=(ye,Fe)=>St.get("/fs/copydir/?path="+ye+"&newPath="+Fe),Zv=(ye,Fe)=>St.get("/fs/renamefile/?path="+ye+"&newPath="+Fe),Qv=(ye,Fe)=>St.get("/fs/search/?path="+ye+"&keyWord="+Fe),ep=ye=>St.get("/fs/download?path="+ye,{responseType:"blob"});var Qa={exports:{}};(function(ye,Fe){(function(A,tt){ye.exports=tt()})(globalThis,()=>(()=>{var A={4567:function(j,a,u){var _=this&&this.__decorate||function(r,s,l,p){var g,w=arguments.length,f=w<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,s,l,p);else for(var y=r.length-1;y>=0;y--)(g=r[y])&&(f=(w<3?g(f):w>3?g(s,l,f):g(s,l))||f);return w>3&&f&&Object.defineProperty(s,l,f),f},m=this&&this.__param||function(r,s){return function(l,p){s(l,p,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const c=u(9042),v=u(9924),S=u(844),b=u(4725),d=u(2585),n=u(3656);let o=a.AccessibilityManager=class extends S.Disposable{constructor(r,s,l,p){super(),this._terminal=r,this._coreBrowserService=l,this._renderService=p,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let g=0;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);if(this._topBoundaryFocusListener=g=>this._handleBoundaryFocus(g,0),this._bottomBoundaryFocusListener=g=>this._handleBoundaryFocus(g,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new v.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(g=>this._handleResize(g.rows))),this.register(this._terminal.onRender(g=>this._refreshRows(g.start,g.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(g=>this._handleChar(g))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(g=>this._handleTab(g))),this.register(this._terminal.onKey(g=>this._handleKey(g.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,n.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(r){for(let s=0;s<r;s++)this._handleChar(" ")}_handleChar(r){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(r){this._clearLiveRegion(),/\p{Control}/u.test(r)||this._charsToConsume.push(r)}_refreshRows(r,s){this._liveRegionDebouncer.refresh(r,s,this._terminal.rows)}_renderRows(r,s){const l=this._terminal.buffer,p=l.lines.length.toString();for(let g=r;g<=s;g++){const w=l.lines.get(l.ydisp+g),f=[],y=(w==null?void 0:w.translateToString(!0,void 0,void 0,f))||"",T=(l.ydisp+g+1).toString(),O=this._rowElements[g];O&&(y.length===0?(O.innerText="Â ",this._rowColumns.set(O,[0,1])):(O.textContent=y,this._rowColumns.set(O,f)),O.setAttribute("aria-posinset",T),O.setAttribute("aria-setsize",p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(r,s){const l=r.target,p=this._rowElements[s===0?1:this._rowElements.length-2];if(l.getAttribute("aria-posinset")===(s===0?"1":`${this._terminal.buffer.lines.length}`)||r.relatedTarget!==p)return;let g,w;if(s===0?(g=l,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(g=this._rowElements.shift(),w=l,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){const f=this._createAccessibilityTreeNode();this._rowElements.unshift(f),this._rowContainer.insertAdjacentElement("afterbegin",f)}else{const f=this._createAccessibilityTreeNode();this._rowElements.push(f),this._rowContainer.appendChild(f)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}_handleSelectionChange(){var y;if(this._rowElements.length===0)return;const r=document.getSelection();if(!r)return;if(r.isCollapsed)return void(this._rowContainer.contains(r.anchorNode)&&this._terminal.clearSelection());if(!r.anchorNode||!r.focusNode)return void console.error("anchorNode and/or focusNode are null");let s={node:r.anchorNode,offset:r.anchorOffset},l={node:r.focusNode,offset:r.focusOffset};if((s.node.compareDocumentPosition(l.node)&Node.DOCUMENT_POSITION_PRECEDING||s.node===l.node&&s.offset>l.offset)&&([s,l]=[l,s]),s.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(s={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(s.node))return;const p=this._rowElements.slice(-1)[0];if(l.node.compareDocumentPosition(p)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(l={node:p,offset:((y=p.textContent)==null?void 0:y.length)??0}),!this._rowContainer.contains(l.node))return;const g=({node:T,offset:O})=>{const P=T instanceof Text?T.parentNode:T;let D=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(D))return console.warn("row is invalid. Race condition?"),null;const $=this._rowColumns.get(P);if(!$)return console.warn("columns is null. Race condition?"),null;let X=O<$.length?$[O]:$.slice(-1)[0]+1;return X>=this._terminal.cols&&(++D,X=0),{row:D,column:X}},w=g(s),f=g(l);if(w&&f){if(w.row>f.row||w.row===f.row&&w.column>=f.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(f.row-w.row)*this._terminal.cols-w.column+f.column)}}_handleResize(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const r=this._coreBrowserService.mainDocument.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}}_refreshRowDimensions(r){r.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=o=_([m(1,d.IInstantiationService),m(2,b.ICoreBrowserService),m(3,b.IRenderService)],o)},3614:(j,a)=>{function u(v){return v.replace(/\r?\n/g,"\r")}function _(v,S){return S?"\x1B[200~"+v+"\x1B[201~":v}function m(v,S,b,d){v=_(v=u(v),b.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(v,!0),S.value=""}function c(v,S,b){const d=b.getBoundingClientRect(),n=v.clientX-d.left-10,o=v.clientY-d.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${n}px`,S.style.top=`${o}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=u,a.bracketTextForPaste=_,a.copyHandler=function(v,S){v.clipboardData&&v.clipboardData.setData("text/plain",S.selectionText),v.preventDefault()},a.handlePasteEvent=function(v,S,b,d){v.stopPropagation(),v.clipboardData&&m(v.clipboardData.getData("text/plain"),S,b,d)},a.paste=m,a.moveTextAreaUnderMouseCursor=c,a.rightClickHandler=function(v,S,b,d,n){c(v,S,b),n&&d.rightClickSelect(v),S.value=d.selectionText,S.select()}},7239:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const _=u(1505);a.ColorContrastCache=class{constructor(){this._color=new _.TwoKeyMap,this._css=new _.TwoKeyMap}setCss(m,c,v){this._css.set(m,c,v)}getCss(m,c){return this._css.get(m,c)}setColor(m,c,v){this._color.set(m,c,v)}getColor(m,c){return this._color.get(m,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(u,_,m,c){u.addEventListener(_,m,c);let v=!1;return{dispose:()=>{v||(v=!0,u.removeEventListener(_,m,c))}}}},3551:function(j,a,u){var _=this&&this.__decorate||function(o,r,s,l){var p,g=arguments.length,w=g<3?r:l===null?l=Object.getOwnPropertyDescriptor(r,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,r,s,l);else for(var f=o.length-1;f>=0;f--)(p=o[f])&&(w=(g<3?p(w):g>3?p(r,s,w):p(r,s))||w);return g>3&&w&&Object.defineProperty(r,s,w),w},m=this&&this.__param||function(o,r){return function(s,l){r(s,l,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const c=u(3656),v=u(8460),S=u(844),b=u(2585),d=u(4725);let n=a.Linkifier=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(o,r,s,l,p){super(),this._element=o,this._mouseService=r,this._renderService=s,this._bufferService=l,this._linkProviderService=p,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{var g;this._lastMouseEvent=void 0,(g=this._activeProviderReplies)==null||g.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){this._lastMouseEvent=o;const r=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!r)return;this._isMouseOut=!1;const s=o.composedPath();for(let l=0;l<s.length;l++){const p=s[l];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._handleHover(r),this._lastBufferCell=r)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,r){var l,p;this._activeProviderReplies&&r||((l=this._activeProviderReplies)==null||l.forEach(g=>{g==null||g.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let s=!1;for(const[g,w]of this._linkProviderService.linkProviders.entries())r?(p=this._activeProviderReplies)!=null&&p.get(g)&&(s=this._checkLinkProviderResult(g,o,s)):w.provideLinks(o.y,f=>{var T,O;if(this._isMouseOut)return;const y=f==null?void 0:f.map(P=>({link:P}));(T=this._activeProviderReplies)==null||T.set(g,y),s=this._checkLinkProviderResult(g,o,s),((O=this._activeProviderReplies)==null?void 0:O.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,r){const s=new Set;for(let l=0;l<r.size;l++){const p=r.get(l);if(p)for(let g=0;g<p.length;g++){const w=p[g],f=w.link.range.start.y<o?0:w.link.range.start.x,y=w.link.range.end.y>o?this._bufferService.cols:w.link.range.end.x;for(let T=f;T<=y;T++){if(s.has(T)){p.splice(g--,1);break}s.add(T)}}}}_checkLinkProviderResult(o,r,s){var g;if(!this._activeProviderReplies)return s;const l=this._activeProviderReplies.get(o);let p=!1;for(let w=0;w<o;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(p=!0);if(!p&&l){const w=l.find(f=>this._linkAtPosition(f.link,r));w&&(s=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!s)for(let w=0;w<this._activeProviderReplies.size;w++){const f=(g=this._activeProviderReplies.get(w))==null?void 0:g.find(y=>this._linkAtPosition(y.link,r));if(f){s=!0,this._handleNewLink(f);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._currentLink)return;const r=this._positionFromMouseEvent(o,this._element,this._mouseService);r&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,r){this._currentLink&&this._lastMouseEvent&&(!o||!r||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._lastMouseEvent)return;const r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(o.link,r)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var s,l;return(l=(s=this._currentLink)==null?void 0:s.state)==null?void 0:l.decorations.pointerCursor},set:s=>{var l;(l=this._currentLink)!=null&&l.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",s))}},underline:{get:()=>{var s,l;return(l=(s=this._currentLink)==null?void 0:s.state)==null?void 0:l.decorations.underline},set:s=>{var l,p,g;(l=this._currentLink)!=null&&l.state&&((g=(p=this._currentLink)==null?void 0:p.state)==null?void 0:g.decorations.underline)!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,s))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(s=>{if(!this._currentLink)return;const l=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(l,p),this._lastMouseEvent)){const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._askForLink(g,!1)}})))}_linkHover(o,r,s){var l;(l=this._currentLink)!=null&&l.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(s,r.text)}_fireUnderlineEvent(o,r){const s=o.range,l=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-l-1,s.end.x,s.end.y-l-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(o,r,s){var l;(l=this._currentLink)!=null&&l.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(s,r.text)}_linkAtPosition(o,r){const s=o.range.start.y*this._bufferService.cols+o.range.start.x,l=o.range.end.y*this._bufferService.cols+o.range.end.x,p=r.y*this._bufferService.cols+r.x;return s<=p&&p<=l}_positionFromMouseEvent(o,r,s){const l=s.getCoords(o,r,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,r,s,l,p){return{x1:o,y1:r,x2:s,y2:l,cols:this._bufferService.cols,fg:p}}};a.Linkifier=n=_([m(1,d.IMouseService),m(2,d.IRenderService),m(3,b.IBufferService),m(4,d.ILinkProviderService)],n)},9042:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(j,a,u){var _=this&&this.__decorate||function(d,n,o,r){var s,l=arguments.length,p=l<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(d,n,o,r);else for(var g=d.length-1;g>=0;g--)(s=d[g])&&(p=(l<3?s(p):l>3?s(n,o,p):s(n,o))||p);return l>3&&p&&Object.defineProperty(n,o,p),p},m=this&&this.__param||function(d,n){return function(o,r){n(o,r,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const c=u(511),v=u(2585);let S=a.OscLinkProvider=class{constructor(d,n,o){this._bufferService=d,this._optionsService=n,this._oscLinkService=o}provideLinks(d,n){var y;const o=this._bufferService.buffer.lines.get(d-1);if(!o)return void n(void 0);const r=[],s=this._optionsService.rawOptions.linkHandler,l=new c.CellData,p=o.getTrimmedLength();let g=-1,w=-1,f=!1;for(let T=0;T<p;T++)if(w!==-1||o.hasContent(T)){if(o.loadCell(T,l),l.hasExtendedAttrs()&&l.extended.urlId){if(w===-1){w=T,g=l.extended.urlId;continue}f=l.extended.urlId!==g}else w!==-1&&(f=!0);if(f||w!==-1&&T===p-1){const O=(y=this._oscLinkService.getLinkData(g))==null?void 0:y.uri;if(O){const P={start:{x:w+1,y:d},end:{x:T+(f||T!==p-1?0:1),y:d}};let D=!1;if(!(s!=null&&s.allowNonHttpProtocols))try{const $=new URL(O);["http:","https:"].includes($.protocol)||(D=!0)}catch{D=!0}D||r.push({text:O,range:P,activate:($,X)=>s?s.activate($,X,P):b(0,X),hover:($,X)=>{var ee;return(ee=s==null?void 0:s.hover)==null?void 0:ee.call(s,$,X,P)},leave:($,X)=>{var ee;return(ee=s==null?void 0:s.leave)==null?void 0:ee.call(s,$,X,P)}})}f=!1,l.hasExtendedAttrs()&&l.extended.urlId?(w=T,g=l.extended.urlId):(w=-1,g=-1)}}n(r)}};function b(d,n){if(confirm(`Do you want to navigate to ${n}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=S=_([m(0,v.IBufferService),m(1,v.IOptionsService),m(2,v.IOscLinkService)],S)},6193:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(u,_){this._renderCallback=u,this._coreBrowserService=_,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(u,_,m){this._rowCount=m,u=u!==void 0?u:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,_),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},3236:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const _=u(3614),m=u(3656),c=u(3551),v=u(9042),S=u(3730),b=u(1680),d=u(3107),n=u(5744),o=u(2950),r=u(1296),s=u(428),l=u(4269),p=u(5114),g=u(8934),w=u(3230),f=u(9312),y=u(4725),T=u(6731),O=u(8055),P=u(8969),D=u(8460),$=u(844),X=u(6114),ee=u(8437),se=u(2584),Q=u(7399),E=u(5941),k=u(9074),M=u(2585),H=u(5435),Z=u(4567),re=u(779);class le extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(U={}){super(U),this.browser=X,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new $.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(k.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(re.LinkProviderService),this._instantiationService.setService(y.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((R,J)=>this.refresh(R,J))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(R=>this._reportWindowsOptions(R))),this.register(this._inputHandler.onColor(R=>this._handleColorEvent(R))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(R=>this._afterResize(R.cols,R.rows))),this.register((0,$.toDisposable)(()=>{var R,J;this._customKeyEventHandler=void 0,(J=(R=this.element)==null?void 0:R.parentNode)==null||J.removeChild(this.element)}))}_handleColorEvent(U){if(this._themeService)for(const R of U){let J,z="";switch(R.index){case 256:J="foreground",z="10";break;case 257:J="background",z="11";break;case 258:J="cursor",z="12";break;default:J="ansi",z="4;"+R.index}switch(R.type){case 0:const ne=O.color.toColorRGB(J==="ansi"?this._themeService.colors.ansi[R.index]:this._themeService.colors[J]);this.coreService.triggerDataEvent(`${se.C0.ESC}]${z};${(0,E.toRgbString)(ne)}${se.C1_ESCAPED.ST}`);break;case 1:if(J==="ansi")this._themeService.modifyColors(ie=>ie.ansi[R.index]=O.channels.toColor(...R.color));else{const ie=J;this._themeService.modifyColors(we=>we[ie]=O.channels.toColor(...R.color))}break;case 2:this._themeService.restoreColor(R.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(U){U?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(U){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(se.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var U;return(U=this.textarea)==null?void 0:U.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(se.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const U=this.buffer.ybase+this.buffer.y,R=this.buffer.lines.get(U);if(!R)return;const J=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,ne=R.getWidth(J),ie=this._renderService.dimensions.css.cell.width*ne,we=this.buffer.y*this._renderService.dimensions.css.cell.height,Ee=J*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ee+"px",this.textarea.style.top=we+"px",this.textarea.style.width=ie+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",R=>{this.hasSelection()&&(0,_.copyHandler)(R,this._selectionService)}));const U=R=>(0,_.handlePasteEvent)(R,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",U)),this.register((0,m.addDisposableDomListener)(this.element,"paste",U)),X.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",R=>{R.button===2&&(0,_.rightClickHandler)(R,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",R=>{(0,_.rightClickHandler)(R,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),X.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",R=>{R.button===1&&(0,_.moveTextAreaUnderMouseCursor)(R,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",U=>this._keyUp(U),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",U=>this._keyDown(U),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",U=>this._keyPress(U),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",U=>this._compositionHelper.compositionupdate(U))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,m.addDisposableDomListener)(this.textarea,"input",U=>this._inputEvent(U),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(U){var J;if(!U)throw new Error("Terminal requires a parent element.");if(U.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((J=this.element)==null?void 0:J.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=U.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),U.appendChild(this.element);const R=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),R.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,m.addDisposableDomListener)(this.screenElement,"mousemove",z=>this.updateCursorStyle(z))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),R.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),X.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,U.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(s.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(l.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(g.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(R);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(f.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(n.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(r.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const U=this,R=this.element;function J(ie){const we=U._mouseService.getMouseReportCoords(ie,U.screenElement);if(!we)return!1;let Ee,Me;switch(ie.overrideType||ie.type){case"mousemove":Me=32,ie.buttons===void 0?(Ee=3,ie.button!==void 0&&(Ee=ie.button<3?ie.button:3)):Ee=1&ie.buttons?0:4&ie.buttons?1:2&ie.buttons?2:3;break;case"mouseup":Me=0,Ee=ie.button<3?ie.button:3;break;case"mousedown":Me=1,Ee=ie.button<3?ie.button:3;break;case"wheel":if(U._customWheelEventHandler&&U._customWheelEventHandler(ie)===!1||U.viewport.getLinesScrolled(ie)===0)return!1;Me=ie.deltaY<0?0:1,Ee=4;break;default:return!1}return!(Me===void 0||Ee===void 0||Ee>4)&&U.coreMouseService.triggerMouseEvent({col:we.col,row:we.row,x:we.x,y:we.y,button:Ee,action:Me,ctrl:ie.ctrlKey,alt:ie.altKey,shift:ie.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:ie=>(J(ie),ie.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(ie)),wheel:ie=>(J(ie),this.cancel(ie,!0)),mousedrag:ie=>{ie.buttons&&J(ie)},mousemove:ie=>{ie.buttons||J(ie)}};this.register(this.coreMouseService.onProtocolChange(ie=>{ie?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ie)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ie?z.mousemove||(R.addEventListener("mousemove",ne.mousemove),z.mousemove=ne.mousemove):(R.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&ie?z.wheel||(R.addEventListener("wheel",ne.wheel,{passive:!1}),z.wheel=ne.wheel):(R.removeEventListener("wheel",z.wheel),z.wheel=null),2&ie?z.mouseup||(z.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&ie?z.mousedrag||(z.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(R,"mousedown",ie=>{if(ie.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ie))return J(ie),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(ie)})),this.register((0,m.addDisposableDomListener)(R,"wheel",ie=>{if(!z.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(ie)===!1)return!1;if(!this.buffer.hasScrollback){const we=this.viewport.getLinesScrolled(ie);if(we===0)return;const Ee=se.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ie.deltaY<0?"A":"B");let Me="";for(let Je=0;Je<Math.abs(we);Je++)Me+=Ee;return this.coreService.triggerDataEvent(Me,!0),this.cancel(ie,!0)}return this.viewport.handleWheel(ie)?this.cancel(ie):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(R,"touchstart",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ie),this.cancel(ie)},{passive:!0})),this.register((0,m.addDisposableDomListener)(R,"touchmove",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ie)?void 0:this.cancel(ie)},{passive:!1}))}refresh(U,R){var J;(J=this._renderService)==null||J.refreshRows(U,R)}updateCursorStyle(U){var R;(R=this._selectionService)!=null&&R.shouldColumnSelect(U)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(U,R,J=0){var z;J===1?(super.scrollLines(U,R,J),this.refresh(0,this.rows-1)):(z=this.viewport)==null||z.scrollLines(U)}paste(U){(0,_.paste)(U,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(U){this._customKeyEventHandler=U}attachCustomWheelEventHandler(U){this._customWheelEventHandler=U}registerLinkProvider(U){return this._linkProviderService.registerLinkProvider(U)}registerCharacterJoiner(U){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const R=this._characterJoinerService.register(U);return this.refresh(0,this.rows-1),R}deregisterCharacterJoiner(U){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(U)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(U){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+U)}registerDecoration(U){return this._decorationService.registerDecoration(U)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(U,R,J){this._selectionService.setSelection(U,R,J)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var U;(U=this._selectionService)==null||U.clearSelection()}selectAll(){var U;(U=this._selectionService)==null||U.selectAll()}selectLines(U,R){var J;(J=this._selectionService)==null||J.selectLines(U,R)}_keyDown(U){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(U)===!1)return!1;const R=this.browser.isMac&&this.options.macOptionIsMeta&&U.altKey;if(!R&&!this._compositionHelper.keydown(U))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;R||U.key!=="Dead"&&U.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const J=(0,Q.evaluateKeyboardEvent)(U,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(U),J.type===3||J.type===2){const z=this.rows-1;return this.scrollLines(J.type===2?-z:z),this.cancel(U,!0)}return J.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,U)||(J.cancel&&this.cancel(U,!0),!J.key||!!(U.key&&!U.ctrlKey&&!U.altKey&&!U.metaKey&&U.key.length===1&&U.key.charCodeAt(0)>=65&&U.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(J.key!==se.C0.ETX&&J.key!==se.C0.CR||(this.textarea.value=""),this._onKey.fire({key:J.key,domEvent:U}),this._showCursor(),this.coreService.triggerDataEvent(J.key,!0),!this.optionsService.rawOptions.screenReaderMode||U.altKey||U.ctrlKey?this.cancel(U,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(U,R){const J=U.isMac&&!this.options.macOptionIsMeta&&R.altKey&&!R.ctrlKey&&!R.metaKey||U.isWindows&&R.altKey&&R.ctrlKey&&!R.metaKey||U.isWindows&&R.getModifierState("AltGraph");return R.type==="keypress"?J:J&&(!R.keyCode||R.keyCode>47)}_keyUp(U){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(U)===!1||(function(R){return R.keyCode===16||R.keyCode===17||R.keyCode===18}(U)||this.focus(),this.updateCursorStyle(U),this._keyPressHandled=!1)}_keyPress(U){let R;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(U)===!1)return!1;if(this.cancel(U),U.charCode)R=U.charCode;else if(U.which===null||U.which===void 0)R=U.keyCode;else{if(U.which===0||U.charCode===0)return!1;R=U.which}return!(!R||(U.altKey||U.ctrlKey||U.metaKey)&&!this._isThirdLevelShift(this.browser,U)||(R=String.fromCharCode(R),this._onKey.fire({key:R,domEvent:U}),this._showCursor(),this.coreService.triggerDataEvent(R,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(U){if(U.data&&U.inputType==="insertText"&&(!U.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const R=U.data;return this.coreService.triggerDataEvent(R,!0),this.cancel(U),!0}return!1}resize(U,R){U!==this.cols||R!==this.rows?super.resize(U,R):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(U,R){var J,z;(J=this._charSizeService)==null||J.measure(),(z=this.viewport)==null||z.syncScrollArea(!0)}clear(){var U;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let R=1;R<this.rows;R++)this.buffer.lines.push(this.buffer.getBlankLine(ee.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(U=this.viewport)==null||U.reset(),this.refresh(0,this.rows-1)}}reset(){var R,J;this.options.rows=this.rows,this.options.cols=this.cols;const U=this._customKeyEventHandler;this._setup(),super.reset(),(R=this._selectionService)==null||R.reset(),this._decorationService.reset(),(J=this.viewport)==null||J.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var U;(U=this._renderService)==null||U.clearTextureAtlas()}_reportFocus(){var U;(U=this.element)!=null&&U.classList.contains("focus")?this.coreService.triggerDataEvent(se.C0.ESC+"[I"):this.coreService.triggerDataEvent(se.C0.ESC+"[O")}_reportWindowsOptions(U){if(this._renderService)switch(U){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const R=this._renderService.dimensions.css.canvas.width.toFixed(0),J=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${se.C0.ESC}[4;${J};${R}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${se.C0.ESC}[6;${ne};${z}t`)}}cancel(U,R){if(this.options.cancelEvents||R)return U.preventDefault(),U.stopPropagation(),!1}}a.Terminal=le},9924:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(u,_=1e3){this._renderCallback=u,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,_,m){this._rowCount=m,u=u!==void 0?u:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_;const c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=c-this._lastRefreshMs,S=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,_)}}},1680:function(j,a,u){var _=this&&this.__decorate||function(o,r,s,l){var p,g=arguments.length,w=g<3?r:l===null?l=Object.getOwnPropertyDescriptor(r,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,r,s,l);else for(var f=o.length-1;f>=0;f--)(p=o[f])&&(w=(g<3?p(w):g>3?p(r,s,w):p(r,s))||w);return g>3&&w&&Object.defineProperty(r,s,w),w},m=this&&this.__param||function(o,r){return function(s,l){r(s,l,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const c=u(3656),v=u(4725),S=u(8460),b=u(844),d=u(2585);let n=a.Viewport=class extends b.Disposable{constructor(o,r,s,l,p,g,w,f){super(),this._viewportElement=o,this._scrollArea=r,this._bufferService=s,this._optionsService=l,this._charSizeService=p,this._renderService=g,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(f.colors),this.register(f.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const r=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==r&&(this._lastRecordedBufferHeight=r,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,r){const s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&s<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const r=this._getPixelsScrolled(o);return r!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+r:this._smoothScrollState.target+=r,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=r,this._bubbleScroll(o,r))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const r=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+r,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let r=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r}getBufferElements(o,r){var f;let s,l="";const p=[],g=r??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let y=o;y<g;y++){const T=w.get(y);if(!T)continue;const O=(f=w.get(y+1))==null?void 0:f.isWrapped;if(l+=T.translateToString(!O),!O||y===w.length-1){const P=document.createElement("div");P.textContent=l,p.push(P),l.length>0&&(s=P),l=""}}return{bufferElements:p,cursorElement:s}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let r=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(o,r){const s=this._optionsService.rawOptions.fastScrollModifier;return s==="alt"&&r.altKey||s==="ctrl"&&r.ctrlKey||s==="shift"&&r.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const r=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(o,r))}};a.Viewport=n=_([m(2,d.IBufferService),m(3,d.IOptionsService),m(4,v.ICharSizeService),m(5,v.IRenderService),m(6,v.ICoreBrowserService),m(7,v.IThemeService)],n)},3107:function(j,a,u){var _=this&&this.__decorate||function(d,n,o,r){var s,l=arguments.length,p=l<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(d,n,o,r);else for(var g=d.length-1;g>=0;g--)(s=d[g])&&(p=(l<3?s(p):l>3?s(n,o,p):s(n,o))||p);return l>3&&p&&Object.defineProperty(n,o,p),p},m=this&&this.__param||function(d,n){return function(o,r){n(o,r,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const c=u(4725),v=u(844),S=u(2585);let b=a.BufferDecorationRenderer=class extends v.Disposable{constructor(d,n,o,r,s){super(),this._screenElement=d,this._bufferService=n,this._coreBrowserService=o,this._decorationService=r,this._renderService=s,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(l=>this._removeDecoration(l))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const d of this._decorationService.decorations)this._renderDecoration(d);this._dimensionsChanged=!1}_renderDecoration(d){this._refreshStyle(d),this._dimensionsChanged&&this._refreshXPosition(d)}_createElement(d){var r;const n=this._coreBrowserService.mainDocument.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",((r=d==null?void 0:d.options)==null?void 0:r.layer)==="top"),n.style.width=`${Math.round((d.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(d.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(d.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const o=d.options.x??0;return o&&o>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(d,n),n}_refreshStyle(d){const n=d.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)d.element&&(d.element.style.display="none",d.onRenderEmitter.fire(d.element));else{let o=this._decorationElements.get(d);o||(o=this._createElement(d),d.element=o,this._decorationElements.set(d,o),this._container.appendChild(o),d.onDispose(()=>{this._decorationElements.delete(d),o.remove()})),o.style.top=n*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",d.onRenderEmitter.fire(o)}}_refreshXPosition(d,n=d.element){if(!n)return;const o=d.options.x??0;(d.options.anchor||"left")==="right"?n.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":n.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(d){var n;(n=this._decorationElements.get(d))==null||n.remove(),this._decorationElements.delete(d),d.dispose()}};a.BufferDecorationRenderer=b=_([m(1,S.IBufferService),m(2,c.ICoreBrowserService),m(3,S.IDecorationService),m(4,c.IRenderService)],b)},5871:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const _ of this._zones)if(_.color===u.options.overviewRulerOptions.color&&_.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(_,u.marker.line))return;if(this._lineAdjacentToZone(_,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(_,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,_){return _>=u.startBufferLine&&_<=u.endBufferLine}_lineAdjacentToZone(u,_,m){return _>=u.startBufferLine-this._linePadding[m||"full"]&&_<=u.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(u,_){u.startBufferLine=Math.min(u.startBufferLine,_),u.endBufferLine=Math.max(u.endBufferLine,_)}}},5744:function(j,a,u){var _=this&&this.__decorate||function(s,l,p,g){var w,f=arguments.length,y=f<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,p,g);else for(var T=s.length-1;T>=0;T--)(w=s[T])&&(y=(f<3?w(y):f>3?w(l,p,y):w(l,p))||y);return f>3&&y&&Object.defineProperty(l,p,y),y},m=this&&this.__param||function(s,l){return function(p,g){l(p,g,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const c=u(5871),v=u(4725),S=u(844),b=u(2585),d={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let r=a.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(s,l,p,g,w,f,y){var O;super(),this._viewportElement=s,this._screenElement=l,this._bufferService=p,this._decorationService=g,this._renderService=w,this._optionsService=f,this._coreBrowserService=y,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)==null||O.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const s=Math.floor(this._canvas.width/3),l=Math.ceil(this._canvas.width/3);n.full=this._canvas.width,n.left=s,n.center=l,n.right=s,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=n.left,o.right=n.left+n.center}_refreshDrawHeightConstants(){d.full=Math.round(2*this._coreBrowserService.dpr);const s=this._canvas.height/this._bufferService.buffer.lines.length,l=Math.round(Math.max(Math.min(s,12),6)*this._coreBrowserService.dpr);d.left=l,d.center=l,d.right=l}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const l of this._decorationService.decorations)this._colorZoneStore.addDecoration(l);this._ctx.lineWidth=1;const s=this._colorZoneStore.zones;for(const l of s)l.position!=="full"&&this._renderColorZone(l);for(const l of s)l.position==="full"&&this._renderColorZone(l);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(s){this._ctx.fillStyle=s.color,this._ctx.fillRect(o[s.position||"full"],Math.round((this._canvas.height-1)*(s.startBufferLine/this._bufferService.buffers.active.lines.length)-d[s.position||"full"]/2),n[s.position||"full"],Math.round((this._canvas.height-1)*((s.endBufferLine-s.startBufferLine)/this._bufferService.buffers.active.lines.length)+d[s.position||"full"]))}_queueRefresh(s,l){this._shouldUpdateDimensions=s||this._shouldUpdateDimensions,this._shouldUpdateAnchor=l||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=r=_([m(2,b.IBufferService),m(3,b.IDecorationService),m(4,v.IRenderService),m(5,b.IOptionsService),m(6,v.ICoreBrowserService)],r)},2950:function(j,a,u){var _=this&&this.__decorate||function(d,n,o,r){var s,l=arguments.length,p=l<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(d,n,o,r);else for(var g=d.length-1;g>=0;g--)(s=d[g])&&(p=(l<3?s(p):l>3?s(n,o,p):s(n,o))||p);return l>3&&p&&Object.defineProperty(n,o,p),p},m=this&&this.__param||function(d,n){return function(o,r){n(o,r,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const c=u(4725),v=u(2585),S=u(2584);let b=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,n,o,r,s,l){this._textarea=d,this._compositionView=n,this._bufferService=o,this._optionsService=r,this._coreService=s,this._renderService=l,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){const n={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,n.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(n.start,n.end):this._textarea.value.substring(n.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}}_handleAnyTextareaChanges(){const d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const n=this._textarea.value,o=n.replace(d,"");this._dataAlreadySent=o,n.length>d.length?this._coreService.triggerDataEvent(o,!0):n.length<d.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):n.length===d.length&&n!==d&&this._coreService.triggerDataEvent(n,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,r=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=n*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const l=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=b=_([m(2,v.IBufferService),m(3,v.IOptionsService),m(4,v.ICoreService),m(5,c.IRenderService)],b)},9806:(j,a)=>{function u(_,m,c){const v=c.getBoundingClientRect(),S=_.getComputedStyle(c),b=parseInt(S.getPropertyValue("padding-left")),d=parseInt(S.getPropertyValue("padding-top"));return[m.clientX-v.left-b,m.clientY-v.top-d]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=u,a.getCoords=function(_,m,c,v,S,b,d,n,o){if(!b)return;const r=u(_,m,c);return r?(r[0]=Math.ceil((r[0]+(o?d/2:0))/d),r[1]=Math.ceil(r[1]/n),r[0]=Math.min(Math.max(r[0],1),v+(o?1:0)),r[1]=Math.min(Math.max(r[1],1),S),r):void 0}},9504:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const _=u(2584);function m(n,o,r,s){const l=n-c(n,r),p=o-c(o,r),g=Math.abs(l-p)-function(w,f,y){let T=0;const O=w-c(w,y),P=f-c(f,y);for(let D=0;D<Math.abs(O-P);D++){const $=v(w,f)==="A"?-1:1,X=y.buffer.lines.get(O+$*D);X!=null&&X.isWrapped&&T++}return T}(n,o,r);return d(g,b(v(n,o),s))}function c(n,o){let r=0,s=o.buffer.lines.get(n),l=s==null?void 0:s.isWrapped;for(;l&&n>=0&&n<o.rows;)r++,s=o.buffer.lines.get(--n),l=s==null?void 0:s.isWrapped;return r}function v(n,o){return n>o?"A":"B"}function S(n,o,r,s,l,p){let g=n,w=o,f="";for(;g!==r||w!==s;)g+=l?1:-1,l&&g>p.cols-1?(f+=p.buffer.translateBufferLineToString(w,!1,n,g),g=0,n=0,w++):!l&&g<0&&(f+=p.buffer.translateBufferLineToString(w,!1,0,n+1),g=p.cols-1,n=g,w--);return f+p.buffer.translateBufferLineToString(w,!1,n,g)}function b(n,o){const r=o?"O":"[";return _.C0.ESC+r+n}function d(n,o){n=Math.floor(n);let r="";for(let s=0;s<n;s++)r+=o;return r}a.moveToCellSequence=function(n,o,r,s){const l=r.buffer.x,p=r.buffer.y;if(!r.buffer.hasScrollback)return function(f,y,T,O,P,D){return m(y,O,P,D).length===0?"":d(S(f,y,f,y-c(y,P),!1,P).length,b("D",D))}(l,p,0,o,r,s)+m(p,o,r,s)+function(f,y,T,O,P,D){let $;$=m(y,O,P,D).length>0?O-c(O,P):y;const X=O,ee=function(se,Q,E,k,M,H){let Z;return Z=m(E,k,M,H).length>0?k-c(k,M):Q,se<E&&Z<=k||se>=E&&Z<k?"C":"D"}(f,y,T,O,P,D);return d(S(f,$,T,X,ee==="C",P).length,b(ee,D))}(l,p,n,o,r,s);let g;if(p===o)return g=l>n?"D":"C",d(Math.abs(l-n),b(g,s));g=p>o?"D":"C";const w=Math.abs(p-o);return d(function(f,y){return y.cols-f}(p>o?n:l,r)+(w-1)*r.cols+1+((p>o?l:n)-1),b(g,s))}},1296:function(j,a,u){var _=this&&this.__decorate||function(D,$,X,ee){var se,Q=arguments.length,E=Q<3?$:ee===null?ee=Object.getOwnPropertyDescriptor($,X):ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(D,$,X,ee);else for(var k=D.length-1;k>=0;k--)(se=D[k])&&(E=(Q<3?se(E):Q>3?se($,X,E):se($,X))||E);return Q>3&&E&&Object.defineProperty($,X,E),E},m=this&&this.__param||function(D,$){return function(X,ee){$(X,ee,D)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const c=u(3787),v=u(2550),S=u(2223),b=u(6171),d=u(6052),n=u(4725),o=u(8055),r=u(8460),s=u(844),l=u(2585),p="xterm-dom-renderer-owner-",g="xterm-rows",w="xterm-fg-",f="xterm-bg-",y="xterm-focus",T="xterm-selection";let O=1,P=a.DomRenderer=class extends s.Disposable{constructor(D,$,X,ee,se,Q,E,k,M,H,Z,re,le){super(),this._terminal=D,this._document=$,this._element=X,this._screenElement=ee,this._viewportElement=se,this._helperContainer=Q,this._linkifier2=E,this._charSizeService=M,this._optionsService=H,this._bufferService=Z,this._coreBrowserService=re,this._themeService=le,this._terminalClass=O++,this._rowElements=[],this._selectionRenderModel=(0,d.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new r.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(fe=>this._injectCss(fe))),this._injectCss(this._themeService.colors),this._rowFactory=k.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(fe=>this._handleLinkHover(fe))),this.register(this._linkifier2.onHideLinkUnderline(fe=>this._handleLinkLeave(fe))),this.register((0,s.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const X of this._rowElements)X.style.width=`${this.dimensions.css.canvas.width}px`,X.style.height=`${this.dimensions.css.cell.height}px`,X.style.lineHeight=`${this.dimensions.css.cell.height}px`,X.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const $=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let $=`${this._terminalSelector} .${g} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;$+=`${this._terminalSelector} .${g} .xterm-dim { color: ${o.color.multiplyOpacity(D.foreground,.5).css};}`,$+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const X=`blink_underline_${this._terminalClass}`,ee=`blink_bar_${this._terminalClass}`,se=`blink_block_${this._terminalClass}`;$+=`@keyframes ${X} { 50% {  border-bottom-style: hidden; }}`,$+=`@keyframes ${ee} { 50% {  box-shadow: none; }}`,$+=`@keyframes ${se} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,$+=`${this._terminalSelector} .${g}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${X} 1s step-end infinite;}${this._terminalSelector} .${g}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ee} 1s step-end infinite;}${this._terminalSelector} .${g}.${y} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${se} 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,$+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[Q,E]of D.ansi.entries())$+=`${this._terminalSelector} .${w}${Q} { color: ${E.css}; }${this._terminalSelector} .${w}${Q}.xterm-dim { color: ${o.color.multiplyOpacity(E,.5).css}; }${this._terminalSelector} .${f}${Q} { background-color: ${E.css}; }`;$+=`${this._terminalSelector} .${w}${S.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(D.background).css}; }${this._terminalSelector} .${w}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${f}${S.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=$}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,$){for(let X=this._rowElements.length;X<=$;X++){const ee=this._document.createElement("div");this._rowContainer.appendChild(ee),this._rowElements.push(ee)}for(;this._rowElements.length>$;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,$){this._refreshRowElements(D,$),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(y),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(y),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,$,X){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,$,X),this.renderRows(0,this._bufferService.rows-1),!D||!$)return;this._selectionRenderModel.update(this._terminal,D,$,X);const ee=this._selectionRenderModel.viewportStartRow,se=this._selectionRenderModel.viewportEndRow,Q=this._selectionRenderModel.viewportCappedStartRow,E=this._selectionRenderModel.viewportCappedEndRow;if(Q>=this._bufferService.rows||E<0)return;const k=this._document.createDocumentFragment();if(X){const M=D[0]>$[0];k.appendChild(this._createSelectionElement(Q,M?$[0]:D[0],M?D[0]:$[0],E-Q+1))}else{const M=ee===Q?D[0]:0,H=Q===se?$[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(Q,M,H));const Z=E-Q-1;if(k.appendChild(this._createSelectionElement(Q+1,0,this._bufferService.cols,Z)),Q!==E){const re=se===E?$[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(E,0,re))}}this._selectionContainer.appendChild(k)}_createSelectionElement(D,$,X,ee=1){const se=this._document.createElement("div"),Q=$*this.dimensions.css.cell.width;let E=this.dimensions.css.cell.width*(X-$);return Q+E>this.dimensions.css.canvas.width&&(E=this.dimensions.css.canvas.width-Q),se.style.height=ee*this.dimensions.css.cell.height+"px",se.style.top=D*this.dimensions.css.cell.height+"px",se.style.left=`${Q}px`,se.style.width=`${E}px`,se}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,$){const X=this._bufferService.buffer,ee=X.ybase+X.y,se=Math.min(X.x,this._bufferService.cols-1),Q=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,k=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=D;M<=$;M++){const H=M+X.ydisp,Z=this._rowElements[M],re=X.lines.get(H);if(!Z||!re)break;Z.replaceChildren(...this._rowFactory.createRow(re,H,H===ee,E,k,se,Q,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,$,X,ee,se,Q){X<0&&(D=0),ee<0&&($=0);const E=this._bufferService.rows-1;X=Math.max(Math.min(X,E),0),ee=Math.max(Math.min(ee,E),0),se=Math.min(se,this._bufferService.cols);const k=this._bufferService.buffer,M=k.ybase+k.y,H=Math.min(k.x,se-1),Z=this._optionsService.rawOptions.cursorBlink,re=this._optionsService.rawOptions.cursorStyle,le=this._optionsService.rawOptions.cursorInactiveStyle;for(let fe=X;fe<=ee;++fe){const U=fe+k.ydisp,R=this._rowElements[fe],J=k.lines.get(U);if(!R||!J)break;R.replaceChildren(...this._rowFactory.createRow(J,U,U===M,re,le,H,Z,this.dimensions.css.cell.width,this._widthCache,Q?fe===X?D:0:-1,Q?(fe===ee?$:se)-1:-1))}}};a.DomRenderer=P=_([m(7,l.IInstantiationService),m(8,n.ICharSizeService),m(9,l.IOptionsService),m(10,l.IBufferService),m(11,n.ICoreBrowserService),m(12,n.IThemeService)],P)},3787:function(j,a,u){var _=this&&this.__decorate||function(g,w,f,y){var T,O=arguments.length,P=O<3?w:y===null?y=Object.getOwnPropertyDescriptor(w,f):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(g,w,f,y);else for(var D=g.length-1;D>=0;D--)(T=g[D])&&(P=(O<3?T(P):O>3?T(w,f,P):T(w,f))||P);return O>3&&P&&Object.defineProperty(w,f,P),P},m=this&&this.__param||function(g,w){return function(f,y){w(f,y,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const c=u(2223),v=u(643),S=u(511),b=u(2585),d=u(8055),n=u(4725),o=u(4269),r=u(6171),s=u(3734);let l=a.DomRendererRowFactory=class{constructor(g,w,f,y,T,O,P){this._document=g,this._characterJoinerService=w,this._optionsService=f,this._coreBrowserService=y,this._coreService=T,this._decorationService=O,this._themeService=P,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(g,w,f){this._selectionStart=g,this._selectionEnd=w,this._columnSelectMode=f}createRow(g,w,f,y,T,O,P,D,$,X,ee){const se=[],Q=this._characterJoinerService.getJoinedCharacters(w),E=this._themeService.colors;let k,M=g.getNoBgTrimmedLength();f&&M<O+1&&(M=O+1);let H=0,Z="",re=0,le=0,fe=0,U=!1,R=0,J=!1,z=0;const ne=[],ie=X!==-1&&ee!==-1;for(let we=0;we<M;we++){g.loadCell(we,this._workCell);let Ee=this._workCell.getWidth();if(Ee===0)continue;let Me=!1,Je=we,ue=this._workCell;if(Q.length>0&&we===Q[0][0]){Me=!0;const Ie=Q.shift();ue=new o.JoinedCellData(this._workCell,g.translateToString(!0,Ie[0],Ie[1]),Ie[1]-Ie[0]),Je=Ie[1]-1,Ee=ue.getWidth()}const zt=this._isCellInSelection(we,w),vi=f&&we===O,It=ie&&we>=X&&we<=ee;let nt=!1;this._decorationService.forEachDecorationAtCell(we,w,void 0,Ie=>{nt=!0});let Lt=ue.getChars()||v.WHITESPACE_CELL_CHAR;if(Lt===" "&&(ue.isUnderline()||ue.isOverline())&&(Lt="Â "),z=Ee*D-$.get(Lt,ue.isBold(),ue.isItalic()),k){if(H&&(zt&&J||!zt&&!J&&ue.bg===re)&&(zt&&J&&E.selectionForeground||ue.fg===le)&&ue.extended.ext===fe&&It===U&&z===R&&!vi&&!Me&&!nt){ue.isInvisible()?Z+=v.WHITESPACE_CELL_CHAR:Z+=Lt,H++;continue}H&&(k.textContent=Z),k=this._document.createElement("span"),H=0,Z=""}else k=this._document.createElement("span");if(re=ue.bg,le=ue.fg,fe=ue.extended.ext,U=It,R=z,J=zt,Me&&O>=we&&O<=Je&&(O=we),!this._coreService.isCursorHidden&&vi&&this._coreService.isCursorInitialized){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&ne.push("xterm-cursor-blink"),ne.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(ue.isBold()&&ne.push("xterm-bold"),ue.isItalic()&&ne.push("xterm-italic"),ue.isDim()&&ne.push("xterm-dim"),Z=ue.isInvisible()?v.WHITESPACE_CELL_CHAR:ue.getChars()||v.WHITESPACE_CELL_CHAR,ue.isUnderline()&&(ne.push(`xterm-underline-${ue.extended.underlineStyle}`),Z===" "&&(Z="Â "),!ue.isUnderlineColorDefault()))if(ue.isUnderlineColorRGB())k.style.textDecorationColor=`rgb(${s.AttributeData.toColorRGB(ue.getUnderlineColor()).join(",")})`;else{let Ie=ue.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ue.isBold()&&Ie<8&&(Ie+=8),k.style.textDecorationColor=E.ansi[Ie].css}ue.isOverline()&&(ne.push("xterm-overline"),Z===" "&&(Z="Â ")),ue.isStrikethrough()&&ne.push("xterm-strikethrough"),It&&(k.style.textDecoration="underline");let q=ue.getFgColor(),te=ue.getFgColorMode(),he=ue.getBgColor(),ze=ue.getBgColorMode();const Ke=!!ue.isInverse();if(Ke){const Ie=q;q=he,he=Ie;const jt=te;te=ze,ze=jt}let it,Kt,ot,Pt=!1;switch(this._decorationService.forEachDecorationAtCell(we,w,void 0,Ie=>{Ie.options.layer!=="top"&&Pt||(Ie.backgroundColorRGB&&(ze=50331648,he=Ie.backgroundColorRGB.rgba>>8&16777215,it=Ie.backgroundColorRGB),Ie.foregroundColorRGB&&(te=50331648,q=Ie.foregroundColorRGB.rgba>>8&16777215,Kt=Ie.foregroundColorRGB),Pt=Ie.options.layer==="top")}),!Pt&&zt&&(it=this._coreBrowserService.isFocused?E.selectionBackgroundOpaque:E.selectionInactiveBackgroundOpaque,he=it.rgba>>8&16777215,ze=50331648,Pt=!0,E.selectionForeground&&(te=50331648,q=E.selectionForeground.rgba>>8&16777215,Kt=E.selectionForeground)),Pt&&ne.push("xterm-decoration-top"),ze){case 16777216:case 33554432:ot=E.ansi[he],ne.push(`xterm-bg-${he}`);break;case 50331648:ot=d.channels.toColor(he>>16,he>>8&255,255&he),this._addStyle(k,`background-color:#${p((he>>>0).toString(16),"0",6)}`);break;default:Ke?(ot=E.foreground,ne.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):ot=E.background}switch(it||ue.isDim()&&(it=d.color.multiplyOpacity(ot,.5)),te){case 16777216:case 33554432:ue.isBold()&&q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(q+=8),this._applyMinimumContrast(k,ot,E.ansi[q],ue,it,void 0)||ne.push(`xterm-fg-${q}`);break;case 50331648:const Ie=d.channels.toColor(q>>16&255,q>>8&255,255&q);this._applyMinimumContrast(k,ot,Ie,ue,it,Kt)||this._addStyle(k,`color:#${p(q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(k,ot,E.foreground,ue,it,Kt)||Ke&&ne.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}ne.length&&(k.className=ne.join(" "),ne.length=0),vi||Me||nt?k.textContent=Z:H++,z!==this.defaultSpacing&&(k.style.letterSpacing=`${z}px`),se.push(k),we=Je}return k&&H&&(k.textContent=Z),se}_applyMinimumContrast(g,w,f,y,T,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,r.treatGlyphAsBackgroundColor)(y.getCode()))return!1;const P=this._getContrastCache(y);let D;if(T||O||(D=P.getColor(w.rgba,f.rgba)),D===void 0){const $=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);D=d.color.ensureContrastRatio(T||w,O||f,$),P.setColor((T||w).rgba,(O||f).rgba,D??null)}return!!D&&(this._addStyle(g,`color:${D.css}`),!0)}_getContrastCache(g){return g.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(g,w){g.setAttribute("style",`${g.getAttribute("style")||""}${w};`)}_isCellInSelection(g,w){const f=this._selectionStart,y=this._selectionEnd;return!(!f||!y)&&(this._columnSelectMode?f[0]<=y[0]?g>=f[0]&&w>=f[1]&&g<y[0]&&w<=y[1]:g<f[0]&&w>=f[1]&&g>=y[0]&&w<=y[1]:w>f[1]&&w<y[1]||f[1]===y[1]&&w===f[1]&&g>=f[0]&&g<y[0]||f[1]<y[1]&&w===y[1]&&g<y[0]||f[1]<y[1]&&w===f[1]&&g>=f[0])}};function p(g,w,f){for(;g.length<f;)g=w+g;return g}a.DomRendererRowFactory=l=_([m(1,n.ICharacterJoinerService),m(2,b.IOptionsService),m(3,n.ICoreBrowserService),m(4,b.ICoreService),m(5,b.IDecorationService),m(6,n.IThemeService)],l)},2550:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(u,_){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=u.createElement("span");m.classList.add("xterm-char-measure-element");const c=u.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";const v=u.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontStyle="italic";const S=u.createElement("span");S.classList.add("xterm-char-measure-element"),S.style.fontWeight="bold",S.style.fontStyle="italic",this._measureElements=[m,c,v,S],this._container.appendChild(m),this._container.appendChild(c),this._container.appendChild(v),this._container.appendChild(S),_.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,_,m,c){u===this._font&&_===this._fontSize&&m===this._weight&&c===this._weightBold||(this._font=u,this._fontSize=_,this._weight=m,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(u,_,m){let c=0;if(!_&&!m&&u.length===1&&(c=u.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];const b=this._measure(u,0);return b>0&&(this._flat[c]=b),b}let v=u;_&&(v+="B"),m&&(v+="I");let S=this._holey.get(v);if(S===void 0){let b=0;_&&(b|=1),m&&(b|=2),S=this._measure(u,b),S>0&&this._holey.set(v,S)}return S}_measure(u,_){const m=this._measureElements[_];return m.textContent=u.repeat(32),m.offsetWidth/32}}},2223:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const _=u(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=_.isFirefox||_.isLegacyEdge?"bottom":"ideographic"},6171:(j,a)=>{function u(m){return 57508<=m&&m<=57558}function _(m){return m>=128512&&m<=128591||m>=127744&&m<=128511||m>=128640&&m<=128767||m>=9728&&m<=9983||m>=9984&&m<=10175||m>=65024&&m<=65039||m>=129280&&m<=129535||m>=127462&&m<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},a.isPowerlineGlyph=u,a.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},a.isEmoji=_,a.allowRescaling=function(m,c,v,S){return c===1&&v>Math.ceil(1.5*S)&&m!==void 0&&m>255&&!_(m)&&!u(m)&&!function(b){return 57344<=b&&b<=63743}(m)},a.treatGlyphAsBackgroundColor=function(m){return u(m)||function(c){return 9472<=c&&c<=9631}(m)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(m,c,v=0){return(m-(2*Math.round(c)-v))%(2*Math.round(c))}},6052:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class u{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(m,c,v,S=!1){if(this.selectionStart=c,this.selectionEnd=v,!c||!v||c[0]===v[0]&&c[1]===v[1])return void this.clear();const b=m.buffers.active.ydisp,d=c[1]-b,n=v[1]-b,o=Math.max(d,0),r=Math.min(n,m.rows-1);o>=m.rows||r<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=d,this.viewportEndRow=n,this.viewportCappedStartRow=o,this.viewportCappedEndRow=r,this.startCol=c[0],this.endCol=v[0])}isCellSelected(m,c,v){return!!this.hasSelection&&(v-=m.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&v>=this.viewportCappedStartRow&&c<this.endCol&&v<=this.viewportCappedEndRow:c<this.startCol&&v>=this.viewportCappedStartRow&&c>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&c>=this.startCol)}}a.createSelectionRenderModel=function(){return new u}},456:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,_=this.selectionEnd;return!(!u||!_)&&(u[1]>_[1]||u[1]===_[1]&&u[0]>_[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(j,a,u){var _=this&&this.__decorate||function(r,s,l,p){var g,w=arguments.length,f=w<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,s,l,p);else for(var y=r.length-1;y>=0;y--)(g=r[y])&&(f=(w<3?g(f):w>3?g(s,l,f):g(s,l))||f);return w>3&&f&&Object.defineProperty(s,l,f),f},m=this&&this.__param||function(r,s){return function(l,p){s(l,p,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const c=u(2585),v=u(8460),S=u(844);let b=a.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(r,s,l){super(),this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new o(this._optionsService))}catch{this._measureStrategy=this.register(new n(r,s,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())}};a.CharSizeService=b=_([m(2,c.IOptionsService)],b);class d extends S.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(s,l){s!==void 0&&s>0&&l!==void 0&&l>0&&(this._result.width=s,this._result.height=l)}}class n extends d{constructor(s,l,p){super(),this._document=s,this._parentElement=l,this._optionsService=p,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class o extends d{constructor(s){super(),this._optionsService=s,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const l=this._ctx.measureText("W");if(!("width"in l&&"fontBoundingBoxAscent"in l&&"fontBoundingBoxDescent"in l))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const s=this._ctx.measureText("W");return this._validateAndSet(s.width,s.fontBoundingBoxAscent+s.fontBoundingBoxDescent),this._result}}},4269:function(j,a,u){var _=this&&this.__decorate||function(o,r,s,l){var p,g=arguments.length,w=g<3?r:l===null?l=Object.getOwnPropertyDescriptor(r,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,r,s,l);else for(var f=o.length-1;f>=0;f--)(p=o[f])&&(w=(g<3?p(w):g>3?p(r,s,w):p(r,s))||w);return g>3&&w&&Object.defineProperty(r,s,w),w},m=this&&this.__param||function(o,r){return function(s,l){r(s,l,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const c=u(3734),v=u(643),S=u(511),b=u(2585);class d extends c.AttributeData{constructor(r,s,l){super(),this.content=0,this.combinedData="",this.fg=r.fg,this.bg=r.bg,this.combinedData=s,this._width=l}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(r){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=d;let n=a.CharacterJoinerService=class eh{constructor(r){this._bufferService=r,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(r){const s={id:this._nextCharacterJoinerId++,handler:r};return this._characterJoiners.push(s),s.id}deregister(r){for(let s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===r)return this._characterJoiners.splice(s,1),!0;return!1}getJoinedCharacters(r){if(this._characterJoiners.length===0)return[];const s=this._bufferService.buffer.lines.get(r);if(!s||s.length===0)return[];const l=[],p=s.translateToString(!0);let g=0,w=0,f=0,y=s.getFg(0),T=s.getBg(0);for(let O=0;O<s.getTrimmedLength();O++)if(s.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==T){if(O-g>1){const P=this._getJoinedRanges(p,f,w,s,g);for(let D=0;D<P.length;D++)l.push(P[D])}g=O,f=w,y=this._workCell.fg,T=this._workCell.bg}w+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const O=this._getJoinedRanges(p,f,w,s,g);for(let P=0;P<O.length;P++)l.push(O[P])}return l}_getJoinedRanges(r,s,l,p,g){const w=r.substring(s,l);let f=[];try{f=this._characterJoiners[0].handler(w)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{const T=this._characterJoiners[y].handler(w);for(let O=0;O<T.length;O++)eh._mergeRanges(f,T[O])}catch(T){console.error(T)}return this._stringRangesToCellRanges(f,p,g),f}_stringRangesToCellRanges(r,s,l){let p=0,g=!1,w=0,f=r[p];if(f){for(let y=l;y<this._bufferService.cols;y++){const T=s.getWidth(y),O=s.getString(y).length||v.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!g&&f[0]<=w&&(f[0]=y,g=!0),f[1]<=w){if(f[1]=y,f=r[++p],!f)break;f[0]<=w?(f[0]=y,g=!0):g=!1}w+=O}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(r,s){let l=!1;for(let p=0;p<r.length;p++){const g=r[p];if(l){if(s[1]<=g[0])return r[p-1][1]=s[1],r;if(s[1]<=g[1])return r[p-1][1]=Math.max(s[1],g[1]),r.splice(p,1),r;r.splice(p,1),p--}else{if(s[1]<=g[0])return r.splice(p,0,s),r;if(s[1]<=g[1])return g[0]=Math.min(s[0],g[0]),r;s[0]<g[1]&&(g[0]=Math.min(s[0],g[0]),l=!0)}}return l?r[r.length-1][1]=s[1]:r.push(s),r}};a.CharacterJoinerService=n=_([m(0,b.IBufferService)],n)},5114:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const _=u(844),m=u(8460),c=u(3656);class v extends _.Disposable{constructor(d,n,o){super(),this._textarea=d,this._window=n,this.mainDocument=o,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new S(this._window),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new m.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(r=>this._screenDprMonitor.setWindow(r))),this.register((0,m.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(d){this._window!==d&&(this._window=d,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=v;class S extends _.Disposable{constructor(d){super(),this._parentWindow=d,this._windowResizeListener=this.register(new _.MutableDisposable),this._onDprChange=this.register(new m.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,_.toDisposable)(()=>this.clearListener()))}setWindow(d){this._parentWindow=d,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)==null||d.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const _=u(844);class m extends _.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,_.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(v){return this.linkProviders.push(v),{dispose:()=>{const S=this.linkProviders.indexOf(v);S!==-1&&this.linkProviders.splice(S,1)}}}}a.LinkProviderService=m},8934:function(j,a,u){var _=this&&this.__decorate||function(b,d,n,o){var r,s=arguments.length,l=s<3?d:o===null?o=Object.getOwnPropertyDescriptor(d,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(b,d,n,o);else for(var p=b.length-1;p>=0;p--)(r=b[p])&&(l=(s<3?r(l):s>3?r(d,n,l):r(d,n))||l);return s>3&&l&&Object.defineProperty(d,n,l),l},m=this&&this.__param||function(b,d){return function(n,o){d(n,o,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const c=u(4725),v=u(9806);let S=a.MouseService=class{constructor(b,d){this._renderService=b,this._charSizeService=d}getCoords(b,d,n,o,r){return(0,v.getCoords)(window,b,d,n,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(b,d){const n=(0,v.getCoordsRelativeToElement)(window,b,d);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};a.MouseService=S=_([m(0,c.IRenderService),m(1,c.ICharSizeService)],S)},3230:function(j,a,u){var _=this&&this.__decorate||function(r,s,l,p){var g,w=arguments.length,f=w<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,s,l,p);else for(var y=r.length-1;y>=0;y--)(g=r[y])&&(f=(w<3?g(f):w>3?g(s,l,f):g(s,l))||f);return w>3&&f&&Object.defineProperty(s,l,f),f},m=this&&this.__param||function(r,s){return function(l,p){s(l,p,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const c=u(6193),v=u(4725),S=u(8460),b=u(844),d=u(7226),n=u(2585);let o=a.RenderService=class extends b.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(r,s,l,p,g,w,f,y){super(),this._rowCount=r,this._charSizeService=p,this._renderer=this.register(new b.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._observerDisposable=this.register(new b.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer((T,O)=>this._renderRows(T,O),f),this.register(this._renderDebouncer),this.register(f.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(l.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(l.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(l.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(y.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(f.window,s),this.register(f.onWindowChange(T=>this._registerIntersectionObserver(T,s)))}_registerIntersectionObserver(r,s){if("IntersectionObserver"in r){const l=new r.IntersectionObserver(p=>this._handleIntersectionChange(p[p.length-1]),{threshold:0});l.observe(s),this._observerDisposable.value=(0,b.toDisposable)(()=>l.disconnect())}}_handleIntersectionChange(r){this._isPaused=r.isIntersecting===void 0?r.intersectionRatio===0:!r.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(r,s,l=!1){this._isPaused?this._needsFullRefresh=!0:(l||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(r,s,this._rowCount))}_renderRows(r,s){this._renderer.value&&(r=Math.min(r,this._rowCount-1),s=Math.min(s,this._rowCount-1),this._renderer.value.renderRows(r,s),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:r,end:s}),this._onRender.fire({start:r,end:s}),this._isNextRenderRedrawOnly=!0)}resize(r,s){this._rowCount=s,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(r){this._renderer.value=r,this._renderer.value&&(this._renderer.value.onRequestRedraw(s=>this.refreshRows(s.start,s.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(r){return this._renderDebouncer.addRefreshCallback(r)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var r,s;this._renderer.value&&((s=(r=this._renderer.value).clearTextureAtlas)==null||s.call(r),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(r,s){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var l;return(l=this._renderer.value)==null?void 0:l.handleResize(r,s)}):this._renderer.value.handleResize(r,s),this._fullRefresh())}handleCharSizeChanged(){var r;(r=this._renderer.value)==null||r.handleCharSizeChanged()}handleBlur(){var r;(r=this._renderer.value)==null||r.handleBlur()}handleFocus(){var r;(r=this._renderer.value)==null||r.handleFocus()}handleSelectionChanged(r,s,l){var p;this._selectionState.start=r,this._selectionState.end=s,this._selectionState.columnSelectMode=l,(p=this._renderer.value)==null||p.handleSelectionChanged(r,s,l)}handleCursorMove(){var r;(r=this._renderer.value)==null||r.handleCursorMove()}clear(){var r;(r=this._renderer.value)==null||r.clear()}};a.RenderService=o=_([m(2,n.IOptionsService),m(3,v.ICharSizeService),m(4,n.IDecorationService),m(5,n.IBufferService),m(6,v.ICoreBrowserService),m(7,v.IThemeService)],o)},9312:function(j,a,u){var _=this&&this.__decorate||function(f,y,T,O){var P,D=arguments.length,$=D<3?y:O===null?O=Object.getOwnPropertyDescriptor(y,T):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(f,y,T,O);else for(var X=f.length-1;X>=0;X--)(P=f[X])&&($=(D<3?P($):D>3?P(y,T,$):P(y,T))||$);return D>3&&$&&Object.defineProperty(y,T,$),$},m=this&&this.__param||function(f,y){return function(T,O){y(T,O,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const c=u(9806),v=u(9504),S=u(456),b=u(4725),d=u(8460),n=u(844),o=u(6114),r=u(4841),s=u(511),l=u(2585),p=String.fromCharCode(160),g=new RegExp(p,"g");let w=a.SelectionService=class extends n.Disposable{constructor(f,y,T,O,P,D,$,X,ee){super(),this._element=f,this._screenElement=y,this._linkifier=T,this._bufferService=O,this._coreService=P,this._mouseService=D,this._optionsService=$,this._renderService=X,this._coreBrowserService=ee,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new s.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=se=>this._handleMouseMove(se),this._mouseUpListener=se=>this._handleMouseUp(se),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(se=>this._handleTrim(se)),this.register(this._bufferService.buffers.onBufferActivate(se=>this._handleBufferActivate(se))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,n.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const f=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!f||!y||f[0]===y[0]&&f[1]===y[1])}get selectionText(){const f=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!f||!y)return"";const T=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(f[0]===y[0])return"";const P=f[0]<y[0]?f[0]:y[0],D=f[0]<y[0]?y[0]:f[0];for(let $=f[1];$<=y[1];$++){const X=T.translateBufferLineToString($,!0,P,D);O.push(X)}}else{const P=f[1]===y[1]?y[0]:void 0;O.push(T.translateBufferLineToString(f[1],!0,f[0],P));for(let D=f[1]+1;D<=y[1]-1;D++){const $=T.lines.get(D),X=T.translateBufferLineToString(D,!0);$!=null&&$.isWrapped?O[O.length-1]+=X:O.push(X)}if(f[1]!==y[1]){const D=T.lines.get(y[1]),$=T.translateBufferLineToString(y[1],!0,0,y[0]);D&&D.isWrapped?O[O.length-1]+=$:O.push($)}}return O.map(P=>P.replace(g," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(f){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&f&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(f){const y=this._getMouseBufferCoords(f),T=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(T&&O&&y)&&this._areCoordsInSelection(y,T,O)}isCellInSelection(f,y){const T=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!T||!O)&&this._areCoordsInSelection([f,y],T,O)}_areCoordsInSelection(f,y,T){return f[1]>y[1]&&f[1]<T[1]||y[1]===T[1]&&f[1]===y[1]&&f[0]>=y[0]&&f[0]<T[0]||y[1]<T[1]&&f[1]===T[1]&&f[0]<T[0]||y[1]<T[1]&&f[1]===y[1]&&f[0]>=y[0]}_selectWordAtCursor(f,y){var P,D;const T=(D=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:D.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,r.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(f);return!!O&&(this._selectWordAt(O,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(f,y){this._model.clearSelection(),f=Math.max(f,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,f],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(f){this._model.handleTrim(f)&&this.refresh()}_getMouseBufferCoords(f){const y=this._mouseService.getCoords(f,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(f){let y=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,f,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=T?0:(y>T&&(y-=T),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(f){return o.isMac?f.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:f.shiftKey}handleMouseDown(f){if(this._mouseDownTimeStamp=f.timeStamp,(f.button!==2||!this.hasSelection)&&f.button===0){if(!this._enabled){if(!this.shouldForceSelection(f))return;f.stopPropagation()}f.preventDefault(),this._dragScrollAmount=0,this._enabled&&f.shiftKey?this._handleIncrementalClick(f):f.detail===1?this._handleSingleClick(f):f.detail===2?this._handleDoubleClick(f):f.detail===3&&this._handleTripleClick(f),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(f){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(f))}_handleSingleClick(f){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(f)?3:0,this._model.selectionStart=this._getMouseBufferCoords(f),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(f){this._selectWordAtCursor(f,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(f){const y=this._getMouseBufferCoords(f);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(f){return f.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(f){if(f.stopImmediatePropagation(),!this._model.selectionStart)return;const y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(f),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(f),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const O=T.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const f=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(f.ydisp+this._bufferService.rows,f.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=f.ydisp),this.refresh()}}_handleMouseUp(f){const y=f.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&f.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(f,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const O=(0,v.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const f=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,T=!(!f||!y||f[0]===y[0]&&f[1]===y[1]);T?f&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&f[0]===this._oldSelectionStart[0]&&f[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(f,y,T)):this._oldHasSelection&&this._fireOnSelectionChange(f,y,T)}_fireOnSelectionChange(f,y,T){this._oldSelectionStart=f,this._oldSelectionEnd=y,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(f){this.clearSelection(),this._trimListener.dispose(),this._trimListener=f.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(f,y){let T=y;for(let O=0;y>=O;O++){const P=f.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:P>1&&y!==O&&(T+=P-1)}return T}setSelection(f,y,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[f,y],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(f){this._isClickInSelection(f)||(this._selectWordAtCursor(f,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(f,y,T=!0,O=!0){if(f[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,D=P.lines.get(f[1]);if(!D)return;const $=P.translateBufferLineToString(f[1],!1);let X=this._convertViewportColToCharacterIndex(D,f[0]),ee=X;const se=f[0]-X;let Q=0,E=0,k=0,M=0;if($.charAt(X)===" "){for(;X>0&&$.charAt(X-1)===" ";)X--;for(;ee<$.length&&$.charAt(ee+1)===" ";)ee++}else{let re=f[0],le=f[0];D.getWidth(re)===0&&(Q++,re--),D.getWidth(le)===2&&(E++,le++);const fe=D.getString(le).length;for(fe>1&&(M+=fe-1,ee+=fe-1);re>0&&X>0&&!this._isCharWordSeparator(D.loadCell(re-1,this._workCell));){D.loadCell(re-1,this._workCell);const U=this._workCell.getChars().length;this._workCell.getWidth()===0?(Q++,re--):U>1&&(k+=U-1,X-=U-1),X--,re--}for(;le<D.length&&ee+1<$.length&&!this._isCharWordSeparator(D.loadCell(le+1,this._workCell));){D.loadCell(le+1,this._workCell);const U=this._workCell.getChars().length;this._workCell.getWidth()===2?(E++,le++):U>1&&(M+=U-1,ee+=U-1),ee++,le++}}ee++;let H=X+se-Q+k,Z=Math.min(this._bufferService.cols,ee-X+Q+E-k-M);if(y||$.slice(X,ee).trim()!==""){if(T&&H===0&&D.getCodePoint(0)!==32){const re=P.lines.get(f[1]-1);if(re&&D.isWrapped&&re.getCodePoint(this._bufferService.cols-1)!==32){const le=this._getWordAt([this._bufferService.cols-1,f[1]-1],!1,!0,!1);if(le){const fe=this._bufferService.cols-le.start;H-=fe,Z+=fe}}}if(O&&H+Z===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const re=P.lines.get(f[1]+1);if(re!=null&&re.isWrapped&&re.getCodePoint(0)!==32){const le=this._getWordAt([0,f[1]+1],!1,!1,!0);le&&(Z+=le.length)}}return{start:H,length:Z}}}_selectWordAt(f,y){const T=this._getWordAt(f,y);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,f[1]--;this._model.selectionStart=[T.start,f[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(f){const y=this._getWordAt(f,!0);if(y){let T=f[1];for(;y.start<0;)y.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,T]}}_isCharWordSeparator(f){return f.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(f.getChars())>=0}_selectLineAt(f){const y=this._bufferService.buffer.getWrappedRangeForLine(f),T={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,r.getRangeLength)(T,this._bufferService.cols)}};a.SelectionService=w=_([m(3,l.IBufferService),m(4,l.ICoreService),m(5,b.IMouseService),m(6,l.IOptionsService),m(7,b.IRenderService),m(8,b.ICoreBrowserService)],w)},4725:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const _=u(8343);a.ICharSizeService=(0,_.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),a.IMouseService=(0,_.createDecorator)("MouseService"),a.IRenderService=(0,_.createDecorator)("RenderService"),a.ISelectionService=(0,_.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,_.createDecorator)("ThemeService"),a.ILinkProviderService=(0,_.createDecorator)("LinkProviderService")},6731:function(j,a,u){var _=this&&this.__decorate||function(w,f,y,T){var O,P=arguments.length,D=P<3?f:T===null?T=Object.getOwnPropertyDescriptor(f,y):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(w,f,y,T);else for(var $=w.length-1;$>=0;$--)(O=w[$])&&(D=(P<3?O(D):P>3?O(f,y,D):O(f,y))||D);return P>3&&D&&Object.defineProperty(f,y,D),D},m=this&&this.__param||function(w,f){return function(y,T){f(y,T,w)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const c=u(7239),v=u(8055),S=u(8460),b=u(844),d=u(2585),n=v.css.toColor("#ffffff"),o=v.css.toColor("#000000"),r=v.css.toColor("#ffffff"),s=v.css.toColor("#000000"),l={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],f=[0,95,135,175,215,255];for(let y=0;y<216;y++){const T=f[y/36%6|0],O=f[y/6%6|0],P=f[y%6];w.push({css:v.channels.toCss(T,O,P),rgba:v.channels.toRgba(T,O,P)})}for(let y=0;y<24;y++){const T=8+10*y;w.push({css:v.channels.toCss(T,T,T),rgba:v.channels.toRgba(T,T,T)})}return w})());let p=a.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:n,background:o,cursor:r,cursorAccent:s,selectionForeground:void 0,selectionBackgroundTransparent:l,selectionBackgroundOpaque:v.color.blend(o,l),selectionInactiveBackgroundTransparent:l,selectionInactiveBackgroundOpaque:v.color.blend(o,l),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){const f=this._colors;if(f.foreground=g(w.foreground,n),f.background=g(w.background,o),f.cursor=g(w.cursor,r),f.cursorAccent=g(w.cursorAccent,s),f.selectionBackgroundTransparent=g(w.selectionBackground,l),f.selectionBackgroundOpaque=v.color.blend(f.background,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundTransparent=g(w.selectionInactiveBackground,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundOpaque=v.color.blend(f.background,f.selectionInactiveBackgroundTransparent),f.selectionForeground=w.selectionForeground?g(w.selectionForeground,v.NULL_COLOR):void 0,f.selectionForeground===v.NULL_COLOR&&(f.selectionForeground=void 0),v.color.isOpaque(f.selectionBackgroundTransparent)&&(f.selectionBackgroundTransparent=v.color.opacity(f.selectionBackgroundTransparent,.3)),v.color.isOpaque(f.selectionInactiveBackgroundTransparent)&&(f.selectionInactiveBackgroundTransparent=v.color.opacity(f.selectionInactiveBackgroundTransparent,.3)),f.ansi=a.DEFAULT_ANSI_COLORS.slice(),f.ansi[0]=g(w.black,a.DEFAULT_ANSI_COLORS[0]),f.ansi[1]=g(w.red,a.DEFAULT_ANSI_COLORS[1]),f.ansi[2]=g(w.green,a.DEFAULT_ANSI_COLORS[2]),f.ansi[3]=g(w.yellow,a.DEFAULT_ANSI_COLORS[3]),f.ansi[4]=g(w.blue,a.DEFAULT_ANSI_COLORS[4]),f.ansi[5]=g(w.magenta,a.DEFAULT_ANSI_COLORS[5]),f.ansi[6]=g(w.cyan,a.DEFAULT_ANSI_COLORS[6]),f.ansi[7]=g(w.white,a.DEFAULT_ANSI_COLORS[7]),f.ansi[8]=g(w.brightBlack,a.DEFAULT_ANSI_COLORS[8]),f.ansi[9]=g(w.brightRed,a.DEFAULT_ANSI_COLORS[9]),f.ansi[10]=g(w.brightGreen,a.DEFAULT_ANSI_COLORS[10]),f.ansi[11]=g(w.brightYellow,a.DEFAULT_ANSI_COLORS[11]),f.ansi[12]=g(w.brightBlue,a.DEFAULT_ANSI_COLORS[12]),f.ansi[13]=g(w.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),f.ansi[14]=g(w.brightCyan,a.DEFAULT_ANSI_COLORS[14]),f.ansi[15]=g(w.brightWhite,a.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const y=Math.min(f.ansi.length-16,w.extendedAnsi.length);for(let T=0;T<y;T++)f.ansi[T+16]=g(w.extendedAnsi[T],a.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let f=0;f<this._restoreColors.ansi.length;++f)this._colors.ansi[f]=this._restoreColors.ansi[f]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(w,f){if(w!==void 0)try{return v.css.toColor(w)}catch{}return f}a.ThemeService=p=_([m(0,d.IOptionsService)],p)},6349:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const _=u(8460),m=u(844);class c extends m.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new _.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new _.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new _.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const b=new Array(S);for(let d=0;d<Math.min(S,this.length);d++)b[d]=this._array[this._getCyclicIndex(d)];this._array=b,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let b=this._length;b<S;b++)this._array[b]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,b){this._array[this._getCyclicIndex(S)]=b}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,b,...d){if(b){for(let n=S;n<this._length-b;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+b)];this._length-=b,this.onDeleteEmitter.fire({index:S,amount:b})}for(let n=this._length-1;n>=S;n--)this._array[this._getCyclicIndex(n+d.length)]=this._array[this._getCyclicIndex(n)];for(let n=0;n<d.length;n++)this._array[this._getCyclicIndex(S+n)]=d[n];if(d.length&&this.onInsertEmitter.fire({index:S,amount:d.length}),this._length+d.length>this._maxLength){const n=this._length+d.length-this._maxLength;this._startIndex+=n,this._length=this._maxLength,this.onTrimEmitter.fire(n)}else this._length+=d.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,b,d){if(!(b<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let o=b-1;o>=0;o--)this.set(S+o+d,this.get(S+o));const n=S+b+d-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let n=0;n<b;n++)this.set(S+n+d,this.get(S+n))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}a.CircularList=c},1439:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function u(_,m=5){if(typeof _!="object")return _;const c=Array.isArray(_)?[]:{};for(const v in _)c[v]=m<=1?_[v]:_[v]&&u(_[v],m-1);return c}},8055:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let u=0,_=0,m=0,c=0;var v,S,b,d,n;function o(s){const l=s.toString(16);return l.length<2?"0"+l:l}function r(s,l){return s<l?(l+.05)/(s+.05):(s+.05)/(l+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(s){s.toCss=function(l,p,g,w){return w!==void 0?`#${o(l)}${o(p)}${o(g)}${o(w)}`:`#${o(l)}${o(p)}${o(g)}`},s.toRgba=function(l,p,g,w=255){return(l<<24|p<<16|g<<8|w)>>>0},s.toColor=function(l,p,g,w){return{css:s.toCss(l,p,g,w),rgba:s.toRgba(l,p,g,w)}}}(v||(a.channels=v={})),function(s){function l(p,g){return c=Math.round(255*g),[u,_,m]=n.toChannels(p.rgba),{css:v.toCss(u,_,m,c),rgba:v.toRgba(u,_,m,c)}}s.blend=function(p,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};const w=g.rgba>>24&255,f=g.rgba>>16&255,y=g.rgba>>8&255,T=p.rgba>>24&255,O=p.rgba>>16&255,P=p.rgba>>8&255;return u=T+Math.round((w-T)*c),_=O+Math.round((f-O)*c),m=P+Math.round((y-P)*c),{css:v.toCss(u,_,m),rgba:v.toRgba(u,_,m)}},s.isOpaque=function(p){return(255&p.rgba)==255},s.ensureContrastRatio=function(p,g,w){const f=n.ensureContrastRatio(p.rgba,g.rgba,w);if(f)return v.toColor(f>>24&255,f>>16&255,f>>8&255)},s.opaque=function(p){const g=(255|p.rgba)>>>0;return[u,_,m]=n.toChannels(g),{css:v.toCss(u,_,m),rgba:g}},s.opacity=l,s.multiplyOpacity=function(p,g){return c=255&p.rgba,l(p,c*g/255)},s.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}}(S||(a.color=S={})),function(s){let l,p;try{const g=document.createElement("canvas");g.width=1,g.height=1;const w=g.getContext("2d",{willReadFrequently:!0});w&&(l=w,l.globalCompositeOperation="copy",p=l.createLinearGradient(0,0,1,1))}catch{}s.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),_=parseInt(g.slice(2,3).repeat(2),16),m=parseInt(g.slice(3,4).repeat(2),16),v.toColor(u,_,m);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),_=parseInt(g.slice(2,3).repeat(2),16),m=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),v.toColor(u,_,m,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),_=parseInt(w[2]),m=parseInt(w[3]),c=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),v.toColor(u,_,m,c);if(!l||!p)throw new Error("css.toColor: Unsupported css format");if(l.fillStyle=p,l.fillStyle=g,typeof l.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(l.fillRect(0,0,1,1),[u,_,m,c]=l.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(u,_,m,c),css:g}}}(b||(a.css=b={})),function(s){function l(p,g,w){const f=p/255,y=g/255,T=w/255;return .2126*(f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}s.relativeLuminance=function(p){return l(p>>16&255,p>>8&255,255&p)},s.relativeLuminance2=l}(d||(a.rgb=d={})),function(s){function l(g,w,f){const y=g>>24&255,T=g>>16&255,O=g>>8&255;let P=w>>24&255,D=w>>16&255,$=w>>8&255,X=r(d.relativeLuminance2(P,D,$),d.relativeLuminance2(y,T,O));for(;X<f&&(P>0||D>0||$>0);)P-=Math.max(0,Math.ceil(.1*P)),D-=Math.max(0,Math.ceil(.1*D)),$-=Math.max(0,Math.ceil(.1*$)),X=r(d.relativeLuminance2(P,D,$),d.relativeLuminance2(y,T,O));return(P<<24|D<<16|$<<8|255)>>>0}function p(g,w,f){const y=g>>24&255,T=g>>16&255,O=g>>8&255;let P=w>>24&255,D=w>>16&255,$=w>>8&255,X=r(d.relativeLuminance2(P,D,$),d.relativeLuminance2(y,T,O));for(;X<f&&(P<255||D<255||$<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),D=Math.min(255,D+Math.ceil(.1*(255-D))),$=Math.min(255,$+Math.ceil(.1*(255-$))),X=r(d.relativeLuminance2(P,D,$),d.relativeLuminance2(y,T,O));return(P<<24|D<<16|$<<8|255)>>>0}s.blend=function(g,w){if(c=(255&w)/255,c===1)return w;const f=w>>24&255,y=w>>16&255,T=w>>8&255,O=g>>24&255,P=g>>16&255,D=g>>8&255;return u=O+Math.round((f-O)*c),_=P+Math.round((y-P)*c),m=D+Math.round((T-D)*c),v.toRgba(u,_,m)},s.ensureContrastRatio=function(g,w,f){const y=d.relativeLuminance(g>>8),T=d.relativeLuminance(w>>8);if(r(y,T)<f){if(T<y){const D=l(g,w,f),$=r(y,d.relativeLuminance(D>>8));if($<f){const X=p(g,w,f);return $>r(y,d.relativeLuminance(X>>8))?D:X}return D}const O=p(g,w,f),P=r(y,d.relativeLuminance(O>>8));if(P<f){const D=l(g,w,f);return P>r(y,d.relativeLuminance(D>>8))?O:D}return O}},s.reduceLuminance=l,s.increaseLuminance=p,s.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]}}(n||(a.rgba=n={})),a.toPaddedHex=o,a.contrastRatio=r},8969:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const _=u(844),m=u(2585),c=u(4348),v=u(7866),S=u(744),b=u(7302),d=u(6975),n=u(8460),o=u(1753),r=u(1480),s=u(7994),l=u(9282),p=u(5435),g=u(5981),w=u(2660);let f=!1;class y extends _.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new n.EventEmitter),this._onScroll.event(O=>{var P;(P=this._onScrollApi)==null||P.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const P in O)this.optionsService.options[P]=O[P]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new _.MutableDisposable),this._onBinary=this.register(new n.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new n.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new n.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new n.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new n.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new b.OptionsService(O)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(r.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(s.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,n.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,n.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,n.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,n.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new g.WriteBuffer((P,D)=>this._inputHandler.parse(P,D))),this.register((0,n.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,P){this._writeBuffer.write(O,P)}writeSync(O,P){this._logService.logLevel<=m.LogLevelEnum.WARN&&!f&&(this._logService.warn("writeSync is unreliable and will be removed soon."),f=!0),this._writeBuffer.writeSync(O,P)}input(O,P=!0){this.coreService.triggerDataEvent(O,P)}resize(O,P){isNaN(O)||isNaN(P)||(O=Math.max(O,S.MINIMUM_COLS),P=Math.max(P,S.MINIMUM_ROWS),this._bufferService.resize(O,P))}scroll(O,P=!1){this._bufferService.scroll(O,P)}scrollLines(O,P,D){this._bufferService.scrollLines(O,P,D)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const P=O-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(O,P){return this._inputHandler.registerEscHandler(O,P)}registerDcsHandler(O,P){return this._inputHandler.registerDcsHandler(O,P)}registerCsiHandler(O,P){return this._inputHandler.registerCsiHandler(O,P)}registerOscHandler(O,P){return this._inputHandler.registerOscHandler(O,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?O=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(l.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,l.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,_.toDisposable)(()=>{for(const P of O)P.dispose()})}}}a.CoreTerminal=y},8460:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let _=0;_<this._listeners.length;_++)if(this._listeners[_]===u)return void this._listeners.splice(_,1)}}})),this._event}fire(u,_){const m=[];for(let c=0;c<this._listeners.length;c++)m.push(this._listeners[c]);for(let c=0;c<m.length;c++)m[c].call(void 0,u,_)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(u,_){return u(m=>_.fire(m))},a.runAndSubscribe=function(u,_){return _(void 0),u(m=>_(m))}},5435:function(j,a,u){var _=this&&this.__decorate||function(Q,E,k,M){var H,Z=arguments.length,re=Z<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,k):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(Q,E,k,M);else for(var le=Q.length-1;le>=0;le--)(H=Q[le])&&(re=(Z<3?H(re):Z>3?H(E,k,re):H(E,k))||re);return Z>3&&re&&Object.defineProperty(E,k,re),re},m=this&&this.__param||function(Q,E){return function(k,M){E(k,M,Q)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const c=u(2584),v=u(7116),S=u(2015),b=u(844),d=u(482),n=u(8437),o=u(8460),r=u(643),s=u(511),l=u(3734),p=u(2585),g=u(1480),w=u(6242),f=u(6351),y=u(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function P(Q,E){if(Q>24)return E.setWinLines||!1;switch(Q){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var D;(function(Q){Q[Q.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Q[Q.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(a.WindowsOptionsReportType=D={}));let $=0;class X extends b.Disposable{getAttrData(){return this._curAttrData}constructor(E,k,M,H,Z,re,le,fe,U=new S.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=k,this._coreService=M,this._logService=H,this._optionsService=Z,this._oscLinkService=re,this._coreMouseService=le,this._unicodeService=fe,this._parser=U,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new s.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ee(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(R=>this._activeBuffer=R.activeBuffer)),this._parser.setCsiHandlerFallback((R,J)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(R),params:J.toArray()})}),this._parser.setEscHandlerFallback(R=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(R)})}),this._parser.setExecuteHandlerFallback(R=>{this._logService.debug("Unknown EXECUTE code: ",{code:R})}),this._parser.setOscHandlerFallback((R,J,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:R,action:J,data:z})}),this._parser.setDcsHandlerFallback((R,J,z)=>{J==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(R),action:J,payload:z})}),this._parser.setPrintHandler((R,J,z)=>this.print(R,J,z)),this._parser.registerCsiHandler({final:"@"},R=>this.insertChars(R)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},R=>this.scrollLeft(R)),this._parser.registerCsiHandler({final:"A"},R=>this.cursorUp(R)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},R=>this.scrollRight(R)),this._parser.registerCsiHandler({final:"B"},R=>this.cursorDown(R)),this._parser.registerCsiHandler({final:"C"},R=>this.cursorForward(R)),this._parser.registerCsiHandler({final:"D"},R=>this.cursorBackward(R)),this._parser.registerCsiHandler({final:"E"},R=>this.cursorNextLine(R)),this._parser.registerCsiHandler({final:"F"},R=>this.cursorPrecedingLine(R)),this._parser.registerCsiHandler({final:"G"},R=>this.cursorCharAbsolute(R)),this._parser.registerCsiHandler({final:"H"},R=>this.cursorPosition(R)),this._parser.registerCsiHandler({final:"I"},R=>this.cursorForwardTab(R)),this._parser.registerCsiHandler({final:"J"},R=>this.eraseInDisplay(R,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},R=>this.eraseInDisplay(R,!0)),this._parser.registerCsiHandler({final:"K"},R=>this.eraseInLine(R,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},R=>this.eraseInLine(R,!0)),this._parser.registerCsiHandler({final:"L"},R=>this.insertLines(R)),this._parser.registerCsiHandler({final:"M"},R=>this.deleteLines(R)),this._parser.registerCsiHandler({final:"P"},R=>this.deleteChars(R)),this._parser.registerCsiHandler({final:"S"},R=>this.scrollUp(R)),this._parser.registerCsiHandler({final:"T"},R=>this.scrollDown(R)),this._parser.registerCsiHandler({final:"X"},R=>this.eraseChars(R)),this._parser.registerCsiHandler({final:"Z"},R=>this.cursorBackwardTab(R)),this._parser.registerCsiHandler({final:"`"},R=>this.charPosAbsolute(R)),this._parser.registerCsiHandler({final:"a"},R=>this.hPositionRelative(R)),this._parser.registerCsiHandler({final:"b"},R=>this.repeatPrecedingCharacter(R)),this._parser.registerCsiHandler({final:"c"},R=>this.sendDeviceAttributesPrimary(R)),this._parser.registerCsiHandler({prefix:">",final:"c"},R=>this.sendDeviceAttributesSecondary(R)),this._parser.registerCsiHandler({final:"d"},R=>this.linePosAbsolute(R)),this._parser.registerCsiHandler({final:"e"},R=>this.vPositionRelative(R)),this._parser.registerCsiHandler({final:"f"},R=>this.hVPosition(R)),this._parser.registerCsiHandler({final:"g"},R=>this.tabClear(R)),this._parser.registerCsiHandler({final:"h"},R=>this.setMode(R)),this._parser.registerCsiHandler({prefix:"?",final:"h"},R=>this.setModePrivate(R)),this._parser.registerCsiHandler({final:"l"},R=>this.resetMode(R)),this._parser.registerCsiHandler({prefix:"?",final:"l"},R=>this.resetModePrivate(R)),this._parser.registerCsiHandler({final:"m"},R=>this.charAttributes(R)),this._parser.registerCsiHandler({final:"n"},R=>this.deviceStatus(R)),this._parser.registerCsiHandler({prefix:"?",final:"n"},R=>this.deviceStatusPrivate(R)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},R=>this.softReset(R)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},R=>this.setCursorStyle(R)),this._parser.registerCsiHandler({final:"r"},R=>this.setScrollRegion(R)),this._parser.registerCsiHandler({final:"s"},R=>this.saveCursor(R)),this._parser.registerCsiHandler({final:"t"},R=>this.windowOptions(R)),this._parser.registerCsiHandler({final:"u"},R=>this.restoreCursor(R)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},R=>this.insertColumns(R)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},R=>this.deleteColumns(R)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},R=>this.selectProtected(R)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},R=>this.requestMode(R,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},R=>this.requestMode(R,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(R=>(this.setTitle(R),this.setIconName(R),!0))),this._parser.registerOscHandler(1,new w.OscHandler(R=>this.setIconName(R))),this._parser.registerOscHandler(2,new w.OscHandler(R=>this.setTitle(R))),this._parser.registerOscHandler(4,new w.OscHandler(R=>this.setOrReportIndexedColor(R))),this._parser.registerOscHandler(8,new w.OscHandler(R=>this.setHyperlink(R))),this._parser.registerOscHandler(10,new w.OscHandler(R=>this.setOrReportFgColor(R))),this._parser.registerOscHandler(11,new w.OscHandler(R=>this.setOrReportBgColor(R))),this._parser.registerOscHandler(12,new w.OscHandler(R=>this.setOrReportCursorColor(R))),this._parser.registerOscHandler(104,new w.OscHandler(R=>this.restoreIndexedColor(R))),this._parser.registerOscHandler(110,new w.OscHandler(R=>this.restoreFgColor(R))),this._parser.registerOscHandler(111,new w.OscHandler(R=>this.restoreBgColor(R))),this._parser.registerOscHandler(112,new w.OscHandler(R=>this.restoreCursorColor(R))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const R in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:R},()=>this.selectCharset("("+R)),this._parser.registerEscHandler({intermediates:")",final:R},()=>this.selectCharset(")"+R)),this._parser.registerEscHandler({intermediates:"*",final:R},()=>this.selectCharset("*"+R)),this._parser.registerEscHandler({intermediates:"+",final:R},()=>this.selectCharset("+"+R)),this._parser.registerEscHandler({intermediates:"-",final:R},()=>this.selectCharset("-"+R)),this._parser.registerEscHandler({intermediates:".",final:R},()=>this.selectCharset("."+R)),this._parser.registerEscHandler({intermediates:"/",final:R},()=>this.selectCharset("/"+R));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(R=>(this._logService.error("Parsing error: ",R),R)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new f.DcsHandler((R,J)=>this.requestStatusString(R,J)))}_preserveStack(E,k,M,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=M,this._parseStack.position=H}_logSlowResolvingAsync(E){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([E,new Promise((k,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(k=>{if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,k){let M,H=this._activeBuffer.x,Z=this._activeBuffer.y,re=0;const le=this._parseStack.paused;if(le){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(M),M;H=this._parseStack.cursorStartX,Z=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>O&&(re=this._parseStack.position+O)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,R=>String.fromCharCode(R)).join("")}"`),typeof E=="string"?E.split("").map(R=>R.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(E.length,O))),le||this._dirtyRowTracker.clearRange(),E.length>O)for(let R=re;R<E.length;R+=O){const J=R+O<E.length?R+O:E.length,z=typeof E=="string"?this._stringDecoder.decode(E.substring(R,J),this._parseBuffer):this._utf8Decoder.decode(E.subarray(R,J),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,z))return this._preserveStack(H,Z,z,R),this._logSlowResolvingAsync(M),M}else if(!le){const R=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,R))return this._preserveStack(H,Z,R,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===H&&this._activeBuffer.y===Z||this._onCursorMove.fire();const fe=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),U=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);U<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(U,this._bufferService.rows-1),Math.min(fe,this._bufferService.rows-1))}print(E,k,M){let H,Z;const re=this._charsetService.charset,le=this._optionsService.rawOptions.screenReaderMode,fe=this._bufferService.cols,U=this._coreService.decPrivateModes.wraparound,R=this._coreService.modes.insertMode,J=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-k>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodepoint(this._activeBuffer.x-1,0,1,J);let ne=this._parser.precedingJoinState;for(let ie=k;ie<M;++ie){if(H=E[ie],H<127&&re){const Je=re[String.fromCharCode(H)];Je&&(H=Je.charCodeAt(0))}const we=this._unicodeService.charProperties(H,ne);Z=g.UnicodeService.extractWidth(we);const Ee=g.UnicodeService.extractShouldJoin(we),Me=Ee?g.UnicodeService.extractWidth(ne):0;if(ne=we,le&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+Z-Me>fe){if(U){const Je=z;let ue=this._activeBuffer.x-Me;for(this._activeBuffer.x=Me,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Me>0&&z instanceof n.BufferLine&&z.copyCellsFrom(Je,ue,0,Me,!1);ue<fe;)Je.setCellFromCodepoint(ue++,0,1,J)}else if(this._activeBuffer.x=fe-1,Z===2)continue}if(Ee&&this._activeBuffer.x){const Je=z.getWidth(this._activeBuffer.x-1)?1:2;z.addCodepointToCell(this._activeBuffer.x-Je,H,Z);for(let ue=Z-Me;--ue>=0;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}else if(R&&(z.insertCells(this._activeBuffer.x,Z-Me,this._activeBuffer.getNullCell(J)),z.getWidth(fe-1)===2&&z.setCellFromCodepoint(fe-1,r.NULL_CELL_CODE,r.NULL_CELL_WIDTH,J)),z.setCellFromCodepoint(this._activeBuffer.x++,H,Z,J),Z>0)for(;--Z;)z.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}this._parser.precedingJoinState=ne,this._activeBuffer.x<fe&&M-k>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodepoint(this._activeBuffer.x,0,1,J),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,k){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,k):this._parser.registerCsiHandler(E,M=>!P(M.params[0],this._optionsService.rawOptions.windowOptions)||k(M))}registerDcsHandler(E,k){return this._parser.registerDcsHandler(E,new f.DcsHandler(k))}registerEscHandler(E,k){return this._parser.registerEscHandler(E,k)}registerOscHandler(E,k){return this._parser.registerOscHandler(E,new w.OscHandler(k))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,k){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=E,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+k)}cursorUp(E){const k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const k=E.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=E.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=E.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const k=E.params[0];return k===1&&(this._curAttrData.bg|=536870912),k!==2&&k!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,k,M,H=!1,Z=!1){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);re.replaceCells(k,M,this._activeBuffer.getNullCell(this._eraseAttrData()),Z),H&&(re.isWrapped=!1)}_resetBufferLine(E,k=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),k),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),M.isWrapped=!1)}eraseInDisplay(E,k=!1){let M;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);M<this._bufferService.rows;M++)this._resetBufferLine(M,k);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,k),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,k);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,k);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(E,k=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,k);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,k)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let k=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Z=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;k--;)this._activeBuffer.lines.splice(Z-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let k=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;k--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let k=E.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let k=E.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(n.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);H.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){const k=this._parser.precedingJoinState;if(!k)return!0;const M=E.params[0]||1,H=g.UnicodeService.extractWidth(k),Z=this._activeBuffer.x-H,re=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(Z),le=new Uint32Array(re.length*M);let fe=0;for(let R=0;R<re.length;){const J=re.codePointAt(R)||0;le[fe++]=J,R+=J>65535?2:1}let U=fe;for(let R=1;R<M;++R)le.copyWithin(U,0,fe),U+=fe;return this.print(le,0,U),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let k=0;k<E.length;k++)switch(E.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,k){const M=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:Z}=this._coreMouseService,re=this._coreService,{buffers:le,cols:fe}=this._bufferService,{active:U,alt:R}=le,J=this._optionsService.rawOptions,z=Ee=>Ee?1:2,ne=E.params[0];return ie=ne,we=k?ne===2?4:ne===4?z(re.modes.insertMode):ne===12?3:ne===20?z(J.convertEol):0:ne===1?z(M.applicationCursorKeys):ne===3?J.windowOptions.setWinLines?fe===80?2:fe===132?1:0:0:ne===6?z(M.origin):ne===7?z(M.wraparound):ne===8?3:ne===9?z(H==="X10"):ne===12?z(J.cursorBlink):ne===25?z(!re.isCursorHidden):ne===45?z(M.reverseWraparound):ne===66?z(M.applicationKeypad):ne===67?4:ne===1e3?z(H==="VT200"):ne===1002?z(H==="DRAG"):ne===1003?z(H==="ANY"):ne===1004?z(M.sendFocus):ne===1005?4:ne===1006?z(Z==="SGR"):ne===1015?4:ne===1016?z(Z==="SGR_PIXELS"):ne===1048?1:ne===47||ne===1047||ne===1049?z(U===R):ne===2004?z(M.bracketedPasteMode):0,re.triggerDataEvent(`${c.C0.ESC}[${k?"":"?"}${ie};${we}$y`),!0;var ie,we}_updateAttrColor(E,k,M,H,Z){return k===2?(E|=50331648,E&=-16777216,E|=l.AttributeData.fromColorRGB([M,H,Z])):k===5&&(E&=-50331904,E|=33554432|255&M),E}_extractColor(E,k,M){const H=[0,0,-1,0,0,0];let Z=0,re=0;do{if(H[re+Z]=E.params[k+re],E.hasSubParams(k+re)){const le=E.getSubParams(k+re);let fe=0;do H[1]===5&&(Z=1),H[re+fe+1+Z]=le[fe];while(++fe<le.length&&fe+re+1+Z<H.length);break}if(H[1]===5&&re+Z>=2||H[1]===2&&re+Z>=5)break;H[1]&&(Z=1)}while(++re+k<E.length&&re+Z<H.length);for(let le=2;le<H.length;++le)H[le]===-1&&(H[le]=0);switch(H[0]){case 38:M.fg=this._updateAttrColor(M.fg,H[1],H[3],H[4],H[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,H[1],H[3],H[4],H[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,H[1],H[3],H[4],H[5])}return re}_processUnderline(E,k){k.extended=k.extended.clone(),(!~E||E>5)&&(E=1),k.extended.underlineStyle=E,k.fg|=268435456,E===0&&(k.fg&=-268435457),k.updateExtended()}_processSGR0(E){E.fg=n.DEFAULT_ATTR_DATA.fg,E.bg=n.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const k=E.length;let M;const H=this._curAttrData;for(let Z=0;Z<k;Z++)M=E.params[Z],M>=30&&M<=37?(H.fg&=-50331904,H.fg|=16777216|M-30):M>=40&&M<=47?(H.bg&=-50331904,H.bg|=16777216|M-40):M>=90&&M<=97?(H.fg&=-50331904,H.fg|=16777224|M-90):M>=100&&M<=107?(H.bg&=-50331904,H.bg|=16777224|M-100):M===0?this._processSGR0(H):M===1?H.fg|=134217728:M===3?H.bg|=67108864:M===4?(H.fg|=268435456,this._processUnderline(E.hasSubParams(Z)?E.getSubParams(Z)[0]:1,H)):M===5?H.fg|=536870912:M===7?H.fg|=67108864:M===8?H.fg|=1073741824:M===9?H.fg|=2147483648:M===2?H.bg|=134217728:M===21?this._processUnderline(2,H):M===22?(H.fg&=-134217729,H.bg&=-134217729):M===23?H.bg&=-67108865:M===24?(H.fg&=-268435457,this._processUnderline(0,H)):M===25?H.fg&=-536870913:M===27?H.fg&=-67108865:M===28?H.fg&=-1073741825:M===29?H.fg&=2147483647:M===39?(H.fg&=-67108864,H.fg|=16777215&n.DEFAULT_ATTR_DATA.fg):M===49?(H.bg&=-67108864,H.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?Z+=this._extractColor(E,Z,H):M===53?H.bg|=1073741824:M===55?H.bg&=-1073741825:M===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):M===100?(H.fg&=-67108864,H.fg|=16777215&n.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&n.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:const k=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${k};${M}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const k=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${k};${M}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const k=E.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=k%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(E){const k=E.params[0]||1;let M;return(E.length<2||(M=E.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>k&&(this._activeBuffer.scrollTop=k-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(E){if(!P(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const k=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const k=[],M=E.split(";");for(;M.length>1;){const H=M.shift(),Z=M.shift();if(/^\d+$/.exec(H)){const re=parseInt(H);if(se(re))if(Z==="?")k.push({type:0,index:re});else{const le=(0,y.parseColor)(Z);le&&k.push({type:1,index:re,color:le})}}}return k.length&&this._onColor.fire(k),!0}setHyperlink(E){const k=E.split(";");return!(k.length<2)&&(k[1]?this._createHyperlink(k[0],k[1]):!k[0]&&this._finishHyperlink())}_createHyperlink(E,k){this._getCurrentLinkId()&&this._finishHyperlink();const M=E.split(":");let H;const Z=M.findIndex(re=>re.startsWith("id="));return Z!==-1&&(H=M[Z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:k}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,k){const M=E.split(";");for(let H=0;H<M.length&&!(k>=this._specialColors.length);++H,++k)if(M[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[k]}]);else{const Z=(0,y.parseColor)(M[H]);Z&&this._onColor.fire([{type:1,index:this._specialColors[k],color:Z}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const k=[],M=E.split(";");for(let H=0;H<M.length;++H)if(/^\d+$/.exec(M[H])){const Z=parseInt(M[H]);se(Z)&&k.push({type:2,index:Z})}return k.length&&this._onColor.fire(k),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(T[E[0]],v.CHARSETS[E[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=n.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=n.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new s.CellData;E.content=4194304|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let k=0;k<this._bufferService.rows;++k){const M=this._activeBuffer.ybase+this._activeBuffer.y+k,H=this._activeBuffer.lines.get(M);H&&(H.fill(E),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,k){const M=this._bufferService.buffer,H=this._optionsService.rawOptions;return(Z=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${Z}${c.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,k){this._dirtyRowTracker.markRangeDirty(E,k)}}a.InputHandler=X;let ee=class{constructor(Q){this._bufferService=Q,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Q){Q<this.start?this.start=Q:Q>this.end&&(this.end=Q)}markRangeDirty(Q,E){Q>E&&($=Q,Q=E,E=$),Q<this.start&&(this.start=Q),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function se(Q){return 0<=Q&&Q<256}ee=_([m(0,p.IBufferService)],ee)},844:(j,a)=>{function u(_){for(const m of _)m.dispose();_.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const _ of this._disposables)_.dispose();this._disposables.length=0}register(_){return this._disposables.push(_),_}unregister(_){const m=this._disposables.indexOf(_);m!==-1&&this._disposables.splice(m,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(_){var m;this._isDisposed||_===this._value||((m=this._value)==null||m.dispose(),this._value=_)}clear(){this.value=void 0}dispose(){var _;this._isDisposed=!0,(_=this._value)==null||_.dispose(),this._value=void 0}},a.toDisposable=function(_){return{dispose:_}},a.disposeArray=u,a.getDisposeArrayDisposable=function(_){return{dispose:()=>u(_)}}},1505:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(m,c,v){this._data[m]||(this._data[m]={}),this._data[m][c]=v}get(m,c){return this._data[m]?this._data[m][c]:void 0}clear(){this._data={}}}a.TwoKeyMap=u,a.FourKeyMap=class{constructor(){this._data=new u}set(_,m,c,v,S){this._data.get(_,m)||this._data.set(_,m,new u),this._data.get(_,m).set(c,v,S)}get(_,m,c,v){var S;return(S=this._data.get(_,m))==null?void 0:S.get(c,v)}clear(){this._data.clear()}}},6114:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof process<"u"&&"title"in process;const u=a.isNode?"node":navigator.userAgent,_=a.isNode?"node":navigator.platform;a.isFirefox=u.includes("Firefox"),a.isLegacyEdge=u.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(u),a.getSafariVersion=function(){if(!a.isSafari)return 0;const m=u.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),a.isIpad=_==="iPad",a.isIphone=_==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),a.isLinux=_.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(u)},6106:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let u=0;a.SortedList=class{constructor(_){this._getKey=_,this._array=[]}clear(){this._array.length=0}insert(_){this._array.length!==0?(u=this._search(this._getKey(_)),this._array.splice(u,0,_)):this._array.push(_)}delete(_){if(this._array.length===0)return!1;const m=this._getKey(_);if(m===void 0||(u=this._search(m),u===-1)||this._getKey(this._array[u])!==m)return!1;do if(this._array[u]===_)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===m);return!1}*getKeyIterator(_){if(this._array.length!==0&&(u=this._search(_),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===_))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===_)}forEachByKey(_,m){if(this._array.length!==0&&(u=this._search(_),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===_))do m(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===_)}values(){return[...this._array].values()}_search(_){let m=0,c=this._array.length-1;for(;c>=m;){let v=m+c>>1;const S=this._getKey(this._array[v]);if(S>_)c=v-1;else{if(!(S<_)){for(;v>0&&this._getKey(this._array[v-1])===_;)v--;return v}m=v+1}}return m}}},7226:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const _=u(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let b=0,d=0,n=S.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),d=Math.max(b,d),o=S.timeRemaining(),1.5*d>o)return n-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-b))}ms`),void this._start();n=o}this.clear()}}class c extends m{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const b=Date.now()+S;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}a.PriorityTaskQueue=c,a.IdleTaskQueue=!_.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:c,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const _=u(643);a.updateWindowsModeWrappedState=function(m){const c=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),v=c==null?void 0:c.get(m.cols-1),S=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);S&&v&&(S.isWrapped=v[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&v[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new _}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){const c=new u;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=u;class _{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){const c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,v=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=v}clone(){return new _(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=_},9092:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const _=u(6349),m=u(7226),c=u(3734),v=u(8437),S=u(4634),b=u(511),d=u(643),n=u(4863),o=u(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(r,s,l){this._hasScrollback=r,this._optionsService=s,this._bufferService=l,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(r,s){return new v.BufferLine(this._bufferService.cols,this.getNullCell(r),s)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows}_getCorrectBufferLength(r){if(!this._hasScrollback)return r;const s=r+this._optionsService.rawOptions.scrollback;return s>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:s}fillViewportRows(r){if(this.lines.length===0){r===void 0&&(r=v.DEFAULT_ATTR_DATA);let s=this._rows;for(;s--;)this.lines.push(this.getBlankLine(r))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(r,s){const l=this.getNullCell(v.DEFAULT_ATTR_DATA);let p=0;const g=this._getCorrectBufferLength(s);if(g>this.lines.maxLength&&(this.lines.maxLength=g),this.lines.length>0){if(this._cols<r)for(let f=0;f<this.lines.length;f++)p+=+this.lines.get(f).resize(r,l);let w=0;if(this._rows<s)for(let f=this._rows;f<s;f++)this.lines.length<s+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(r,l)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(r,l)));else for(let f=this._rows;f>s;f--)this.lines.length>s+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(g<this.lines.maxLength){const f=this.lines.length-g;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=g}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,s-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=s-1,this._isReflowEnabled&&(this._reflow(r,s),this._cols>r))for(let w=0;w<this.lines.length;w++)p+=+this.lines.get(w).resize(r,l);this._cols=r,this._rows=s,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let r=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,r=!1);let s=0;for(;this._memoryCleanupPosition<this.lines.length;)if(s+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),s>100)return!0;return r}get _isReflowEnabled(){const r=this._optionsService.rawOptions.windowsPty;return r&&r.buildNumber?this._hasScrollback&&r.backend==="conpty"&&r.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(r,s){this._cols!==r&&(r>this._cols?this._reflowLarger(r,s):this._reflowSmaller(r,s))}_reflowLarger(r,s){const l=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(l.length>0){const p=(0,S.reflowLargerCreateNewLayout)(this.lines,l);(0,S.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(r,s,p.countRemoved)}}_reflowLargerAdjustViewport(r,s,l){const p=this.getNullCell(v.DEFAULT_ATTR_DATA);let g=l;for(;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<s&&this.lines.push(new v.BufferLine(r,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-l,0)}_reflowSmaller(r,s){const l=this.getNullCell(v.DEFAULT_ATTR_DATA),p=[];let g=0;for(let w=this.lines.length-1;w>=0;w--){let f=this.lines.get(w);if(!f||!f.isWrapped&&f.getTrimmedLength()<=r)continue;const y=[f];for(;f.isWrapped&&w>0;)f=this.lines.get(--w),y.unshift(f);const T=this.ybase+this.y;if(T>=w&&T<w+y.length)continue;const O=y[y.length-1].getTrimmedLength(),P=(0,S.reflowSmallerGetNewLineLengths)(y,this._cols,r),D=P.length-y.length;let $;$=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const X=[];for(let M=0;M<D;M++){const H=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);X.push(H)}X.length>0&&(p.push({start:w+y.length+g,newLines:X}),g+=X.length),y.push(...X);let ee=P.length-1,se=P[ee];se===0&&(ee--,se=P[ee]);let Q=y.length-D-1,E=O;for(;Q>=0;){const M=Math.min(E,se);if(y[ee]===void 0)break;if(y[ee].copyCellsFrom(y[Q],E-M,se-M,M,!0),se-=M,se===0&&(ee--,se=P[ee]),E-=M,E===0){Q--;const H=Math.max(Q,0);E=(0,S.getWrappedLineTrimmedLength)(y,H,this._cols)}}for(let M=0;M<y.length;M++)P[M]<r&&y[M].setCell(P[M],l);let k=D-$;for(;k-- >0;)this.ybase===0?this.y<s-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-s&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+s-1)}if(p.length>0){const w=[],f=[];for(let ee=0;ee<this.lines.length;ee++)f.push(this.lines.get(ee));const y=this.lines.length;let T=y-1,O=0,P=p[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);let D=0;for(let ee=Math.min(this.lines.maxLength-1,y+g-1);ee>=0;ee--)if(P&&P.start>T+D){for(let se=P.newLines.length-1;se>=0;se--)this.lines.set(ee--,P.newLines[se]);ee++,w.push({index:T+1,amount:P.newLines.length}),D+=P.newLines.length,P=p[++O]}else this.lines.set(ee,f[T--]);let $=0;for(let ee=w.length-1;ee>=0;ee--)w[ee].index+=$,this.lines.onInsertEmitter.fire(w[ee]),$+=w[ee].amount;const X=Math.max(0,y+g-this.lines.maxLength);X>0&&this.lines.onTrimEmitter.fire(X)}}translateBufferLineToString(r,s,l=0,p){const g=this.lines.get(r);return g?g.translateToString(s,l,p):""}getWrappedRangeForLine(r){let s=r,l=r;for(;s>0&&this.lines.get(s).isWrapped;)s--;for(;l+1<this.lines.length&&this.lines.get(l+1).isWrapped;)l++;return{first:s,last:l}}setupTabStops(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0}prevStop(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r}nextStop(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r}clearMarkers(r){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].line===r&&(this.markers[s].dispose(),this.markers.splice(s--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1}addMarker(r){const s=new n.Marker(r);return this.markers.push(s),s.register(this.lines.onTrim(l=>{s.line-=l,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(l=>{s.line>=l.index&&(s.line+=l.amount)})),s.register(this.lines.onDelete(l=>{s.line>=l.index&&s.line<l.index+l.amount&&s.dispose(),s.line>l.index&&(s.line-=l.amount)})),s.register(s.onDispose(()=>this._removeMarker(s))),s}_removeMarker(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)}}},8437:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const _=u(3734),m=u(511),c=u(643),v=u(482);a.DEFAULT_ATTR_DATA=Object.freeze(new _.AttributeData);let S=0;class b{constructor(n,o,r=!1){this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);const s=o||m.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let l=0;l<n;++l)this.setCell(l,s);this.length=n}get(n){const o=this._data[3*n+0],r=2097151&o;return[this._data[3*n+1],2097152&o?this._combined[n]:r?(0,v.stringFromCodePoint)(r):"",o>>22,2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):r]}set(n,o){this._data[3*n+1]=o[c.CHAR_DATA_ATTR_INDEX],o[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=o[1],this._data[3*n+0]=2097152|n|o[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=o[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(n){return this._data[3*n+0]>>22}hasWidth(n){return 12582912&this._data[3*n+0]}getFg(n){return this._data[3*n+1]}getBg(n){return this._data[3*n+2]}hasContent(n){return 4194303&this._data[3*n+0]}getCodePoint(n){const o=this._data[3*n+0];return 2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&o}isCombined(n){return 2097152&this._data[3*n+0]}getString(n){const o=this._data[3*n+0];return 2097152&o?this._combined[n]:2097151&o?(0,v.stringFromCodePoint)(2097151&o):""}isProtected(n){return 536870912&this._data[3*n+2]}loadCell(n,o){return S=3*n,o.content=this._data[S+0],o.fg=this._data[S+1],o.bg=this._data[S+2],2097152&o.content&&(o.combinedData=this._combined[n]),268435456&o.bg&&(o.extended=this._extendedAttrs[n]),o}setCell(n,o){2097152&o.content&&(this._combined[n]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=o.content,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg}setCellFromCodepoint(n,o,r,s){268435456&s.bg&&(this._extendedAttrs[n]=s.extended),this._data[3*n+0]=o|r<<22,this._data[3*n+1]=s.fg,this._data[3*n+2]=s.bg}addCodepointToCell(n,o,r){let s=this._data[3*n+0];2097152&s?this._combined[n]+=(0,v.stringFromCodePoint)(o):2097151&s?(this._combined[n]=(0,v.stringFromCodePoint)(2097151&s)+(0,v.stringFromCodePoint)(o),s&=-2097152,s|=2097152):s=o|4194304,r&&(s&=-12582913,s|=r<<22),this._data[3*n+0]=s}insertCells(n,o,r){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,r),o<this.length-n){const s=new m.CellData;for(let l=this.length-n-o-1;l>=0;--l)this.setCell(n+o+l,this.loadCell(n+l,s));for(let l=0;l<o;++l)this.setCell(n+l,r)}else for(let s=n;s<this.length;++s)this.setCell(s,r);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,r)}deleteCells(n,o,r){if(n%=this.length,o<this.length-n){const s=new m.CellData;for(let l=0;l<this.length-n-o;++l)this.setCell(n+l,this.loadCell(n+o+l,s));for(let l=this.length-o;l<this.length;++l)this.setCell(l,r)}else for(let s=n;s<this.length;++s)this.setCell(s,r);n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,r),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodepoint(n,0,1,r)}replaceCells(n,o,r,s=!1){if(s)for(n&&this.getWidth(n-1)===2&&!this.isProtected(n-1)&&this.setCellFromCodepoint(n-1,0,1,r),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodepoint(o,0,1,r);n<o&&n<this.length;)this.isProtected(n)||this.setCell(n,r),n++;else for(n&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n-1,0,1,r),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o,0,1,r);n<o&&n<this.length;)this.setCell(n++,r)}resize(n,o){if(n===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const r=3*n;if(n>this.length){if(this._data.buffer.byteLength>=4*r)this._data=new Uint32Array(this._data.buffer,0,r);else{const s=new Uint32Array(r);s.set(this._data),this._data=s}for(let s=this.length;s<n;++s)this.setCell(s,o)}else{this._data=this._data.subarray(0,r);const s=Object.keys(this._combined);for(let p=0;p<s.length;p++){const g=parseInt(s[p],10);g>=n&&delete this._combined[g]}const l=Object.keys(this._extendedAttrs);for(let p=0;p<l.length;p++){const g=parseInt(l[p],10);g>=n&&delete this._extendedAttrs[g]}}return this.length=n,4*r*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const n=new Uint32Array(this._data.length);return n.set(this._data),this._data=n,1}return 0}fill(n,o=!1){if(o)for(let r=0;r<this.length;++r)this.isProtected(r)||this.setCell(r,n);else{this._combined={},this._extendedAttrs={};for(let r=0;r<this.length;++r)this.setCell(r,n)}}copyFrom(n){this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={};for(const o in n._combined)this._combined[o]=n._combined[o];this._extendedAttrs={};for(const o in n._extendedAttrs)this._extendedAttrs[o]=n._extendedAttrs[o];this.isWrapped=n.isWrapped}clone(){const n=new b(0);n._data=new Uint32Array(this._data),n.length=this.length;for(const o in this._combined)n._combined[o]=this._combined[o];for(const o in this._extendedAttrs)n._extendedAttrs[o]=this._extendedAttrs[o];return n.isWrapped=this.isWrapped,n}getTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0}getNoBgTrimmedLength(){for(let n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0]||50331648&this._data[3*n+2])return n+(this._data[3*n+0]>>22);return 0}copyCellsFrom(n,o,r,s,l){const p=n._data;if(l)for(let w=s-1;w>=0;w--){for(let f=0;f<3;f++)this._data[3*(r+w)+f]=p[3*(o+w)+f];268435456&p[3*(o+w)+2]&&(this._extendedAttrs[r+w]=n._extendedAttrs[o+w])}else for(let w=0;w<s;w++){for(let f=0;f<3;f++)this._data[3*(r+w)+f]=p[3*(o+w)+f];268435456&p[3*(o+w)+2]&&(this._extendedAttrs[r+w]=n._extendedAttrs[o+w])}const g=Object.keys(n._combined);for(let w=0;w<g.length;w++){const f=parseInt(g[w],10);f>=o&&(this._combined[f-o+r]=n._combined[f])}}translateToString(n,o,r,s){o=o??0,r=r??this.length,n&&(r=Math.min(r,this.getTrimmedLength())),s&&(s.length=0);let l="";for(;o<r;){const p=this._data[3*o+0],g=2097151&p,w=2097152&p?this._combined[o]:g?(0,v.stringFromCodePoint)(g):c.WHITESPACE_CELL_CHAR;if(l+=w,s)for(let f=0;f<w.length;++f)s.push(o);o+=p>>22||1}return s&&s.push(o),l}}a.BufferLine=b},4841:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(u,_){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return _*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(j,a)=>{function u(_,m,c){if(m===_.length-1)return _[m].getTrimmedLength();const v=!_[m].hasContent(c-1)&&_[m].getWidth(c-1)===1,S=_[m+1].getWidth(0)===2;return v&&S?c-1:c}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(_,m,c,v,S){const b=[];for(let d=0;d<_.length-1;d++){let n=d,o=_.get(++n);if(!o.isWrapped)continue;const r=[_.get(d)];for(;n<_.length&&o.isWrapped;)r.push(o),o=_.get(++n);if(v>=d&&v<n){d+=r.length-1;continue}let s=0,l=u(r,s,m),p=1,g=0;for(;p<r.length;){const f=u(r,p,m),y=f-g,T=c-l,O=Math.min(y,T);r[s].copyCellsFrom(r[p],g,l,O,!1),l+=O,l===c&&(s++,l=0),g+=O,g===f&&(p++,g=0),l===0&&s!==0&&r[s-1].getWidth(c-1)===2&&(r[s].copyCellsFrom(r[s-1],c-1,l++,1,!1),r[s-1].setCell(c-1,S))}r[s].replaceCells(l,c,S);let w=0;for(let f=r.length-1;f>0&&(f>s||r[f].getTrimmedLength()===0);f--)w++;w>0&&(b.push(d+r.length-w),b.push(w)),d+=r.length-1}return b},a.reflowLargerCreateNewLayout=function(_,m){const c=[];let v=0,S=m[v],b=0;for(let d=0;d<_.length;d++)if(S===d){const n=m[++v];_.onDeleteEmitter.fire({index:d-b,amount:n}),d+=n-1,b+=n,S=m[++v]}else c.push(d);return{layout:c,countRemoved:b}},a.reflowLargerApplyNewLayout=function(_,m){const c=[];for(let v=0;v<m.length;v++)c.push(_.get(m[v]));for(let v=0;v<c.length;v++)_.set(v,c[v]);_.length=m.length},a.reflowSmallerGetNewLineLengths=function(_,m,c){const v=[],S=_.map((o,r)=>u(_,r,m)).reduce((o,r)=>o+r);let b=0,d=0,n=0;for(;n<S;){if(S-n<c){v.push(S-n);break}b+=c;const o=u(_,d,m);b>o&&(b-=o,d++);const r=_[d].getWidth(b-1)===2;r&&b--;const s=r?c-1:c;v.push(s),n+=s}return v},a.getWrappedLineTrimmedLength=u},5295:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const _=u(8460),m=u(844),c=u(9092);class v extends m.Disposable{constructor(b,d){super(),this._optionsService=b,this._bufferService=d,this._onBufferActivate=this.register(new _.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,d){this._normal.resize(b,d),this._alt.resize(b,d),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}a.BufferSet=v},511:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const _=u(482),m=u(643),c=u(3734);class v extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const d=new v;return d.setFromCharData(b),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,_.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(b[m.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(b[m.CHAR_DATA_CHAR_INDEX].length===2){const n=b[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=n&&n<=56319){const o=b[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(n-55296)+o-56320+65536|b[m.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=b[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[m.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=b[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=v},643:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const _=u(8460),m=u(844);class c{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}a.Marker=c,c._nextId=1},7116:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},a.CHARSETS.A={"#":"Â£"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},a.CHARSETS.C=a.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},a.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},a.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},a.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},a.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},a.CHARSETS.E=a.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},a.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},a.CHARSETS.H=a.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},a.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(j,a)=>{var u,_,m;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL=""}(u||(a.C0=u={})),function(c){c.PAD="Â",c.HOP="Â",c.BPH="Â",c.NBH="Â",c.IND="Â",c.NEL="Â",c.SSA="Â",c.ESA="Â",c.HTS="Â",c.HTJ="Â",c.VTS="Â",c.PLD="Â",c.PLU="Â",c.RI="Â",c.SS2="Â",c.SS3="Â",c.DCS="Â",c.PU1="Â",c.PU2="Â",c.STS="Â",c.CCH="Â",c.MW="Â",c.SPA="Â",c.EPA="Â",c.SOS="Â",c.SGCI="Â",c.SCI="Â",c.CSI="Â",c.ST="Â",c.OSC="Â",c.PM="Â",c.APC="Â"}(_||(a.C1=_={})),function(c){c.ST=`${u.ESC}\\`}(m||(a.C1_ESCAPED=m={}))},7399:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const _=u(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(c,v,S,b){const d={type:0,cancel:!1,key:void 0},n=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?d.key=v?_.C0.ESC+"OA":_.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?d.key=v?_.C0.ESC+"OD":_.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?d.key=v?_.C0.ESC+"OC":_.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(d.key=v?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:d.key=c.ctrlKey?"\b":_.C0.DEL,c.altKey&&(d.key=_.C0.ESC+d.key);break;case 9:if(c.shiftKey){d.key=_.C0.ESC+"[Z";break}d.key=_.C0.HT,d.cancel=!0;break;case 13:d.key=c.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,d.cancel=!0;break;case 27:d.key=_.C0.ESC,c.altKey&&(d.key=_.C0.ESC+_.C0.ESC),d.cancel=!0;break;case 37:if(c.metaKey)break;n?(d.key=_.C0.ESC+"[1;"+(n+1)+"D",d.key===_.C0.ESC+"[1;3D"&&(d.key=_.C0.ESC+(S?"b":"[1;5D"))):d.key=v?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(c.metaKey)break;n?(d.key=_.C0.ESC+"[1;"+(n+1)+"C",d.key===_.C0.ESC+"[1;3C"&&(d.key=_.C0.ESC+(S?"f":"[1;5C"))):d.key=v?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(c.metaKey)break;n?(d.key=_.C0.ESC+"[1;"+(n+1)+"A",S||d.key!==_.C0.ESC+"[1;3A"||(d.key=_.C0.ESC+"[1;5A")):d.key=v?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(c.metaKey)break;n?(d.key=_.C0.ESC+"[1;"+(n+1)+"B",S||d.key!==_.C0.ESC+"[1;3B"||(d.key=_.C0.ESC+"[1;5B")):d.key=v?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(d.key=_.C0.ESC+"[2~");break;case 46:d.key=n?_.C0.ESC+"[3;"+(n+1)+"~":_.C0.ESC+"[3~";break;case 36:d.key=n?_.C0.ESC+"[1;"+(n+1)+"H":v?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:d.key=n?_.C0.ESC+"[1;"+(n+1)+"F":v?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:c.shiftKey?d.type=2:c.ctrlKey?d.key=_.C0.ESC+"[5;"+(n+1)+"~":d.key=_.C0.ESC+"[5~";break;case 34:c.shiftKey?d.type=3:c.ctrlKey?d.key=_.C0.ESC+"[6;"+(n+1)+"~":d.key=_.C0.ESC+"[6~";break;case 112:d.key=n?_.C0.ESC+"[1;"+(n+1)+"P":_.C0.ESC+"OP";break;case 113:d.key=n?_.C0.ESC+"[1;"+(n+1)+"Q":_.C0.ESC+"OQ";break;case 114:d.key=n?_.C0.ESC+"[1;"+(n+1)+"R":_.C0.ESC+"OR";break;case 115:d.key=n?_.C0.ESC+"[1;"+(n+1)+"S":_.C0.ESC+"OS";break;case 116:d.key=n?_.C0.ESC+"[15;"+(n+1)+"~":_.C0.ESC+"[15~";break;case 117:d.key=n?_.C0.ESC+"[17;"+(n+1)+"~":_.C0.ESC+"[17~";break;case 118:d.key=n?_.C0.ESC+"[18;"+(n+1)+"~":_.C0.ESC+"[18~";break;case 119:d.key=n?_.C0.ESC+"[19;"+(n+1)+"~":_.C0.ESC+"[19~";break;case 120:d.key=n?_.C0.ESC+"[20;"+(n+1)+"~":_.C0.ESC+"[20~";break;case 121:d.key=n?_.C0.ESC+"[21;"+(n+1)+"~":_.C0.ESC+"[21~";break;case 122:d.key=n?_.C0.ESC+"[23;"+(n+1)+"~":_.C0.ESC+"[23~";break;case 123:d.key=n?_.C0.ESC+"[24;"+(n+1)+"~":_.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(S&&!b||!c.altKey||c.metaKey)!S||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?d.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(d.key=_.C0.US),c.key==="@"&&(d.key=_.C0.NUL)):c.keyCode===65&&(d.type=1);else{const o=m[c.keyCode],r=o==null?void 0:o[c.shiftKey?1:0];if(r)d.key=_.C0.ESC+r;else if(c.keyCode>=65&&c.keyCode<=90){const s=c.ctrlKey?c.keyCode-64:c.keyCode+32;let l=String.fromCharCode(s);c.shiftKey&&(l=l.toUpperCase()),d.key=_.C0.ESC+l}else if(c.keyCode===32)d.key=_.C0.ESC+(c.ctrlKey?_.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let s=c.code.slice(3,4);c.shiftKey||(s=s.toLowerCase()),d.key=_.C0.ESC+s,d.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?d.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?d.key=_.C0.NUL:c.keyCode>=51&&c.keyCode<=55?d.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?d.key=_.C0.DEL:c.keyCode===219?d.key=_.C0.ESC:c.keyCode===220?d.key=_.C0.FS:c.keyCode===221&&(d.key=_.C0.GS)}return d}},482:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},a.utf32ToString=function(u,_=0,m=u.length){let c="";for(let v=_;v<m;++v){let S=u[v];S>65535?(S-=65536,c+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):c+=String.fromCharCode(S)}return c},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,_){const m=u.length;if(!m)return 0;let c=0,v=0;if(this._interim){const S=u.charCodeAt(v++);56320<=S&&S<=57343?_[c++]=1024*(this._interim-55296)+S-56320+65536:(_[c++]=this._interim,_[c++]=S),this._interim=0}for(let S=v;S<m;++S){const b=u.charCodeAt(S);if(55296<=b&&b<=56319){if(++S>=m)return this._interim=b,c;const d=u.charCodeAt(S);56320<=d&&d<=57343?_[c++]=1024*(b-55296)+d-56320+65536:(_[c++]=b,_[c++]=d)}else b!==65279&&(_[c++]=b)}return c}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,_){const m=u.length;if(!m)return 0;let c,v,S,b,d=0,n=0,o=0;if(this.interim[0]){let l=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let g,w=0;for(;(g=63&this.interim[++w])&&w<4;)p<<=6,p|=g;const f=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=f-w;for(;o<y;){if(o>=m)return 0;if(g=u[o++],(192&g)!=128){o--,l=!0;break}this.interim[w++]=g,p<<=6,p|=63&g}l||(f===2?p<128?o--:_[d++]=p:f===3?p<2048||p>=55296&&p<=57343||p===65279||(_[d++]=p):p<65536||p>1114111||(_[d++]=p)),this.interim.fill(0)}const r=m-4;let s=o;for(;s<m;){for(;!(!(s<r)||128&(c=u[s])||128&(v=u[s+1])||128&(S=u[s+2])||128&(b=u[s+3]));)_[d++]=c,_[d++]=v,_[d++]=S,_[d++]=b,s+=4;if(c=u[s++],c<128)_[d++]=c;else if((224&c)==192){if(s>=m)return this.interim[0]=c,d;if(v=u[s++],(192&v)!=128){s--;continue}if(n=(31&c)<<6|63&v,n<128){s--;continue}_[d++]=n}else if((240&c)==224){if(s>=m)return this.interim[0]=c,d;if(v=u[s++],(192&v)!=128){s--;continue}if(s>=m)return this.interim[0]=c,this.interim[1]=v,d;if(S=u[s++],(192&S)!=128){s--;continue}if(n=(15&c)<<12|(63&v)<<6|63&S,n<2048||n>=55296&&n<=57343||n===65279)continue;_[d++]=n}else if((248&c)==240){if(s>=m)return this.interim[0]=c,d;if(v=u[s++],(192&v)!=128){s--;continue}if(s>=m)return this.interim[0]=c,this.interim[1]=v,d;if(S=u[s++],(192&S)!=128){s--;continue}if(s>=m)return this.interim[0]=c,this.interim[1]=v,this.interim[2]=S,d;if(b=u[s++],(192&b)!=128){s--;continue}if(n=(7&c)<<18|(63&v)<<12|(63&S)<<6|63&b,n<65536||n>1114111)continue;_[d++]=n}}return d}}},225:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const _=u(1480),m=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;a.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let S=0;S<m.length;++S)v.fill(0,m[S][0],m[S][1]+1)}}wcwidth(S){return S<32?0:S<127?1:S<65536?v[S]:function(b,d){let n,o=0,r=d.length-1;if(b<d[0][0]||b>d[r][1])return!1;for(;r>=o;)if(n=o+r>>1,b>d[n][1])o=n+1;else{if(!(b<d[n][0]))return!0;r=n-1}return!1}(S,c)?0:S>=131072&&S<=196605||S>=196608&&S<=262141?2:1}charProperties(S,b){let d=this.wcwidth(S),n=d===0&&b!==0;if(n){const o=_.UnicodeService.extractWidth(b);o===0?n=!1:o>d&&(d=o)}return _.UnicodeService.createPropertyValue(0,d,n)}}},5981:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const _=u(8460),m=u(844);class c extends m.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new _.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);const n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(b)}_innerWrite(S=0,b=!0){const d=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const n=this._writeBuffer[this._bufferOffset],o=this._action(n,b);if(o){const s=l=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,l)):this._innerWrite(d,l);return void o.catch(l=>(queueMicrotask(()=>{throw l}),Promise.resolve(!1))).then(s)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=c},5941:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,_=/^[\da-f]+$/;function m(c,v){const S=c.toString(16),b=S.length<2?"0"+S:S;switch(v){case 4:return S[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}a.parseColor=function(c){if(!c)return;let v=c.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const S=u.exec(v);if(S){const b=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/b*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/b*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/b*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),_.exec(v)&&[3,6,9,12].includes(v.length))){const S=v.length/3,b=[0,0,0];for(let d=0;d<3;++d){const n=parseInt(v.slice(S*d,S*d+S),16);b[d]=S===1?n<<4:S===2?n:S===3?n>>4:n>>8}return b}},a.toRgbString=function(c,v=16){const[S,b,d]=c;return`rgb:${m(S,v)}/${m(b,v)}/${m(d,v)}`}},5770:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const _=u(482),m=u(8742),c=u(5770),v=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(b,d){this._handlers[b]===void 0&&(this._handlers[b]=[]);const n=this._handlers[b];return n.push(d),{dispose:()=>{const o=n.indexOf(d);o!==-1&&n.splice(o,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(b,d){if(this.reset(),this._ident=b,this._active=this._handlers[b]||v,this._active.length)for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(b,d,n){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(b,d,n);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(b,d,n))}unhook(b,d=!0){if(this._active.length){let n=!1,o=this._active.length-1,r=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,n=d,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;o>=0&&(n=this._active[o].unhook(b),n!==!0);o--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,n;o--}for(;o>=0;o--)if(n=this._active[o].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,n}else this._handlerFb(this._ident,"UNHOOK",b);this._active=v,this._ident=0}};const S=new m.Params;S.addParam(0),a.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=S,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():S,this._data="",this._hitLimit=!1}put(b,d,n){this._hitLimit||(this._data+=(0,_.utf32ToString)(b,d,n),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let d=!1;if(this._hitLimit)d=!1;else if(b&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(n=>(this._params=S,this._data="",this._hitLimit=!1,n));return this._params=S,this._data="",this._hitLimit=!1,d}}},2015:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const _=u(844),m=u(8742),c=u(6242),v=u(6351);class S{constructor(o){this.table=new Uint8Array(o)}setDefault(o,r){this.table.fill(o<<4|r)}add(o,r,s,l){this.table[r<<8|o]=s<<4|l}addMany(o,r,s,l){for(let p=0;p<o.length;p++)this.table[r<<8|o[p]]=s<<4|l}}a.TransitionTable=S;const b=160;a.VT500_TRANSITION_TABLE=function(){const n=new S(4095),o=Array.apply(null,Array(256)).map((w,f)=>f),r=(w,f)=>o.slice(w,f),s=r(32,127),l=r(0,24);l.push(25),l.push.apply(l,r(28,32));const p=r(0,14);let g;for(g in n.setDefault(1,0),n.addMany(s,0,2,0),p)n.addMany([24,26,153,154],g,3,0),n.addMany(r(128,144),g,3,0),n.addMany(r(144,152),g,3,0),n.add(156,g,0,0),n.add(27,g,11,1),n.add(157,g,4,8),n.addMany([152,158,159],g,0,7),n.add(155,g,11,3),n.add(144,g,11,9);return n.addMany(l,0,3,0),n.addMany(l,1,3,1),n.add(127,1,0,1),n.addMany(l,8,0,8),n.addMany(l,3,3,3),n.add(127,3,0,3),n.addMany(l,4,3,4),n.add(127,4,0,4),n.addMany(l,6,3,6),n.addMany(l,5,3,5),n.add(127,5,0,5),n.addMany(l,2,3,2),n.add(127,2,0,2),n.add(93,1,4,8),n.addMany(s,8,5,8),n.add(127,8,5,8),n.addMany([156,27,24,26,7],8,6,0),n.addMany(r(28,32),8,0,8),n.addMany([88,94,95],1,0,7),n.addMany(s,7,0,7),n.addMany(l,7,0,7),n.add(156,7,0,0),n.add(127,7,0,7),n.add(91,1,11,3),n.addMany(r(64,127),3,7,0),n.addMany(r(48,60),3,8,4),n.addMany([60,61,62,63],3,9,4),n.addMany(r(48,60),4,8,4),n.addMany(r(64,127),4,7,0),n.addMany([60,61,62,63],4,0,6),n.addMany(r(32,64),6,0,6),n.add(127,6,0,6),n.addMany(r(64,127),6,0,0),n.addMany(r(32,48),3,9,5),n.addMany(r(32,48),5,9,5),n.addMany(r(48,64),5,0,6),n.addMany(r(64,127),5,7,0),n.addMany(r(32,48),4,9,5),n.addMany(r(32,48),1,9,2),n.addMany(r(32,48),2,9,2),n.addMany(r(48,127),2,10,0),n.addMany(r(48,80),1,10,0),n.addMany(r(81,88),1,10,0),n.addMany([89,90,92],1,10,0),n.addMany(r(96,127),1,10,0),n.add(80,1,11,9),n.addMany(l,9,0,9),n.add(127,9,0,9),n.addMany(r(28,32),9,0,9),n.addMany(r(32,48),9,9,12),n.addMany(r(48,60),9,8,10),n.addMany([60,61,62,63],9,9,10),n.addMany(l,11,0,11),n.addMany(r(32,128),11,0,11),n.addMany(r(28,32),11,0,11),n.addMany(l,10,0,10),n.add(127,10,0,10),n.addMany(r(28,32),10,0,10),n.addMany(r(48,60),10,8,10),n.addMany([60,61,62,63],10,0,11),n.addMany(r(32,48),10,9,12),n.addMany(l,12,0,12),n.add(127,12,0,12),n.addMany(r(28,32),12,0,12),n.addMany(r(32,48),12,9,12),n.addMany(r(48,64),12,0,11),n.addMany(r(64,127),12,12,13),n.addMany(r(64,127),10,12,13),n.addMany(r(64,127),9,12,13),n.addMany(l,13,13,13),n.addMany(s,13,13,13),n.add(127,13,0,13),n.addMany([27,156,24,26],13,14,0),n.add(b,0,2,0),n.add(b,8,5,8),n.add(b,6,0,6),n.add(b,11,0,11),n.add(b,13,13,13),n}();class d extends _.Disposable{constructor(o=a.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(r,s,l)=>{},this._executeHandlerFb=r=>{},this._csiHandlerFb=(r,s)=>{},this._escHandlerFb=r=>{},this._errorHandlerFb=r=>r,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,_.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,r=[64,126]){let s=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(s=o.prefix.charCodeAt(0),s&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<o.intermediates.length;++p){const g=o.intermediates.charCodeAt(p);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=g}}if(o.final.length!==1)throw new Error("final must be a single byte");const l=o.final.charCodeAt(0);if(r[0]>l||l>r[1])throw new Error(`final must be in range ${r[0]} .. ${r[1]}`);return s<<=8,s|=l,s}identToString(o){const r=[];for(;o;)r.push(String.fromCharCode(255&o)),o>>=8;return r.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,r){const s=this._identifier(o,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);const l=this._escHandlers[s];return l.push(r),{dispose:()=>{const p=l.indexOf(r);p!==-1&&l.splice(p,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,r){this._executeHandlers[o.charCodeAt(0)]=r}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,r){const s=this._identifier(o);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);const l=this._csiHandlers[s];return l.push(r),{dispose:()=>{const p=l.indexOf(r);p!==-1&&l.splice(p,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,r){return this._dcsParser.registerHandler(this._identifier(o),r)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,r){return this._oscParser.registerHandler(o,r)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,r,s,l,p){this._parseStack.state=o,this._parseStack.handlers=r,this._parseStack.handlerPos=s,this._parseStack.transition=l,this._parseStack.chunkPos=p}parse(o,r,s){let l,p=0,g=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(s===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const f=this._parseStack.handlers;let y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(s===!1&&y>-1){for(;y>=0&&(l=f[y](this._params),l!==!0);y--)if(l instanceof Promise)return this._parseStack.handlerPos=y,l}this._parseStack.handlers=[];break;case 4:if(s===!1&&y>-1){for(;y>=0&&(l=f[y](),l!==!0);y--)if(l instanceof Promise)return this._parseStack.handlerPos=y,l}this._parseStack.handlers=[];break;case 6:if(p=o[this._parseStack.chunkPos],l=this._dcsParser.unhook(p!==24&&p!==26,s),l)return l;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=o[this._parseStack.chunkPos],l=this._oscParser.end(p!==24&&p!==26,s),l)return l;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let f=w;f<r;++f){switch(p=o[f],g=this._transitions.table[this.currentState<<8|(p<160?p:b)],g>>4){case 2:for(let D=f+1;;++D){if(D>=r||(p=o[D])<32||p>126&&p<b){this._printHandler(o,f,D),f=D-1;break}if(++D>=r||(p=o[D])<32||p>126&&p<b){this._printHandler(o,f,D),f=D-1;break}if(++D>=r||(p=o[D])<32||p>126&&p<b){this._printHandler(o,f,D),f=D-1;break}if(++D>=r||(p=o[D])<32||p>126&&p<b){this._printHandler(o,f,D),f=D-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:f,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const y=this._csiHandlers[this._collect<<8|p];let T=y?y.length-1:-1;for(;T>=0&&(l=y[T](this._params),l!==!0);T--)if(l instanceof Promise)return this._preserveStack(3,y,T,g,f),l;T<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingJoinState=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++f<r&&(p=o[f])>47&&p<60);f--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const O=this._escHandlers[this._collect<<8|p];let P=O?O.length-1:-1;for(;P>=0&&(l=O[P](),l!==!0);P--)if(l instanceof Promise)return this._preserveStack(4,O,P,g,f),l;P<0&&this._escHandlerFb(this._collect<<8|p),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let D=f+1;;++D)if(D>=r||(p=o[D])===24||p===26||p===27||p>127&&p<b){this._dcsParser.put(o,f,D),f=D-1;break}break;case 14:if(l=this._dcsParser.unhook(p!==24&&p!==26),l)return this._preserveStack(6,[],0,g,f),l;p===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=f+1;;D++)if(D>=r||(p=o[D])<32||p>127&&p<b){this._oscParser.put(o,f,D),f=D-1;break}break;case 6:if(l=this._oscParser.end(p!==24&&p!==26),l)return this._preserveStack(5,[],0,g,f),l;p===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&g}}}a.EscapeSequenceParser=d},6242:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const _=u(5770),m=u(482),c=[];a.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,S){this._handlers[v]===void 0&&(this._handlers[v]=[]);const b=this._handlers[v];return b.push(S),{dispose:()=>{const d=b.indexOf(S);d!==-1&&b.splice(d,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,S,b){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(v,S,b);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(v,S,b))}start(){this.reset(),this._state=1}put(v,S,b){if(this._state!==3){if(this._state===1)for(;S<b;){const d=v[S++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&b-S>0&&this._put(v,S,b)}}end(v,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,d=this._active.length-1,n=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,b=S,n=this._stack.fallThrough,this._stack.paused=!1),!n&&b===!1){for(;d>=0&&(b=this._active[d].end(v),b!==!0);d--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,b;d--}for(;d>=0;d--)if(b=this._active[d].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",v);this._active=c,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,S,b){this._hitLimit||(this._data+=(0,m.utf32ToString)(v,S,b),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let S=!1;if(this._hitLimit)S=!1;else if(v&&(S=this._handler(this._data),S instanceof Promise))return S.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,S}}},8742:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const u=2147483647;class _{static fromArray(c){const v=new _;if(!c.length)return v;for(let S=Array.isArray(c[0])?1:0;S<c.length;++S){const b=c[S];if(Array.isArray(b))for(let d=0;d<b.length;++d)v.addSubParam(b[d]);else v.addParam(b)}return v}constructor(c=32,v=32){if(this.maxLength=c,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const c=new _(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){const c=[];for(let v=0;v<this.length;++v){c.push(this.params[v]);const S=this._subParamsIdx[v]>>8,b=255&this._subParamsIdx[v];b-S>0&&c.push(Array.prototype.slice.call(this._subParams,S,b))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>u?u:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>u?u:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){const v=this._subParamsIdx[c]>>8,S=255&this._subParamsIdx[c];return S-v>0?this._subParams.subarray(v,S):null}getSubParamsAll(){const c={};for(let v=0;v<this.length;++v){const S=this._subParamsIdx[v]>>8,b=255&this._subParamsIdx[v];b-S>0&&(c[v]=this._subParams.slice(S,b))}return c}addDigit(c){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,b=S[v-1];S[v-1]=~b?Math.min(10*b+c,u):c}}a.Params=_},5741:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,_){const m={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(m),_.dispose=()=>this._wrappedAddonDispose(m),_.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let _=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===u){_=m;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(_,1)}}},8771:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const _=u(3785),m=u(511);a.BufferApiView=class{constructor(c,v){this._buffer=c,this.type=v}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){const v=this._buffer.lines.get(c);if(v)return new _.BufferLineApiView(v)}getNullCell(){return new m.CellData}}},3785:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const _=u(511);a.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,c){if(!(m<0||m>=this._line.length))return c?(this._line.loadCell(m,c),c):this._line.loadCell(m,new _.CellData)}translateToString(m,c,v){return this._line.translateToString(m,c,v)}}},8285:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const _=u(8771),m=u(8460),c=u(844);class v extends c.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=v},7975:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,_){return this._core.registerCsiHandler(u,m=>_(m.toArray()))}addCsiHandler(u,_){return this.registerCsiHandler(u,_)}registerDcsHandler(u,_){return this._core.registerDcsHandler(u,(m,c)=>_(m,c.toArray()))}addDcsHandler(u,_){return this.registerDcsHandler(u,_)}registerEscHandler(u,_){return this._core.registerEscHandler(u,_)}addEscHandler(u,_){return this.registerEscHandler(u,_)}registerOscHandler(u,_){return this._core.registerOscHandler(u,_)}addOscHandler(u,_){return this.registerOscHandler(u,_)}}},7090:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(j,a,u){var _=this&&this.__decorate||function(n,o,r,s){var l,p=arguments.length,g=p<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(n,o,r,s);else for(var w=n.length-1;w>=0;w--)(l=n[w])&&(g=(p<3?l(g):p>3?l(o,r,g):l(o,r))||g);return p>3&&g&&Object.defineProperty(o,r,g),g},m=this&&this.__param||function(n,o){return function(r,s){o(r,s,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const c=u(8460),v=u(844),S=u(5295),b=u(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let d=a.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(n){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(n.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(n.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(n,this))}resize(n,o){this.cols=n,this.rows=o,this.buffers.resize(n,o),this._onResize.fire({cols:n,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(n,o=!1){const r=this.buffer;let s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===n.fg&&s.getBg(0)===n.bg||(s=r.getBlankLine(n,o),this._cachedBlankLine=s),s.isWrapped=o;const l=r.ybase+r.scrollTop,p=r.ybase+r.scrollBottom;if(r.scrollTop===0){const g=r.lines.isFull;p===r.lines.length-1?g?r.lines.recycle().copyFrom(s):r.lines.push(s.clone()):r.lines.splice(p+1,0,s.clone()),g?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{const g=p-l+1;r.lines.shiftElements(l+1,g-1,-1),r.lines.set(p,s.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(n,o,r){const s=this.buffer;if(n<0){if(s.ydisp===0)return;this.isUserScrolling=!0}else n+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);const l=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+n,s.ybase),0),l!==s.ydisp&&(o||this._onScroll.fire(s.ydisp))}};a.BufferService=d=_([m(0,b.IOptionsService)],d)},7994:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,_){this._charsets[u]=_,this.glevel===u&&(this.charset=_)}}},1753:function(j,a,u){var _=this&&this.__decorate||function(s,l,p,g){var w,f=arguments.length,y=f<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,p,g);else for(var T=s.length-1;T>=0;T--)(w=s[T])&&(y=(f<3?w(y):f>3?w(l,p,y):w(l,p))||y);return f>3&&y&&Object.defineProperty(l,p,y),y},m=this&&this.__param||function(s,l){return function(p,g){l(p,g,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const c=u(2585),v=u(8460),S=u(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:s=>s.button!==4&&s.action===1&&(s.ctrl=!1,s.alt=!1,s.shift=!1,!0)},VT200:{events:19,restrict:s=>s.action!==32},DRAG:{events:23,restrict:s=>s.action!==32||s.button!==3},ANY:{events:31,restrict:s=>!0}};function d(s,l){let p=(s.ctrl?16:0)|(s.shift?4:0)|(s.alt?8:0);return s.button===4?(p|=64,p|=s.action):(p|=3&s.button,4&s.button&&(p|=64),8&s.button&&(p|=128),s.action===32?p|=32:s.action!==0||l||(p|=3)),p}const n=String.fromCharCode,o={DEFAULT:s=>{const l=[d(s,!1)+32,s.col+32,s.row+32];return l[0]>255||l[1]>255||l[2]>255?"":`\x1B[M${n(l[0])}${n(l[1])}${n(l[2])}`},SGR:s=>{const l=s.action===0&&s.button!==4?"m":"M";return`\x1B[<${d(s,!0)};${s.col};${s.row}${l}`},SGR_PIXELS:s=>{const l=s.action===0&&s.button!==4?"m":"M";return`\x1B[<${d(s,!0)};${s.x};${s.y}${l}`}};let r=a.CoreMouseService=class extends S.Disposable{constructor(s,l){super(),this._bufferService=s,this._coreService=l,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(b))this.addProtocol(p,b[p]);for(const p of Object.keys(o))this.addEncoding(p,o[p]);this.reset()}addProtocol(s,l){this._protocols[s]=l}addEncoding(s,l){this._encodings[s]=l}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(s){if(!this._protocols[s])throw new Error(`unknown protocol "${s}"`);this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(s){if(!this._encodings[s])throw new Error(`unknown encoding "${s}"`);this._activeEncoding=s}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,s,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(s))return!1;const l=this._encodings[this._activeEncoding](s);return l&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(l):this._coreService.triggerDataEvent(l,!0)),this._lastEvent=s,!0}explainEvents(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}}_equalEvents(s,l,p){if(p){if(s.x!==l.x||s.y!==l.y)return!1}else if(s.col!==l.col||s.row!==l.row)return!1;return s.button===l.button&&s.action===l.action&&s.ctrl===l.ctrl&&s.alt===l.alt&&s.shift===l.shift}};a.CoreMouseService=r=_([m(0,c.IBufferService),m(1,c.ICoreService)],r)},6975:function(j,a,u){var _=this&&this.__decorate||function(r,s,l,p){var g,w=arguments.length,f=w<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,s,l,p);else for(var y=r.length-1;y>=0;y--)(g=r[y])&&(f=(w<3?g(f):w>3?g(s,l,f):g(s,l))||f);return w>3&&f&&Object.defineProperty(s,l,f),f},m=this&&this.__param||function(r,s){return function(l,p){s(l,p,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const c=u(1439),v=u(8460),S=u(844),b=u(2585),d=Object.freeze({insertMode:!1}),n=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=a.CoreService=class extends S.Disposable{constructor(r,s,l){super(),this._bufferService=r,this._logService=s,this._optionsService=l,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(d),this.decPrivateModes=(0,c.clone)(n)}reset(){this.modes=(0,c.clone)(d),this.decPrivateModes=(0,c.clone)(n)}triggerDataEvent(r,s=!1){if(this._optionsService.rawOptions.disableStdin)return;const l=this._bufferService.buffer;s&&this._optionsService.rawOptions.scrollOnUserInput&&l.ybase!==l.ydisp&&this._onRequestScrollToBottom.fire(),s&&this._onUserInput.fire(),this._logService.debug(`sending data "${r}"`,()=>r.split("").map(p=>p.charCodeAt(0))),this._onData.fire(r)}triggerBinaryEvent(r){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${r}"`,()=>r.split("").map(s=>s.charCodeAt(0))),this._onBinary.fire(r))}};a.CoreService=o=_([m(0,b.IBufferService),m(1,b.ILogService),m(2,b.IOptionsService)],o)},9074:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const _=u(8055),m=u(8460),c=u(844),v=u(6106);let S=0,b=0;class d extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(r=>r==null?void 0:r.marker.line),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(r){if(r.marker.isDisposed)return;const s=new n(r);if(s){const l=s.marker.onDispose(()=>s.dispose());s.onDispose(()=>{s&&(this._decorations.delete(s)&&this._onDecorationRemoved.fire(s),l.dispose())}),this._decorations.insert(s),this._onDecorationRegistered.fire(s)}return s}reset(){for(const r of this._decorations.values())r.dispose();this._decorations.clear()}*getDecorationsAtCell(r,s,l){let p=0,g=0;for(const w of this._decorations.getKeyIterator(s))p=w.options.x??0,g=p+(w.options.width??1),r>=p&&r<g&&(!l||(w.options.layer??"bottom")===l)&&(yield w)}forEachDecorationAtCell(r,s,l,p){this._decorations.forEachByKey(s,g=>{S=g.options.x??0,b=S+(g.options.width??1),r>=S&&r<b&&(!l||(g.options.layer??"bottom")===l)&&p(g)})}}a.DecorationService=d;class n extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=_.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=_.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(r){super(),this.options=r,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=r.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const _=u(2585),m=u(8343);class c{constructor(...S){this._entries=new Map;for(const[b,d]of S)this.set(b,d)}set(S,b){const d=this._entries.get(S);return this._entries.set(S,b),d}forEach(S){for(const[b,d]of this._entries.entries())S(b,d)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}a.ServiceCollection=c,a.InstantiationService=class{constructor(){this._services=new c,this._services.set(_.IInstantiationService,this)}setService(v,S){this._services.set(v,S)}getService(v){return this._services.get(v)}createInstance(v,...S){const b=(0,m.getServiceDependencies)(v).sort((o,r)=>o.index-r.index),d=[];for(const o of b){const r=this._services.get(o.id);if(!r)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${o.id}.`);d.push(r)}const n=b.length>0?b[0].index:S.length;if(S.length!==n)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${n+1} conflicts with ${S.length} static arguments`);return new v(...S,...d)}}},7866:function(j,a,u){var _=this&&this.__decorate||function(n,o,r,s){var l,p=arguments.length,g=p<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(n,o,r,s);else for(var w=n.length-1;w>=0;w--)(l=n[w])&&(g=(p<3?l(g):p>3?l(o,r,g):l(o,r))||g);return p>3&&g&&Object.defineProperty(o,r,g),g},m=this&&this.__param||function(n,o){return function(r,s){o(r,s,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const c=u(844),v=u(2585),S={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let b,d=a.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(n){super(),this._optionsService=n,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(n){for(let o=0;o<n.length;o++)typeof n[o]=="function"&&(n[o]=n[o]())}_log(n,o,r){this._evalLazyOptionalParams(r),n.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...r)}trace(n,...o){var r;this._logLevel<=v.LogLevelEnum.TRACE&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.trace.bind(this._optionsService.options.logger))??console.log,n,o)}debug(n,...o){var r;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.debug.bind(this._optionsService.options.logger))??console.log,n,o)}info(n,...o){var r;this._logLevel<=v.LogLevelEnum.INFO&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.info.bind(this._optionsService.options.logger))??console.info,n,o)}warn(n,...o){var r;this._logLevel<=v.LogLevelEnum.WARN&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.warn.bind(this._optionsService.options.logger))??console.warn,n,o)}error(n,...o){var r;this._logLevel<=v.LogLevelEnum.ERROR&&this._log(((r=this._optionsService.options.logger)==null?void 0:r.error.bind(this._optionsService.options.logger))??console.error,n,o)}};a.LogService=d=_([m(0,v.IOptionsService)],d),a.setTraceLogger=function(n){b=n},a.traceCall=function(n,o,r){if(typeof r.value!="function")throw new Error("not supported");const s=r.value;r.value=function(...l){if(b.logLevel!==v.LogLevelEnum.TRACE)return s.apply(this,l);b.trace(`GlyphRenderer#${s.name}(${l.map(g=>JSON.stringify(g)).join(", ")})`);const p=s.apply(this,l);return b.trace(`GlyphRenderer#${s.name} return`,p),p}}},7302:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const _=u(8460),m=u(844),c=u(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends m.Disposable{constructor(d){super(),this._onOptionChange=this.register(new _.EventEmitter),this.onOptionChange=this._onOptionChange.event;const n={...a.DEFAULT_OPTIONS};for(const o in d)if(o in n)try{const r=d[o];n[o]=this._sanitizeAndValidateOption(o,r)}catch(r){console.error(r)}this.rawOptions=n,this.options={...n},this._setupOptions(),this.register((0,m.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(d,n){return this.onOptionChange(o=>{o===d&&n(this.rawOptions[d])})}onMultipleOptionChange(d,n){return this.onOptionChange(o=>{d.indexOf(o)!==-1&&n()})}_setupOptions(){const d=o=>{if(!(o in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},n=(o,r)=>{if(!(o in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);r=this._sanitizeAndValidateOption(o,r),this.rawOptions[o]!==r&&(this.rawOptions[o]=r,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const r={get:d.bind(this,o),set:n.bind(this,o)};Object.defineProperty(this.options,o,r)}}_sanitizeAndValidateOption(d,n){switch(d){case"cursorStyle":if(n||(n=a.DEFAULT_OPTIONS[d]),!function(o){return o==="block"||o==="underline"||o==="bar"}(n))throw new Error(`"${n}" is not a valid value for ${d}`);break;case"wordSeparator":n||(n=a.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof n=="number"&&1<=n&&n<=1e3)break;n=v.includes(n)?n:a.DEFAULT_OPTIONS[d];break;case"cursorWidth":n=Math.floor(n);case"lineHeight":case"tabStopWidth":if(n<1)throw new Error(`${d} cannot be less than 1, value: ${n}`);break;case"minimumContrastRatio":n=Math.max(1,Math.min(21,Math.round(10*n)/10));break;case"scrollback":if((n=Math.min(n,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${n}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(n<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${n}`);break;case"rows":case"cols":if(!n&&n!==0)throw new Error(`${d} must be numeric, value: ${n}`);break;case"windowsPty":n=n??{}}return n}}a.OptionsService=S},2660:function(j,a,u){var _=this&&this.__decorate||function(S,b,d,n){var o,r=arguments.length,s=r<3?b:n===null?n=Object.getOwnPropertyDescriptor(b,d):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(S,b,d,n);else for(var l=S.length-1;l>=0;l--)(o=S[l])&&(s=(r<3?o(s):r>3?o(b,d,s):o(b,d))||s);return r>3&&s&&Object.defineProperty(b,d,s),s},m=this&&this.__param||function(S,b){return function(d,n){b(d,n,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const c=u(2585);let v=a.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const b=this._bufferService.buffer;if(S.id===void 0){const l=b.addMarker(b.ybase+b.y),p={data:S,id:this._nextId++,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(p,l)),this._dataByLinkId.set(p.id,p),p.id}const d=S,n=this._getEntryIdKey(d),o=this._entriesWithId.get(n);if(o)return this.addLineToLink(o.id,b.ybase+b.y),o.id;const r=b.addMarker(b.ybase+b.y),s={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[r]};return r.onDispose(()=>this._removeMarkerFromLink(s,r)),this._entriesWithId.set(s.key,s),this._dataByLinkId.set(s.id,s),s.id}addLineToLink(S,b){const d=this._dataByLinkId.get(S);if(d&&d.lines.every(n=>n.line!==b)){const n=this._bufferService.buffer.addMarker(b);d.lines.push(n),n.onDispose(()=>this._removeMarkerFromLink(d,n))}}getLinkData(S){var b;return(b=this._dataByLinkId.get(S))==null?void 0:b.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,b){const d=S.lines.indexOf(b);d!==-1&&(S.lines.splice(d,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};a.OscLinkService=v=_([m(0,c.IBufferService)],v)},8343:(j,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const u="di$target",_="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(m){return m[_]||[]},a.createDecorator=function(m){if(a.serviceRegistry.has(m))return a.serviceRegistry.get(m);const c=function(v,S,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,n,o){n[u]===n?n[_].push({id:d,index:o}):(n[_]=[{id:d,index:o}],n[u]=n)})(c,v,b)};return c.toString=()=>m,a.serviceRegistry.set(m,c),c}},2585:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const _=u(8343);var m;a.IBufferService=(0,_.createDecorator)("BufferService"),a.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),a.ICoreService=(0,_.createDecorator)("CoreService"),a.ICharsetService=(0,_.createDecorator)("CharsetService"),a.IInstantiationService=(0,_.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(m||(a.LogLevelEnum=m={})),a.ILogService=(0,_.createDecorator)("LogService"),a.IOptionsService=(0,_.createDecorator)("OptionsService"),a.IOscLinkService=(0,_.createDecorator)("OscLinkService"),a.IUnicodeService=(0,_.createDecorator)("UnicodeService"),a.IDecorationService=(0,_.createDecorator)("DecorationService")},1480:(j,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const _=u(8460),m=u(225);class c{static extractShouldJoin(S){return(1&S)!=0}static extractWidth(S){return S>>1&3}static extractCharKind(S){return S>>3}static createPropertyValue(S,b,d=!1){return(16777215&S)<<3|(3&b)<<1|(d?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter,this.onChange=this._onChange.event;const S=new m.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(S){if(!this._providers[S])throw new Error(`unknown Unicode version "${S}"`);this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)}register(S){this._providers[S.version]=S}wcwidth(S){return this._activeProvider.wcwidth(S)}getStringCellWidth(S){let b=0,d=0;const n=S.length;for(let o=0;o<n;++o){let r=S.charCodeAt(o);if(55296<=r&&r<=56319){if(++o>=n)return b+this.wcwidth(r);const p=S.charCodeAt(o);56320<=p&&p<=57343?r=1024*(r-55296)+p-56320+65536:b+=this.wcwidth(p)}const s=this.charProperties(r,d);let l=c.extractWidth(s);c.extractShouldJoin(s)&&(l-=c.extractWidth(d)),b+=l,d=s}return b}charProperties(S,b){return this._activeProvider.charProperties(S,b)}}a.UnicodeService=c}},tt={};function Be(j){var a=tt[j];if(a!==void 0)return a.exports;var u=tt[j]={exports:{}};return A[j].call(u.exports,u,u.exports,Be),u.exports}var st={};return(()=>{var j=st;Object.defineProperty(j,"__esModule",{value:!0}),j.Terminal=void 0;const a=Be(9042),u=Be(3236),_=Be(844),m=Be(5741),c=Be(8285),v=Be(7975),S=Be(7090),b=["cols","rows"];class d extends _.Disposable{constructor(o){super(),this._core=this.register(new u.Terminal(o)),this._addonManager=this.register(new m.AddonManager),this._publicOptions={...this._core.options};const r=l=>this._core.options[l],s=(l,p)=>{this._checkReadonlyOptions(l),this._core.options[l]=p};for(const l in this._core.options){const p={get:r.bind(this,l),set:s.bind(this,l)};Object.defineProperty(this._publicOptions,l,p)}}_checkReadonlyOptions(o){if(b.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let r="none";switch(this._core.coreMouseService.activeProtocol){case"X10":r="x10";break;case"VT200":r="vt200";break;case"DRAG":r="drag";break;case"ANY":r="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:r,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const r in o)this._publicOptions[r]=o[r]}blur(){this._core.blur()}focus(){this._core.focus()}input(o,r=!0){this._core.input(o,r)}resize(o,r){this._verifyIntegers(o,r),this._core.resize(o,r)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}attachCustomWheelEventHandler(o){this._core.attachCustomWheelEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){return this._checkProposedApi(),this._verifyPositiveIntegers(o.x??0,o.width??0,o.height??0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,r,s){this._verifyIntegers(o,r,s),this._core.select(o,r,s)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,r){this._verifyIntegers(o,r),this._core.selectLines(o,r)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,r){this._core.write(o,r)}writeln(o,r){this._core.write(o),this._core.write(`\r
`,r)}paste(o){this._core.paste(o)}refresh(o,r){this._verifyIntegers(o,r),this._core.refresh(o,r)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return a}_verifyIntegers(...o){for(const r of o)if(r===1/0||isNaN(r)||r%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const r of o)if(r&&(r===1/0||isNaN(r)||r%1!=0||r<0))throw new Error("This API only accepts positive integers")}}j.Terminal=d})(),st})())})(Qa);var tp=Qa.exports,th={exports:{}};(function(ye,Fe){(function(A,tt){ye.exports=tt()})(self,()=>(()=>{var A={};return(()=>{var tt=A;Object.defineProperty(tt,"__esModule",{value:!0}),tt.FitAddon=void 0,tt.FitAddon=class{activate(Be){this._terminal=Be}dispose(){}fit(){const Be=this.proposeDimensions();if(!Be||!this._terminal||isNaN(Be.cols)||isNaN(Be.rows))return;const st=this._terminal._core;this._terminal.rows===Be.rows&&this._terminal.cols===Be.cols||(st._renderService.clear(),this._terminal.resize(Be.cols,Be.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const Be=this._terminal._core,st=Be._renderService.dimensions;if(st.css.cell.width===0||st.css.cell.height===0)return;const j=this._terminal.options.scrollback===0?0:Be.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(a.getPropertyValue("height")),_=Math.max(0,parseInt(a.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),c=u-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),v=_-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-j;return{cols:Math.max(2,Math.floor(v/st.css.cell.width)),rows:Math.max(1,Math.floor(c/st.css.cell.height))}}}})(),A})())})(th);var ip=th.exports,Yr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Yr.exports;(function(ye,Fe){(function(){var A,tt="4.17.21",Be=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",j="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",_=500,m="__lodash_placeholder__",c=1,v=2,S=4,b=1,d=2,n=1,o=2,r=4,s=8,l=16,p=32,g=64,w=128,f=256,y=512,T=30,O="...",P=800,D=16,$=1,X=2,ee=3,se=1/0,Q=9007199254740991,E=17976931348623157e292,k=0/0,M=4294967295,H=M-1,Z=M>>>1,re=[["ary",w],["bind",n],["bindKey",o],["curry",s],["curryRight",l],["flip",y],["partial",p],["partialRight",g],["rearg",f]],le="[object Arguments]",fe="[object Array]",U="[object AsyncFunction]",R="[object Boolean]",J="[object Date]",z="[object DOMException]",ne="[object Error]",ie="[object Function]",we="[object GeneratorFunction]",Ee="[object Map]",Me="[object Number]",Je="[object Null]",ue="[object Object]",zt="[object Promise]",vi="[object Proxy]",It="[object RegExp]",nt="[object Set]",Lt="[object String]",q="[object Symbol]",te="[object Undefined]",he="[object WeakMap]",ze="[object WeakSet]",Ke="[object ArrayBuffer]",it="[object DataView]",Kt="[object Float32Array]",ot="[object Float64Array]",Pt="[object Int8Array]",Ie="[object Int16Array]",jt="[object Int32Array]",Ni="[object Uint8Array]",$i="[object Uint8ClampedArray]",zi="[object Uint16Array]",Ki="[object Uint32Array]",Zr=/\b__p \+= '';/g,Qr=/\b(__p \+=) '' \+/g,de=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qi=/&(?:amp|lt|gt|quot|#39);/g,Ye=/[&<>"']/g,es=RegExp(qi.source),ts=RegExp(Ye.source),ih=/<%-([\s\S]+?)%>/g,rh=/<%([\s\S]+?)%>/g,mn=/<%=([\s\S]+?)%>/g,sh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nh=/^\w*$/,oh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,is=/[\\^$.*+?()[\]{}|]/g,ah=RegExp(is.source),rs=/^\s+/,hh=/\s/,lh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ch=/\{\n\/\* \[wrapped with (.+)\] \*/,uh=/,? & /,fh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dh=/[()=,{}\[\]\/\s]/,_h=/\\(\\)?/g,vh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sn=/\w*$/,ph=/^[-+]0x[0-9a-f]+$/i,gh=/^0b[01]+$/i,mh=/^\[object .+?Constructor\]$/,Sh=/^0o[0-7]+$/i,Ch=/^(?:0|[1-9]\d*)$/,wh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lr=/($^)/,bh=/['\n\r\u2028\u2029\\]/g,cr="\\ud800-\\udfff",yh="\\u0300-\\u036f",Eh="\\ufe20-\\ufe2f",xh="\\u20d0-\\u20ff",Cn=yh+Eh+xh,wn="\\u2700-\\u27bf",bn="a-z\\xdf-\\xf6\\xf8-\\xff",Lh="\\xac\\xb1\\xd7\\xf7",Rh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dh="\\u2000-\\u206f",Ah=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yn="A-Z\\xc0-\\xd6\\xd8-\\xde",En="\\ufe0e\\ufe0f",xn=Lh+Rh+Dh+Ah,ss="['â]",kh="["+cr+"]",Ln="["+xn+"]",ur="["+Cn+"]",Rn="\\d+",Bh="["+wn+"]",Dn="["+bn+"]",An="[^"+cr+xn+Rn+wn+bn+yn+"]",ns="\\ud83c[\\udffb-\\udfff]",Th="(?:"+ur+"|"+ns+")",kn="[^"+cr+"]",os="(?:\\ud83c[\\udde6-\\uddff]){2}",as="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+yn+"]",Bn="\\u200d",Tn="(?:"+Dn+"|"+An+")",Mh="(?:"+Li+"|"+An+")",Mn="(?:"+ss+"(?:d|ll|m|re|s|t|ve))?",On="(?:"+ss+"(?:D|LL|M|RE|S|T|VE))?",In=Th+"?",Pn="["+En+"]?",Oh="(?:"+Bn+"(?:"+[kn,os,as].join("|")+")"+Pn+In+")*",Ih="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ph="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hn=Pn+In+Oh,Hh="(?:"+[Bh,os,as].join("|")+")"+Hn,Fh="(?:"+[kn+ur+"?",ur,os,as,kh].join("|")+")",Wh=RegExp(ss,"g"),Uh=RegExp(ur,"g"),hs=RegExp(ns+"(?="+ns+")|"+Fh+Hn,"g"),Nh=RegExp([Li+"?"+Dn+"+"+Mn+"(?="+[Ln,Li,"$"].join("|")+")",Mh+"+"+On+"(?="+[Ln,Li+Tn,"$"].join("|")+")",Li+"?"+Tn+"+"+Mn,Li+"+"+On,Ph,Ih,Rn,Hh].join("|"),"g"),$h=RegExp("["+Bn+cr+Cn+En+"]"),zh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qh=-1,Ue={};Ue[Kt]=Ue[ot]=Ue[Pt]=Ue[Ie]=Ue[jt]=Ue[Ni]=Ue[$i]=Ue[zi]=Ue[Ki]=!0,Ue[le]=Ue[fe]=Ue[Ke]=Ue[R]=Ue[it]=Ue[J]=Ue[ne]=Ue[ie]=Ue[Ee]=Ue[Me]=Ue[ue]=Ue[It]=Ue[nt]=Ue[Lt]=Ue[he]=!1;var We={};We[le]=We[fe]=We[Ke]=We[it]=We[R]=We[J]=We[Kt]=We[ot]=We[Pt]=We[Ie]=We[jt]=We[Ee]=We[Me]=We[ue]=We[It]=We[nt]=We[Lt]=We[q]=We[Ni]=We[$i]=We[zi]=We[Ki]=!0,We[ne]=We[ie]=We[he]=!1;var Gh={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},Vh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jh=parseFloat,Yh=parseInt,Fn=typeof ar=="object"&&ar&&ar.Object===Object&&ar,Zh=typeof self=="object"&&self&&self.Object===Object&&self,at=Fn||Zh||Function("return this")(),ls=Fe&&!Fe.nodeType&&Fe,pi=ls&&!0&&ye&&!ye.nodeType&&ye,Wn=pi&&pi.exports===ls,cs=Wn&&Fn.process,Rt=function(){try{var F=pi&&pi.require&&pi.require("util").types;return F||cs&&cs.binding&&cs.binding("util")}catch{}}(),Un=Rt&&Rt.isArrayBuffer,Nn=Rt&&Rt.isDate,$n=Rt&&Rt.isMap,zn=Rt&&Rt.isRegExp,Kn=Rt&&Rt.isSet,qn=Rt&&Rt.isTypedArray;function Ct(F,K,N){switch(N.length){case 0:return F.call(K);case 1:return F.call(K,N[0]);case 2:return F.call(K,N[0],N[1]);case 3:return F.call(K,N[0],N[1],N[2])}return F.apply(K,N)}function Qh(F,K,N,ae){for(var ge=-1,Te=F==null?0:F.length;++ge<Te;){var Ze=F[ge];K(ae,Ze,N(Ze),F)}return ae}function Dt(F,K){for(var N=-1,ae=F==null?0:F.length;++N<ae&&K(F[N],N,F)!==!1;);return F}function el(F,K){for(var N=F==null?0:F.length;N--&&K(F[N],N,F)!==!1;);return F}function Gn(F,K){for(var N=-1,ae=F==null?0:F.length;++N<ae;)if(!K(F[N],N,F))return!1;return!0}function oi(F,K){for(var N=-1,ae=F==null?0:F.length,ge=0,Te=[];++N<ae;){var Ze=F[N];K(Ze,N,F)&&(Te[ge++]=Ze)}return Te}function fr(F,K){var N=F==null?0:F.length;return!!N&&Ri(F,K,0)>-1}function us(F,K,N){for(var ae=-1,ge=F==null?0:F.length;++ae<ge;)if(N(K,F[ae]))return!0;return!1}function Ne(F,K){for(var N=-1,ae=F==null?0:F.length,ge=Array(ae);++N<ae;)ge[N]=K(F[N],N,F);return ge}function ai(F,K){for(var N=-1,ae=K.length,ge=F.length;++N<ae;)F[ge+N]=K[N];return F}function fs(F,K,N,ae){var ge=-1,Te=F==null?0:F.length;for(ae&&Te&&(N=F[++ge]);++ge<Te;)N=K(N,F[ge],ge,F);return N}function tl(F,K,N,ae){var ge=F==null?0:F.length;for(ae&&ge&&(N=F[--ge]);ge--;)N=K(N,F[ge],ge,F);return N}function ds(F,K){for(var N=-1,ae=F==null?0:F.length;++N<ae;)if(K(F[N],N,F))return!0;return!1}var il=_s("length");function rl(F){return F.split("")}function sl(F){return F.match(fh)||[]}function Vn(F,K,N){var ae;return N(F,function(ge,Te,Ze){if(K(ge,Te,Ze))return ae=Te,!1}),ae}function dr(F,K,N,ae){for(var ge=F.length,Te=N+(ae?1:-1);ae?Te--:++Te<ge;)if(K(F[Te],Te,F))return Te;return-1}function Ri(F,K,N){return K===K?pl(F,K,N):dr(F,jn,N)}function nl(F,K,N,ae){for(var ge=N-1,Te=F.length;++ge<Te;)if(ae(F[ge],K))return ge;return-1}function jn(F){return F!==F}function Xn(F,K){var N=F==null?0:F.length;return N?ps(F,K)/N:k}function _s(F){return function(K){return K==null?A:K[F]}}function vs(F){return function(K){return F==null?A:F[K]}}function Jn(F,K,N,ae,ge){return ge(F,function(Te,Ze,He){N=ae?(ae=!1,Te):K(N,Te,Ze,He)}),N}function ol(F,K){var N=F.length;for(F.sort(K);N--;)F[N]=F[N].value;return F}function ps(F,K){for(var N,ae=-1,ge=F.length;++ae<ge;){var Te=K(F[ae]);Te!==A&&(N=N===A?Te:N+Te)}return N}function gs(F,K){for(var N=-1,ae=Array(F);++N<F;)ae[N]=K(N);return ae}function al(F,K){return Ne(K,function(N){return[N,F[N]]})}function Yn(F){return F&&F.slice(0,to(F)+1).replace(rs,"")}function wt(F){return function(K){return F(K)}}function ms(F,K){return Ne(K,function(N){return F[N]})}function Gi(F,K){return F.has(K)}function Zn(F,K){for(var N=-1,ae=F.length;++N<ae&&Ri(K,F[N],0)>-1;);return N}function Qn(F,K){for(var N=F.length;N--&&Ri(K,F[N],0)>-1;);return N}function hl(F,K){for(var N=F.length,ae=0;N--;)F[N]===K&&++ae;return ae}var ll=vs(Gh),cl=vs(Vh);function ul(F){return"\\"+Xh[F]}function fl(F,K){return F==null?A:F[K]}function Di(F){return $h.test(F)}function dl(F){return zh.test(F)}function _l(F){for(var K,N=[];!(K=F.next()).done;)N.push(K.value);return N}function Ss(F){var K=-1,N=Array(F.size);return F.forEach(function(ae,ge){N[++K]=[ge,ae]}),N}function eo(F,K){return function(N){return F(K(N))}}function hi(F,K){for(var N=-1,ae=F.length,ge=0,Te=[];++N<ae;){var Ze=F[N];(Ze===K||Ze===m)&&(F[N]=m,Te[ge++]=N)}return Te}function _r(F){var K=-1,N=Array(F.size);return F.forEach(function(ae){N[++K]=ae}),N}function vl(F){var K=-1,N=Array(F.size);return F.forEach(function(ae){N[++K]=[ae,ae]}),N}function pl(F,K,N){for(var ae=N-1,ge=F.length;++ae<ge;)if(F[ae]===K)return ae;return-1}function gl(F,K,N){for(var ae=N+1;ae--;)if(F[ae]===K)return ae;return ae}function Ai(F){return Di(F)?Sl(F):il(F)}function Ht(F){return Di(F)?Cl(F):rl(F)}function to(F){for(var K=F.length;K--&&hh.test(F.charAt(K)););return K}var ml=vs(jh);function Sl(F){for(var K=hs.lastIndex=0;hs.test(F);)++K;return K}function Cl(F){return F.match(hs)||[]}function wl(F){return F.match(Nh)||[]}var bl=function F(K){K=K==null?at:ki.defaults(at.Object(),K,ki.pick(at,Kh));var N=K.Array,ae=K.Date,ge=K.Error,Te=K.Function,Ze=K.Math,He=K.Object,Cs=K.RegExp,yl=K.String,At=K.TypeError,vr=N.prototype,El=Te.prototype,Bi=He.prototype,pr=K["__core-js_shared__"],gr=El.toString,Pe=Bi.hasOwnProperty,xl=0,io=function(){var e=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mr=Bi.toString,Ll=gr.call(He),Rl=at._,Dl=Cs("^"+gr.call(Pe).replace(is,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sr=Wn?K.Buffer:A,li=K.Symbol,Cr=K.Uint8Array,ro=Sr?Sr.allocUnsafe:A,wr=eo(He.getPrototypeOf,He),so=He.create,no=Bi.propertyIsEnumerable,br=vr.splice,oo=li?li.isConcatSpreadable:A,Vi=li?li.iterator:A,gi=li?li.toStringTag:A,yr=function(){try{var e=bi(He,"defineProperty");return e({},"",{}),e}catch{}}(),Al=K.clearTimeout!==at.clearTimeout&&K.clearTimeout,kl=ae&&ae.now!==at.Date.now&&ae.now,Bl=K.setTimeout!==at.setTimeout&&K.setTimeout,Er=Ze.ceil,xr=Ze.floor,ws=He.getOwnPropertySymbols,Tl=Sr?Sr.isBuffer:A,ao=K.isFinite,Ml=vr.join,Ol=eo(He.keys,He),Qe=Ze.max,lt=Ze.min,Il=ae.now,Pl=K.parseInt,ho=Ze.random,Hl=vr.reverse,bs=bi(K,"DataView"),ji=bi(K,"Map"),ys=bi(K,"Promise"),Ti=bi(K,"Set"),Xi=bi(K,"WeakMap"),Ji=bi(He,"create"),Lr=Xi&&new Xi,Mi={},Fl=yi(bs),Wl=yi(ji),Ul=yi(ys),Nl=yi(Ti),$l=yi(Xi),Rr=li?li.prototype:A,Yi=Rr?Rr.valueOf:A,lo=Rr?Rr.toString:A;function x(e){if(qe(e)&&!me(e)&&!(e instanceof De)){if(e instanceof kt)return e;if(Pe.call(e,"__wrapped__"))return ua(e)}return new kt(e)}var Oi=function(){function e(){}return function(t){if(!$e(t))return{};if(so)return so(t);e.prototype=t;var i=new e;return e.prototype=A,i}}();function Dr(){}function kt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=A}x.templateSettings={escape:ih,evaluate:rh,interpolate:mn,variable:"",imports:{_:x}},x.prototype=Dr.prototype,x.prototype.constructor=x,kt.prototype=Oi(Dr.prototype),kt.prototype.constructor=kt;function De(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function zl(){var e=new De(this.__wrapped__);return e.__actions__=vt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vt(this.__views__),e}function Kl(){if(this.__filtered__){var e=new De(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ql(){var e=this.__wrapped__.value(),t=this.__dir__,i=me(e),h=t<0,C=i?e.length:0,L=ru(0,C,this.__views__),B=L.start,I=L.end,W=I-B,G=h?I:B-1,V=this.__iteratees__,Y=V.length,oe=0,ce=lt(W,this.__takeCount__);if(!i||!h&&C==W&&ce==W)return Oo(e,this.__actions__);var ve=[];e:for(;W--&&oe<ce;){G+=t;for(var Ce=-1,pe=e[G];++Ce<Y;){var xe=V[Ce],Ae=xe.iteratee,Et=xe.type,_t=Ae(pe);if(Et==X)pe=_t;else if(!_t){if(Et==$)continue e;break e}}ve[oe++]=pe}return ve}De.prototype=Oi(Dr.prototype),De.prototype.constructor=De;function mi(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var h=e[t];this.set(h[0],h[1])}}function Gl(){this.__data__=Ji?Ji(null):{},this.size=0}function Vl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function jl(e){var t=this.__data__;if(Ji){var i=t[e];return i===u?A:i}return Pe.call(t,e)?t[e]:A}function Xl(e){var t=this.__data__;return Ji?t[e]!==A:Pe.call(t,e)}function Jl(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ji&&t===A?u:t,this}mi.prototype.clear=Gl,mi.prototype.delete=Vl,mi.prototype.get=jl,mi.prototype.has=Xl,mi.prototype.set=Jl;function Xt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var h=e[t];this.set(h[0],h[1])}}function Yl(){this.__data__=[],this.size=0}function Zl(e){var t=this.__data__,i=Ar(t,e);if(i<0)return!1;var h=t.length-1;return i==h?t.pop():br.call(t,i,1),--this.size,!0}function Ql(e){var t=this.__data__,i=Ar(t,e);return i<0?A:t[i][1]}function ec(e){return Ar(this.__data__,e)>-1}function tc(e,t){var i=this.__data__,h=Ar(i,e);return h<0?(++this.size,i.push([e,t])):i[h][1]=t,this}Xt.prototype.clear=Yl,Xt.prototype.delete=Zl,Xt.prototype.get=Ql,Xt.prototype.has=ec,Xt.prototype.set=tc;function Jt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var h=e[t];this.set(h[0],h[1])}}function ic(){this.size=0,this.__data__={hash:new mi,map:new(ji||Xt),string:new mi}}function rc(e){var t=Nr(this,e).delete(e);return this.size-=t?1:0,t}function sc(e){return Nr(this,e).get(e)}function nc(e){return Nr(this,e).has(e)}function oc(e,t){var i=Nr(this,e),h=i.size;return i.set(e,t),this.size+=i.size==h?0:1,this}Jt.prototype.clear=ic,Jt.prototype.delete=rc,Jt.prototype.get=sc,Jt.prototype.has=nc,Jt.prototype.set=oc;function Si(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Jt;++t<i;)this.add(e[t])}function ac(e){return this.__data__.set(e,u),this}function hc(e){return this.__data__.has(e)}Si.prototype.add=Si.prototype.push=ac,Si.prototype.has=hc;function Ft(e){var t=this.__data__=new Xt(e);this.size=t.size}function lc(){this.__data__=new Xt,this.size=0}function cc(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function uc(e){return this.__data__.get(e)}function fc(e){return this.__data__.has(e)}function dc(e,t){var i=this.__data__;if(i instanceof Xt){var h=i.__data__;if(!ji||h.length<Be-1)return h.push([e,t]),this.size=++i.size,this;i=this.__data__=new Jt(h)}return i.set(e,t),this.size=i.size,this}Ft.prototype.clear=lc,Ft.prototype.delete=cc,Ft.prototype.get=uc,Ft.prototype.has=fc,Ft.prototype.set=dc;function co(e,t){var i=me(e),h=!i&&Ei(e),C=!i&&!h&&_i(e),L=!i&&!h&&!C&&Fi(e),B=i||h||C||L,I=B?gs(e.length,yl):[],W=I.length;for(var G in e)(t||Pe.call(e,G))&&!(B&&(G=="length"||C&&(G=="offset"||G=="parent")||L&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||ei(G,W)))&&I.push(G);return I}function uo(e){var t=e.length;return t?e[Os(0,t-1)]:A}function _c(e,t){return $r(vt(e),Ci(t,0,e.length))}function vc(e){return $r(vt(e))}function Es(e,t,i){(i!==A&&!Wt(e[t],i)||i===A&&!(t in e))&&Yt(e,t,i)}function Zi(e,t,i){var h=e[t];(!(Pe.call(e,t)&&Wt(h,i))||i===A&&!(t in e))&&Yt(e,t,i)}function Ar(e,t){for(var i=e.length;i--;)if(Wt(e[i][0],t))return i;return-1}function pc(e,t,i,h){return ci(e,function(C,L,B){t(h,C,i(C),B)}),h}function fo(e,t){return e&&Gt(t,rt(t),e)}function gc(e,t){return e&&Gt(t,gt(t),e)}function Yt(e,t,i){t=="__proto__"&&yr?yr(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function xs(e,t){for(var i=-1,h=t.length,C=N(h),L=e==null;++i<h;)C[i]=L?A:on(e,t[i]);return C}function Ci(e,t,i){return e===e&&(i!==A&&(e=e<=i?e:i),t!==A&&(e=e>=t?e:t)),e}function Bt(e,t,i,h,C,L){var B,I=t&c,W=t&v,G=t&S;if(i&&(B=C?i(e,h,C,L):i(e)),B!==A)return B;if(!$e(e))return e;var V=me(e);if(V){if(B=nu(e),!I)return vt(e,B)}else{var Y=ct(e),oe=Y==ie||Y==we;if(_i(e))return Ho(e,I);if(Y==ue||Y==le||oe&&!C){if(B=W||oe?{}:ia(e),!I)return W?jc(e,gc(B,e)):Vc(e,fo(B,e))}else{if(!We[Y])return C?e:{};B=ou(e,Y,I)}}L||(L=new Ft);var ce=L.get(e);if(ce)return ce;L.set(e,B),Ba(e)?e.forEach(function(pe){B.add(Bt(pe,t,i,pe,e,L))}):Aa(e)&&e.forEach(function(pe,xe){B.set(xe,Bt(pe,t,i,xe,e,L))});var ve=G?W?qs:Ks:W?gt:rt,Ce=V?A:ve(e);return Dt(Ce||e,function(pe,xe){Ce&&(xe=pe,pe=e[xe]),Zi(B,xe,Bt(pe,t,i,xe,e,L))}),B}function mc(e){var t=rt(e);return function(i){return _o(i,e,t)}}function _o(e,t,i){var h=i.length;if(e==null)return!h;for(e=He(e);h--;){var C=i[h],L=t[C],B=e[C];if(B===A&&!(C in e)||!L(B))return!1}return!0}function vo(e,t,i){if(typeof e!="function")throw new At(j);return nr(function(){e.apply(A,i)},t)}function Qi(e,t,i,h){var C=-1,L=fr,B=!0,I=e.length,W=[],G=t.length;if(!I)return W;i&&(t=Ne(t,wt(i))),h?(L=us,B=!1):t.length>=Be&&(L=Gi,B=!1,t=new Si(t));e:for(;++C<I;){var V=e[C],Y=i==null?V:i(V);if(V=h||V!==0?V:0,B&&Y===Y){for(var oe=G;oe--;)if(t[oe]===Y)continue e;W.push(V)}else L(t,Y,h)||W.push(V)}return W}var ci=$o(qt),po=$o(Rs,!0);function Sc(e,t){var i=!0;return ci(e,function(h,C,L){return i=!!t(h,C,L),i}),i}function kr(e,t,i){for(var h=-1,C=e.length;++h<C;){var L=e[h],B=t(L);if(B!=null&&(I===A?B===B&&!yt(B):i(B,I)))var I=B,W=L}return W}function Cc(e,t,i,h){var C=e.length;for(i=Se(i),i<0&&(i=-i>C?0:C+i),h=h===A||h>C?C:Se(h),h<0&&(h+=C),h=i>h?0:Ma(h);i<h;)e[i++]=t;return e}function go(e,t){var i=[];return ci(e,function(h,C,L){t(h,C,L)&&i.push(h)}),i}function ht(e,t,i,h,C){var L=-1,B=e.length;for(i||(i=hu),C||(C=[]);++L<B;){var I=e[L];t>0&&i(I)?t>1?ht(I,t-1,i,h,C):ai(C,I):h||(C[C.length]=I)}return C}var Ls=zo(),mo=zo(!0);function qt(e,t){return e&&Ls(e,t,rt)}function Rs(e,t){return e&&mo(e,t,rt)}function Br(e,t){return oi(t,function(i){return ti(e[i])})}function wi(e,t){t=fi(t,e);for(var i=0,h=t.length;e!=null&&i<h;)e=e[Vt(t[i++])];return i&&i==h?e:A}function So(e,t,i){var h=t(e);return me(e)?h:ai(h,i(e))}function ft(e){return e==null?e===A?te:Je:gi&&gi in He(e)?iu(e):vu(e)}function Ds(e,t){return e>t}function wc(e,t){return e!=null&&Pe.call(e,t)}function bc(e,t){return e!=null&&t in He(e)}function yc(e,t,i){return e>=lt(t,i)&&e<Qe(t,i)}function As(e,t,i){for(var h=i?us:fr,C=e[0].length,L=e.length,B=L,I=N(L),W=1/0,G=[];B--;){var V=e[B];B&&t&&(V=Ne(V,wt(t))),W=lt(V.length,W),I[B]=!i&&(t||C>=120&&V.length>=120)?new Si(B&&V):A}V=e[0];var Y=-1,oe=I[0];e:for(;++Y<C&&G.length<W;){var ce=V[Y],ve=t?t(ce):ce;if(ce=i||ce!==0?ce:0,!(oe?Gi(oe,ve):h(G,ve,i))){for(B=L;--B;){var Ce=I[B];if(!(Ce?Gi(Ce,ve):h(e[B],ve,i)))continue e}oe&&oe.push(ve),G.push(ce)}}return G}function Ec(e,t,i,h){return qt(e,function(C,L,B){t(h,i(C),L,B)}),h}function er(e,t,i){t=fi(t,e),e=oa(e,t);var h=e==null?e:e[Vt(Mt(t))];return h==null?A:Ct(h,e,i)}function Co(e){return qe(e)&&ft(e)==le}function xc(e){return qe(e)&&ft(e)==Ke}function Lc(e){return qe(e)&&ft(e)==J}function tr(e,t,i,h,C){return e===t?!0:e==null||t==null||!qe(e)&&!qe(t)?e!==e&&t!==t:Rc(e,t,i,h,tr,C)}function Rc(e,t,i,h,C,L){var B=me(e),I=me(t),W=B?fe:ct(e),G=I?fe:ct(t);W=W==le?ue:W,G=G==le?ue:G;var V=W==ue,Y=G==ue,oe=W==G;if(oe&&_i(e)){if(!_i(t))return!1;B=!0,V=!1}if(oe&&!V)return L||(L=new Ft),B||Fi(e)?Qo(e,t,i,h,C,L):eu(e,t,W,i,h,C,L);if(!(i&b)){var ce=V&&Pe.call(e,"__wrapped__"),ve=Y&&Pe.call(t,"__wrapped__");if(ce||ve){var Ce=ce?e.value():e,pe=ve?t.value():t;return L||(L=new Ft),C(Ce,pe,i,h,L)}}return oe?(L||(L=new Ft),tu(e,t,i,h,C,L)):!1}function Dc(e){return qe(e)&&ct(e)==Ee}function ks(e,t,i,h){var C=i.length,L=C,B=!h;if(e==null)return!L;for(e=He(e);C--;){var I=i[C];if(B&&I[2]?I[1]!==e[I[0]]:!(I[0]in e))return!1}for(;++C<L;){I=i[C];var W=I[0],G=e[W],V=I[1];if(B&&I[2]){if(G===A&&!(W in e))return!1}else{var Y=new Ft;if(h)var oe=h(G,V,W,e,t,Y);if(!(oe===A?tr(V,G,b|d,h,Y):oe))return!1}}return!0}function wo(e){if(!$e(e)||cu(e))return!1;var t=ti(e)?Dl:mh;return t.test(yi(e))}function Ac(e){return qe(e)&&ft(e)==It}function kc(e){return qe(e)&&ct(e)==nt}function Bc(e){return qe(e)&&jr(e.length)&&!!Ue[ft(e)]}function bo(e){return typeof e=="function"?e:e==null?mt:typeof e=="object"?me(e)?xo(e[0],e[1]):Eo(e):Ka(e)}function Bs(e){if(!sr(e))return Ol(e);var t=[];for(var i in He(e))Pe.call(e,i)&&i!="constructor"&&t.push(i);return t}function Tc(e){if(!$e(e))return _u(e);var t=sr(e),i=[];for(var h in e)h=="constructor"&&(t||!Pe.call(e,h))||i.push(h);return i}function Ts(e,t){return e<t}function yo(e,t){var i=-1,h=pt(e)?N(e.length):[];return ci(e,function(C,L,B){h[++i]=t(C,L,B)}),h}function Eo(e){var t=Vs(e);return t.length==1&&t[0][2]?sa(t[0][0],t[0][1]):function(i){return i===e||ks(i,e,t)}}function xo(e,t){return Xs(e)&&ra(t)?sa(Vt(e),t):function(i){var h=on(i,e);return h===A&&h===t?an(i,e):tr(t,h,b|d)}}function Tr(e,t,i,h,C){e!==t&&Ls(t,function(L,B){if(C||(C=new Ft),$e(L))Mc(e,t,B,i,Tr,h,C);else{var I=h?h(Ys(e,B),L,B+"",e,t,C):A;I===A&&(I=L),Es(e,B,I)}},gt)}function Mc(e,t,i,h,C,L,B){var I=Ys(e,i),W=Ys(t,i),G=B.get(W);if(G){Es(e,i,G);return}var V=L?L(I,W,i+"",e,t,B):A,Y=V===A;if(Y){var oe=me(W),ce=!oe&&_i(W),ve=!oe&&!ce&&Fi(W);V=W,oe||ce||ve?me(I)?V=I:Ve(I)?V=vt(I):ce?(Y=!1,V=Ho(W,!0)):ve?(Y=!1,V=Fo(W,!0)):V=[]:or(W)||Ei(W)?(V=I,Ei(I)?V=Oa(I):(!$e(I)||ti(I))&&(V=ia(W))):Y=!1}Y&&(B.set(W,V),C(V,W,h,L,B),B.delete(W)),Es(e,i,V)}function Lo(e,t){var i=e.length;if(i)return t+=t<0?i:0,ei(t,i)?e[t]:A}function Ro(e,t,i){t.length?t=Ne(t,function(L){return me(L)?function(B){return wi(B,L.length===1?L[0]:L)}:L}):t=[mt];var h=-1;t=Ne(t,wt(_e()));var C=yo(e,function(L,B,I){var W=Ne(t,function(G){return G(L)});return{criteria:W,index:++h,value:L}});return ol(C,function(L,B){return Gc(L,B,i)})}function Oc(e,t){return Do(e,t,function(i,h){return an(e,h)})}function Do(e,t,i){for(var h=-1,C=t.length,L={};++h<C;){var B=t[h],I=wi(e,B);i(I,B)&&ir(L,fi(B,e),I)}return L}function Ic(e){return function(t){return wi(t,e)}}function Ms(e,t,i,h){var C=h?nl:Ri,L=-1,B=t.length,I=e;for(e===t&&(t=vt(t)),i&&(I=Ne(e,wt(i)));++L<B;)for(var W=0,G=t[L],V=i?i(G):G;(W=C(I,V,W,h))>-1;)I!==e&&br.call(I,W,1),br.call(e,W,1);return e}function Ao(e,t){for(var i=e?t.length:0,h=i-1;i--;){var C=t[i];if(i==h||C!==L){var L=C;ei(C)?br.call(e,C,1):Hs(e,C)}}return e}function Os(e,t){return e+xr(ho()*(t-e+1))}function Pc(e,t,i,h){for(var C=-1,L=Qe(Er((t-e)/(i||1)),0),B=N(L);L--;)B[h?L:++C]=e,e+=i;return B}function Is(e,t){var i="";if(!e||t<1||t>Q)return i;do t%2&&(i+=e),t=xr(t/2),t&&(e+=e);while(t);return i}function be(e,t){return Zs(na(e,t,mt),e+"")}function Hc(e){return uo(Wi(e))}function Fc(e,t){var i=Wi(e);return $r(i,Ci(t,0,i.length))}function ir(e,t,i,h){if(!$e(e))return e;t=fi(t,e);for(var C=-1,L=t.length,B=L-1,I=e;I!=null&&++C<L;){var W=Vt(t[C]),G=i;if(W==="__proto__"||W==="constructor"||W==="prototype")return e;if(C!=B){var V=I[W];G=h?h(V,W,I):A,G===A&&(G=$e(V)?V:ei(t[C+1])?[]:{})}Zi(I,W,G),I=I[W]}return e}var ko=Lr?function(e,t){return Lr.set(e,t),e}:mt,Wc=yr?function(e,t){return yr(e,"toString",{configurable:!0,enumerable:!1,value:ln(t),writable:!0})}:mt;function Uc(e){return $r(Wi(e))}function Tt(e,t,i){var h=-1,C=e.length;t<0&&(t=-t>C?0:C+t),i=i>C?C:i,i<0&&(i+=C),C=t>i?0:i-t>>>0,t>>>=0;for(var L=N(C);++h<C;)L[h]=e[h+t];return L}function Nc(e,t){var i;return ci(e,function(h,C,L){return i=t(h,C,L),!i}),!!i}function Mr(e,t,i){var h=0,C=e==null?h:e.length;if(typeof t=="number"&&t===t&&C<=Z){for(;h<C;){var L=h+C>>>1,B=e[L];B!==null&&!yt(B)&&(i?B<=t:B<t)?h=L+1:C=L}return C}return Ps(e,t,mt,i)}function Ps(e,t,i,h){var C=0,L=e==null?0:e.length;if(L===0)return 0;t=i(t);for(var B=t!==t,I=t===null,W=yt(t),G=t===A;C<L;){var V=xr((C+L)/2),Y=i(e[V]),oe=Y!==A,ce=Y===null,ve=Y===Y,Ce=yt(Y);if(B)var pe=h||ve;else G?pe=ve&&(h||oe):I?pe=ve&&oe&&(h||!ce):W?pe=ve&&oe&&!ce&&(h||!Ce):ce||Ce?pe=!1:pe=h?Y<=t:Y<t;pe?C=V+1:L=V}return lt(L,H)}function Bo(e,t){for(var i=-1,h=e.length,C=0,L=[];++i<h;){var B=e[i],I=t?t(B):B;if(!i||!Wt(I,W)){var W=I;L[C++]=B===0?0:B}}return L}function To(e){return typeof e=="number"?e:yt(e)?k:+e}function bt(e){if(typeof e=="string")return e;if(me(e))return Ne(e,bt)+"";if(yt(e))return lo?lo.call(e):"";var t=e+"";return t=="0"&&1/e==-se?"-0":t}function ui(e,t,i){var h=-1,C=fr,L=e.length,B=!0,I=[],W=I;if(i)B=!1,C=us;else if(L>=Be){var G=t?null:Zc(e);if(G)return _r(G);B=!1,C=Gi,W=new Si}else W=t?[]:I;e:for(;++h<L;){var V=e[h],Y=t?t(V):V;if(V=i||V!==0?V:0,B&&Y===Y){for(var oe=W.length;oe--;)if(W[oe]===Y)continue e;t&&W.push(Y),I.push(V)}else C(W,Y,i)||(W!==I&&W.push(Y),I.push(V))}return I}function Hs(e,t){return t=fi(t,e),e=oa(e,t),e==null||delete e[Vt(Mt(t))]}function Mo(e,t,i,h){return ir(e,t,i(wi(e,t)),h)}function Or(e,t,i,h){for(var C=e.length,L=h?C:-1;(h?L--:++L<C)&&t(e[L],L,e););return i?Tt(e,h?0:L,h?L+1:C):Tt(e,h?L+1:0,h?C:L)}function Oo(e,t){var i=e;return i instanceof De&&(i=i.value()),fs(t,function(h,C){return C.func.apply(C.thisArg,ai([h],C.args))},i)}function Fs(e,t,i){var h=e.length;if(h<2)return h?ui(e[0]):[];for(var C=-1,L=N(h);++C<h;)for(var B=e[C],I=-1;++I<h;)I!=C&&(L[C]=Qi(L[C]||B,e[I],t,i));return ui(ht(L,1),t,i)}function Io(e,t,i){for(var h=-1,C=e.length,L=t.length,B={};++h<C;){var I=h<L?t[h]:A;i(B,e[h],I)}return B}function Ws(e){return Ve(e)?e:[]}function Us(e){return typeof e=="function"?e:mt}function fi(e,t){return me(e)?e:Xs(e,t)?[e]:ca(Oe(e))}var $c=be;function di(e,t,i){var h=e.length;return i=i===A?h:i,!t&&i>=h?e:Tt(e,t,i)}var Po=Al||function(e){return at.clearTimeout(e)};function Ho(e,t){if(t)return e.slice();var i=e.length,h=ro?ro(i):new e.constructor(i);return e.copy(h),h}function Ns(e){var t=new e.constructor(e.byteLength);return new Cr(t).set(new Cr(e)),t}function zc(e,t){var i=t?Ns(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Kc(e){var t=new e.constructor(e.source,Sn.exec(e));return t.lastIndex=e.lastIndex,t}function qc(e){return Yi?He(Yi.call(e)):{}}function Fo(e,t){var i=t?Ns(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Wo(e,t){if(e!==t){var i=e!==A,h=e===null,C=e===e,L=yt(e),B=t!==A,I=t===null,W=t===t,G=yt(t);if(!I&&!G&&!L&&e>t||L&&B&&W&&!I&&!G||h&&B&&W||!i&&W||!C)return 1;if(!h&&!L&&!G&&e<t||G&&i&&C&&!h&&!L||I&&i&&C||!B&&C||!W)return-1}return 0}function Gc(e,t,i){for(var h=-1,C=e.criteria,L=t.criteria,B=C.length,I=i.length;++h<B;){var W=Wo(C[h],L[h]);if(W){if(h>=I)return W;var G=i[h];return W*(G=="desc"?-1:1)}}return e.index-t.index}function Uo(e,t,i,h){for(var C=-1,L=e.length,B=i.length,I=-1,W=t.length,G=Qe(L-B,0),V=N(W+G),Y=!h;++I<W;)V[I]=t[I];for(;++C<B;)(Y||C<L)&&(V[i[C]]=e[C]);for(;G--;)V[I++]=e[C++];return V}function No(e,t,i,h){for(var C=-1,L=e.length,B=-1,I=i.length,W=-1,G=t.length,V=Qe(L-I,0),Y=N(V+G),oe=!h;++C<V;)Y[C]=e[C];for(var ce=C;++W<G;)Y[ce+W]=t[W];for(;++B<I;)(oe||C<L)&&(Y[ce+i[B]]=e[C++]);return Y}function vt(e,t){var i=-1,h=e.length;for(t||(t=N(h));++i<h;)t[i]=e[i];return t}function Gt(e,t,i,h){var C=!i;i||(i={});for(var L=-1,B=t.length;++L<B;){var I=t[L],W=h?h(i[I],e[I],I,i,e):A;W===A&&(W=e[I]),C?Yt(i,I,W):Zi(i,I,W)}return i}function Vc(e,t){return Gt(e,js(e),t)}function jc(e,t){return Gt(e,ea(e),t)}function Ir(e,t){return function(i,h){var C=me(i)?Qh:pc,L=t?t():{};return C(i,e,_e(h,2),L)}}function Ii(e){return be(function(t,i){var h=-1,C=i.length,L=C>1?i[C-1]:A,B=C>2?i[2]:A;for(L=e.length>3&&typeof L=="function"?(C--,L):A,B&&dt(i[0],i[1],B)&&(L=C<3?A:L,C=1),t=He(t);++h<C;){var I=i[h];I&&e(t,I,h,L)}return t})}function $o(e,t){return function(i,h){if(i==null)return i;if(!pt(i))return e(i,h);for(var C=i.length,L=t?C:-1,B=He(i);(t?L--:++L<C)&&h(B[L],L,B)!==!1;);return i}}function zo(e){return function(t,i,h){for(var C=-1,L=He(t),B=h(t),I=B.length;I--;){var W=B[e?I:++C];if(i(L[W],W,L)===!1)break}return t}}function Xc(e,t,i){var h=t&n,C=rr(e);function L(){var B=this&&this!==at&&this instanceof L?C:e;return B.apply(h?i:this,arguments)}return L}function Ko(e){return function(t){t=Oe(t);var i=Di(t)?Ht(t):A,h=i?i[0]:t.charAt(0),C=i?di(i,1).join(""):t.slice(1);return h[e]()+C}}function Pi(e){return function(t){return fs($a(Na(t).replace(Wh,"")),e,"")}}function rr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Oi(e.prototype),h=e.apply(i,t);return $e(h)?h:i}}function Jc(e,t,i){var h=rr(e);function C(){for(var L=arguments.length,B=N(L),I=L,W=Hi(C);I--;)B[I]=arguments[I];var G=L<3&&B[0]!==W&&B[L-1]!==W?[]:hi(B,W);if(L-=G.length,L<i)return Xo(e,t,Pr,C.placeholder,A,B,G,A,A,i-L);var V=this&&this!==at&&this instanceof C?h:e;return Ct(V,this,B)}return C}function qo(e){return function(t,i,h){var C=He(t);if(!pt(t)){var L=_e(i,3);t=rt(t),i=function(I){return L(C[I],I,C)}}var B=e(t,i,h);return B>-1?C[L?t[B]:B]:A}}function Go(e){return Qt(function(t){var i=t.length,h=i,C=kt.prototype.thru;for(e&&t.reverse();h--;){var L=t[h];if(typeof L!="function")throw new At(j);if(C&&!B&&Ur(L)=="wrapper")var B=new kt([],!0)}for(h=B?h:i;++h<i;){L=t[h];var I=Ur(L),W=I=="wrapper"?Gs(L):A;W&&Js(W[0])&&W[1]==(w|s|p|f)&&!W[4].length&&W[9]==1?B=B[Ur(W[0])].apply(B,W[3]):B=L.length==1&&Js(L)?B[I]():B.thru(L)}return function(){var G=arguments,V=G[0];if(B&&G.length==1&&me(V))return B.plant(V).value();for(var Y=0,oe=i?t[Y].apply(this,G):V;++Y<i;)oe=t[Y].call(this,oe);return oe}})}function Pr(e,t,i,h,C,L,B,I,W,G){var V=t&w,Y=t&n,oe=t&o,ce=t&(s|l),ve=t&y,Ce=oe?A:rr(e);function pe(){for(var xe=arguments.length,Ae=N(xe),Et=xe;Et--;)Ae[Et]=arguments[Et];if(ce)var _t=Hi(pe),xt=hl(Ae,_t);if(h&&(Ae=Uo(Ae,h,C,ce)),L&&(Ae=No(Ae,L,B,ce)),xe-=xt,ce&&xe<G){var je=hi(Ae,_t);return Xo(e,t,Pr,pe.placeholder,i,Ae,je,I,W,G-xe)}var Ut=Y?i:this,ri=oe?Ut[e]:e;return xe=Ae.length,I?Ae=pu(Ae,I):ve&&xe>1&&Ae.reverse(),V&&W<xe&&(Ae.length=W),this&&this!==at&&this instanceof pe&&(ri=Ce||rr(ri)),ri.apply(Ut,Ae)}return pe}function Vo(e,t){return function(i,h){return Ec(i,e,t(h),{})}}function Hr(e,t){return function(i,h){var C;if(i===A&&h===A)return t;if(i!==A&&(C=i),h!==A){if(C===A)return h;typeof i=="string"||typeof h=="string"?(i=bt(i),h=bt(h)):(i=To(i),h=To(h)),C=e(i,h)}return C}}function $s(e){return Qt(function(t){return t=Ne(t,wt(_e())),be(function(i){var h=this;return e(t,function(C){return Ct(C,h,i)})})})}function Fr(e,t){t=t===A?" ":bt(t);var i=t.length;if(i<2)return i?Is(t,e):t;var h=Is(t,Er(e/Ai(t)));return Di(t)?di(Ht(h),0,e).join(""):h.slice(0,e)}function Yc(e,t,i,h){var C=t&n,L=rr(e);function B(){for(var I=-1,W=arguments.length,G=-1,V=h.length,Y=N(V+W),oe=this&&this!==at&&this instanceof B?L:e;++G<V;)Y[G]=h[G];for(;W--;)Y[G++]=arguments[++I];return Ct(oe,C?i:this,Y)}return B}function jo(e){return function(t,i,h){return h&&typeof h!="number"&&dt(t,i,h)&&(i=h=A),t=ii(t),i===A?(i=t,t=0):i=ii(i),h=h===A?t<i?1:-1:ii(h),Pc(t,i,h,e)}}function Wr(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=Ot(t),i=Ot(i)),e(t,i)}}function Xo(e,t,i,h,C,L,B,I,W,G){var V=t&s,Y=V?B:A,oe=V?A:B,ce=V?L:A,ve=V?A:L;t|=V?p:g,t&=~(V?g:p),t&r||(t&=~(n|o));var Ce=[e,t,C,ce,Y,ve,oe,I,W,G],pe=i.apply(A,Ce);return Js(e)&&aa(pe,Ce),pe.placeholder=h,ha(pe,e,t)}function zs(e){var t=Ze[e];return function(i,h){if(i=Ot(i),h=h==null?0:lt(Se(h),292),h&&ao(i)){var C=(Oe(i)+"e").split("e"),L=t(C[0]+"e"+(+C[1]+h));return C=(Oe(L)+"e").split("e"),+(C[0]+"e"+(+C[1]-h))}return t(i)}}var Zc=Ti&&1/_r(new Ti([,-0]))[1]==se?function(e){return new Ti(e)}:fn;function Jo(e){return function(t){var i=ct(t);return i==Ee?Ss(t):i==nt?vl(t):al(t,e(t))}}function Zt(e,t,i,h,C,L,B,I){var W=t&o;if(!W&&typeof e!="function")throw new At(j);var G=h?h.length:0;if(G||(t&=~(p|g),h=C=A),B=B===A?B:Qe(Se(B),0),I=I===A?I:Se(I),G-=C?C.length:0,t&g){var V=h,Y=C;h=C=A}var oe=W?A:Gs(e),ce=[e,t,i,h,C,V,Y,L,B,I];if(oe&&du(ce,oe),e=ce[0],t=ce[1],i=ce[2],h=ce[3],C=ce[4],I=ce[9]=ce[9]===A?W?0:e.length:Qe(ce[9]-G,0),!I&&t&(s|l)&&(t&=~(s|l)),!t||t==n)var ve=Xc(e,t,i);else t==s||t==l?ve=Jc(e,t,I):(t==p||t==(n|p))&&!C.length?ve=Yc(e,t,i,h):ve=Pr.apply(A,ce);var Ce=oe?ko:aa;return ha(Ce(ve,ce),e,t)}function Yo(e,t,i,h){return e===A||Wt(e,Bi[i])&&!Pe.call(h,i)?t:e}function Zo(e,t,i,h,C,L){return $e(e)&&$e(t)&&(L.set(t,e),Tr(e,t,A,Zo,L),L.delete(t)),e}function Qc(e){return or(e)?A:e}function Qo(e,t,i,h,C,L){var B=i&b,I=e.length,W=t.length;if(I!=W&&!(B&&W>I))return!1;var G=L.get(e),V=L.get(t);if(G&&V)return G==t&&V==e;var Y=-1,oe=!0,ce=i&d?new Si:A;for(L.set(e,t),L.set(t,e);++Y<I;){var ve=e[Y],Ce=t[Y];if(h)var pe=B?h(Ce,ve,Y,t,e,L):h(ve,Ce,Y,e,t,L);if(pe!==A){if(pe)continue;oe=!1;break}if(ce){if(!ds(t,function(xe,Ae){if(!Gi(ce,Ae)&&(ve===xe||C(ve,xe,i,h,L)))return ce.push(Ae)})){oe=!1;break}}else if(!(ve===Ce||C(ve,Ce,i,h,L))){oe=!1;break}}return L.delete(e),L.delete(t),oe}function eu(e,t,i,h,C,L,B){switch(i){case it:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ke:return!(e.byteLength!=t.byteLength||!L(new Cr(e),new Cr(t)));case R:case J:case Me:return Wt(+e,+t);case ne:return e.name==t.name&&e.message==t.message;case It:case Lt:return e==t+"";case Ee:var I=Ss;case nt:var W=h&b;if(I||(I=_r),e.size!=t.size&&!W)return!1;var G=B.get(e);if(G)return G==t;h|=d,B.set(e,t);var V=Qo(I(e),I(t),h,C,L,B);return B.delete(e),V;case q:if(Yi)return Yi.call(e)==Yi.call(t)}return!1}function tu(e,t,i,h,C,L){var B=i&b,I=Ks(e),W=I.length,G=Ks(t),V=G.length;if(W!=V&&!B)return!1;for(var Y=W;Y--;){var oe=I[Y];if(!(B?oe in t:Pe.call(t,oe)))return!1}var ce=L.get(e),ve=L.get(t);if(ce&&ve)return ce==t&&ve==e;var Ce=!0;L.set(e,t),L.set(t,e);for(var pe=B;++Y<W;){oe=I[Y];var xe=e[oe],Ae=t[oe];if(h)var Et=B?h(Ae,xe,oe,t,e,L):h(xe,Ae,oe,e,t,L);if(!(Et===A?xe===Ae||C(xe,Ae,i,h,L):Et)){Ce=!1;break}pe||(pe=oe=="constructor")}if(Ce&&!pe){var _t=e.constructor,xt=t.constructor;_t!=xt&&"constructor"in e&&"constructor"in t&&!(typeof _t=="function"&&_t instanceof _t&&typeof xt=="function"&&xt instanceof xt)&&(Ce=!1)}return L.delete(e),L.delete(t),Ce}function Qt(e){return Zs(na(e,A,_a),e+"")}function Ks(e){return So(e,rt,js)}function qs(e){return So(e,gt,ea)}var Gs=Lr?function(e){return Lr.get(e)}:fn;function Ur(e){for(var t=e.name+"",i=Mi[t],h=Pe.call(Mi,t)?i.length:0;h--;){var C=i[h],L=C.func;if(L==null||L==e)return C.name}return t}function Hi(e){var t=Pe.call(x,"placeholder")?x:e;return t.placeholder}function _e(){var e=x.iteratee||cn;return e=e===cn?bo:e,arguments.length?e(arguments[0],arguments[1]):e}function Nr(e,t){var i=e.__data__;return lu(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Vs(e){for(var t=rt(e),i=t.length;i--;){var h=t[i],C=e[h];t[i]=[h,C,ra(C)]}return t}function bi(e,t){var i=fl(e,t);return wo(i)?i:A}function iu(e){var t=Pe.call(e,gi),i=e[gi];try{e[gi]=A;var h=!0}catch{}var C=mr.call(e);return h&&(t?e[gi]=i:delete e[gi]),C}var js=ws?function(e){return e==null?[]:(e=He(e),oi(ws(e),function(t){return no.call(e,t)}))}:dn,ea=ws?function(e){for(var t=[];e;)ai(t,js(e)),e=wr(e);return t}:dn,ct=ft;(bs&&ct(new bs(new ArrayBuffer(1)))!=it||ji&&ct(new ji)!=Ee||ys&&ct(ys.resolve())!=zt||Ti&&ct(new Ti)!=nt||Xi&&ct(new Xi)!=he)&&(ct=function(e){var t=ft(e),i=t==ue?e.constructor:A,h=i?yi(i):"";if(h)switch(h){case Fl:return it;case Wl:return Ee;case Ul:return zt;case Nl:return nt;case $l:return he}return t});function ru(e,t,i){for(var h=-1,C=i.length;++h<C;){var L=i[h],B=L.size;switch(L.type){case"drop":e+=B;break;case"dropRight":t-=B;break;case"take":t=lt(t,e+B);break;case"takeRight":e=Qe(e,t-B);break}}return{start:e,end:t}}function su(e){var t=e.match(ch);return t?t[1].split(uh):[]}function ta(e,t,i){t=fi(t,e);for(var h=-1,C=t.length,L=!1;++h<C;){var B=Vt(t[h]);if(!(L=e!=null&&i(e,B)))break;e=e[B]}return L||++h!=C?L:(C=e==null?0:e.length,!!C&&jr(C)&&ei(B,C)&&(me(e)||Ei(e)))}function nu(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&Pe.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function ia(e){return typeof e.constructor=="function"&&!sr(e)?Oi(wr(e)):{}}function ou(e,t,i){var h=e.constructor;switch(t){case Ke:return Ns(e);case R:case J:return new h(+e);case it:return zc(e,i);case Kt:case ot:case Pt:case Ie:case jt:case Ni:case $i:case zi:case Ki:return Fo(e,i);case Ee:return new h;case Me:case Lt:return new h(e);case It:return Kc(e);case nt:return new h;case q:return qc(e)}}function au(e,t){var i=t.length;if(!i)return e;var h=i-1;return t[h]=(i>1?"& ":"")+t[h],t=t.join(i>2?", ":" "),e.replace(lh,`{
/* [wrapped with `+t+`] */
`)}function hu(e){return me(e)||Ei(e)||!!(oo&&e&&e[oo])}function ei(e,t){var i=typeof e;return t=t??Q,!!t&&(i=="number"||i!="symbol"&&Ch.test(e))&&e>-1&&e%1==0&&e<t}function dt(e,t,i){if(!$e(i))return!1;var h=typeof t;return(h=="number"?pt(i)&&ei(t,i.length):h=="string"&&t in i)?Wt(i[t],e):!1}function Xs(e,t){if(me(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||yt(e)?!0:nh.test(e)||!sh.test(e)||t!=null&&e in He(t)}function lu(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Js(e){var t=Ur(e),i=x[t];if(typeof i!="function"||!(t in De.prototype))return!1;if(e===i)return!0;var h=Gs(i);return!!h&&e===h[0]}function cu(e){return!!io&&io in e}var uu=pr?ti:_n;function sr(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Bi;return e===i}function ra(e){return e===e&&!$e(e)}function sa(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==A||e in He(i))}}function fu(e){var t=Gr(e,function(h){return i.size===_&&i.clear(),h}),i=t.cache;return t}function du(e,t){var i=e[1],h=t[1],C=i|h,L=C<(n|o|w),B=h==w&&i==s||h==w&&i==f&&e[7].length<=t[8]||h==(w|f)&&t[7].length<=t[8]&&i==s;if(!(L||B))return e;h&n&&(e[2]=t[2],C|=i&n?0:r);var I=t[3];if(I){var W=e[3];e[3]=W?Uo(W,I,t[4]):I,e[4]=W?hi(e[3],m):t[4]}return I=t[5],I&&(W=e[5],e[5]=W?No(W,I,t[6]):I,e[6]=W?hi(e[5],m):t[6]),I=t[7],I&&(e[7]=I),h&w&&(e[8]=e[8]==null?t[8]:lt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=C,e}function _u(e){var t=[];if(e!=null)for(var i in He(e))t.push(i);return t}function vu(e){return mr.call(e)}function na(e,t,i){return t=Qe(t===A?e.length-1:t,0),function(){for(var h=arguments,C=-1,L=Qe(h.length-t,0),B=N(L);++C<L;)B[C]=h[t+C];C=-1;for(var I=N(t+1);++C<t;)I[C]=h[C];return I[t]=i(B),Ct(e,this,I)}}function oa(e,t){return t.length<2?e:wi(e,Tt(t,0,-1))}function pu(e,t){for(var i=e.length,h=lt(t.length,i),C=vt(e);h--;){var L=t[h];e[h]=ei(L,i)?C[L]:A}return e}function Ys(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var aa=la(ko),nr=Bl||function(e,t){return at.setTimeout(e,t)},Zs=la(Wc);function ha(e,t,i){var h=t+"";return Zs(e,au(h,gu(su(h),i)))}function la(e){var t=0,i=0;return function(){var h=Il(),C=D-(h-i);if(i=h,C>0){if(++t>=P)return arguments[0]}else t=0;return e.apply(A,arguments)}}function $r(e,t){var i=-1,h=e.length,C=h-1;for(t=t===A?h:t;++i<t;){var L=Os(i,C),B=e[L];e[L]=e[i],e[i]=B}return e.length=t,e}var ca=fu(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(oh,function(i,h,C,L){t.push(C?L.replace(_h,"$1"):h||i)}),t});function Vt(e){if(typeof e=="string"||yt(e))return e;var t=e+"";return t=="0"&&1/e==-se?"-0":t}function yi(e){if(e!=null){try{return gr.call(e)}catch{}try{return e+""}catch{}}return""}function gu(e,t){return Dt(re,function(i){var h="_."+i[0];t&i[1]&&!fr(e,h)&&e.push(h)}),e.sort()}function ua(e){if(e instanceof De)return e.clone();var t=new kt(e.__wrapped__,e.__chain__);return t.__actions__=vt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function mu(e,t,i){(i?dt(e,t,i):t===A)?t=1:t=Qe(Se(t),0);var h=e==null?0:e.length;if(!h||t<1)return[];for(var C=0,L=0,B=N(Er(h/t));C<h;)B[L++]=Tt(e,C,C+=t);return B}function Su(e){for(var t=-1,i=e==null?0:e.length,h=0,C=[];++t<i;){var L=e[t];L&&(C[h++]=L)}return C}function Cu(){var e=arguments.length;if(!e)return[];for(var t=N(e-1),i=arguments[0],h=e;h--;)t[h-1]=arguments[h];return ai(me(i)?vt(i):[i],ht(t,1))}var wu=be(function(e,t){return Ve(e)?Qi(e,ht(t,1,Ve,!0)):[]}),bu=be(function(e,t){var i=Mt(t);return Ve(i)&&(i=A),Ve(e)?Qi(e,ht(t,1,Ve,!0),_e(i,2)):[]}),yu=be(function(e,t){var i=Mt(t);return Ve(i)&&(i=A),Ve(e)?Qi(e,ht(t,1,Ve,!0),A,i):[]});function Eu(e,t,i){var h=e==null?0:e.length;return h?(t=i||t===A?1:Se(t),Tt(e,t<0?0:t,h)):[]}function xu(e,t,i){var h=e==null?0:e.length;return h?(t=i||t===A?1:Se(t),t=h-t,Tt(e,0,t<0?0:t)):[]}function Lu(e,t){return e&&e.length?Or(e,_e(t,3),!0,!0):[]}function Ru(e,t){return e&&e.length?Or(e,_e(t,3),!0):[]}function Du(e,t,i,h){var C=e==null?0:e.length;return C?(i&&typeof i!="number"&&dt(e,t,i)&&(i=0,h=C),Cc(e,t,i,h)):[]}function fa(e,t,i){var h=e==null?0:e.length;if(!h)return-1;var C=i==null?0:Se(i);return C<0&&(C=Qe(h+C,0)),dr(e,_e(t,3),C)}function da(e,t,i){var h=e==null?0:e.length;if(!h)return-1;var C=h-1;return i!==A&&(C=Se(i),C=i<0?Qe(h+C,0):lt(C,h-1)),dr(e,_e(t,3),C,!0)}function _a(e){var t=e==null?0:e.length;return t?ht(e,1):[]}function Au(e){var t=e==null?0:e.length;return t?ht(e,se):[]}function ku(e,t){var i=e==null?0:e.length;return i?(t=t===A?1:Se(t),ht(e,t)):[]}function Bu(e){for(var t=-1,i=e==null?0:e.length,h={};++t<i;){var C=e[t];h[C[0]]=C[1]}return h}function va(e){return e&&e.length?e[0]:A}function Tu(e,t,i){var h=e==null?0:e.length;if(!h)return-1;var C=i==null?0:Se(i);return C<0&&(C=Qe(h+C,0)),Ri(e,t,C)}function Mu(e){var t=e==null?0:e.length;return t?Tt(e,0,-1):[]}var Ou=be(function(e){var t=Ne(e,Ws);return t.length&&t[0]===e[0]?As(t):[]}),Iu=be(function(e){var t=Mt(e),i=Ne(e,Ws);return t===Mt(i)?t=A:i.pop(),i.length&&i[0]===e[0]?As(i,_e(t,2)):[]}),Pu=be(function(e){var t=Mt(e),i=Ne(e,Ws);return t=typeof t=="function"?t:A,t&&i.pop(),i.length&&i[0]===e[0]?As(i,A,t):[]});function Hu(e,t){return e==null?"":Ml.call(e,t)}function Mt(e){var t=e==null?0:e.length;return t?e[t-1]:A}function Fu(e,t,i){var h=e==null?0:e.length;if(!h)return-1;var C=h;return i!==A&&(C=Se(i),C=C<0?Qe(h+C,0):lt(C,h-1)),t===t?gl(e,t,C):dr(e,jn,C,!0)}function Wu(e,t){return e&&e.length?Lo(e,Se(t)):A}var Uu=be(pa);function pa(e,t){return e&&e.length&&t&&t.length?Ms(e,t):e}function Nu(e,t,i){return e&&e.length&&t&&t.length?Ms(e,t,_e(i,2)):e}function $u(e,t,i){return e&&e.length&&t&&t.length?Ms(e,t,A,i):e}var zu=Qt(function(e,t){var i=e==null?0:e.length,h=xs(e,t);return Ao(e,Ne(t,function(C){return ei(C,i)?+C:C}).sort(Wo)),h});function Ku(e,t){var i=[];if(!(e&&e.length))return i;var h=-1,C=[],L=e.length;for(t=_e(t,3);++h<L;){var B=e[h];t(B,h,e)&&(i.push(B),C.push(h))}return Ao(e,C),i}function Qs(e){return e==null?e:Hl.call(e)}function qu(e,t,i){var h=e==null?0:e.length;return h?(i&&typeof i!="number"&&dt(e,t,i)?(t=0,i=h):(t=t==null?0:Se(t),i=i===A?h:Se(i)),Tt(e,t,i)):[]}function Gu(e,t){return Mr(e,t)}function Vu(e,t,i){return Ps(e,t,_e(i,2))}function ju(e,t){var i=e==null?0:e.length;if(i){var h=Mr(e,t);if(h<i&&Wt(e[h],t))return h}return-1}function Xu(e,t){return Mr(e,t,!0)}function Ju(e,t,i){return Ps(e,t,_e(i,2),!0)}function Yu(e,t){var i=e==null?0:e.length;if(i){var h=Mr(e,t,!0)-1;if(Wt(e[h],t))return h}return-1}function Zu(e){return e&&e.length?Bo(e):[]}function Qu(e,t){return e&&e.length?Bo(e,_e(t,2)):[]}function ef(e){var t=e==null?0:e.length;return t?Tt(e,1,t):[]}function tf(e,t,i){return e&&e.length?(t=i||t===A?1:Se(t),Tt(e,0,t<0?0:t)):[]}function rf(e,t,i){var h=e==null?0:e.length;return h?(t=i||t===A?1:Se(t),t=h-t,Tt(e,t<0?0:t,h)):[]}function sf(e,t){return e&&e.length?Or(e,_e(t,3),!1,!0):[]}function nf(e,t){return e&&e.length?Or(e,_e(t,3)):[]}var of=be(function(e){return ui(ht(e,1,Ve,!0))}),af=be(function(e){var t=Mt(e);return Ve(t)&&(t=A),ui(ht(e,1,Ve,!0),_e(t,2))}),hf=be(function(e){var t=Mt(e);return t=typeof t=="function"?t:A,ui(ht(e,1,Ve,!0),A,t)});function lf(e){return e&&e.length?ui(e):[]}function cf(e,t){return e&&e.length?ui(e,_e(t,2)):[]}function uf(e,t){return t=typeof t=="function"?t:A,e&&e.length?ui(e,A,t):[]}function en(e){if(!(e&&e.length))return[];var t=0;return e=oi(e,function(i){if(Ve(i))return t=Qe(i.length,t),!0}),gs(t,function(i){return Ne(e,_s(i))})}function ga(e,t){if(!(e&&e.length))return[];var i=en(e);return t==null?i:Ne(i,function(h){return Ct(t,A,h)})}var ff=be(function(e,t){return Ve(e)?Qi(e,t):[]}),df=be(function(e){return Fs(oi(e,Ve))}),_f=be(function(e){var t=Mt(e);return Ve(t)&&(t=A),Fs(oi(e,Ve),_e(t,2))}),vf=be(function(e){var t=Mt(e);return t=typeof t=="function"?t:A,Fs(oi(e,Ve),A,t)}),pf=be(en);function gf(e,t){return Io(e||[],t||[],Zi)}function mf(e,t){return Io(e||[],t||[],ir)}var Sf=be(function(e){var t=e.length,i=t>1?e[t-1]:A;return i=typeof i=="function"?(e.pop(),i):A,ga(e,i)});function ma(e){var t=x(e);return t.__chain__=!0,t}function Cf(e,t){return t(e),e}function zr(e,t){return t(e)}var wf=Qt(function(e){var t=e.length,i=t?e[0]:0,h=this.__wrapped__,C=function(L){return xs(L,e)};return t>1||this.__actions__.length||!(h instanceof De)||!ei(i)?this.thru(C):(h=h.slice(i,+i+(t?1:0)),h.__actions__.push({func:zr,args:[C],thisArg:A}),new kt(h,this.__chain__).thru(function(L){return t&&!L.length&&L.push(A),L}))});function bf(){return ma(this)}function yf(){return new kt(this.value(),this.__chain__)}function Ef(){this.__values__===A&&(this.__values__=Ta(this.value()));var e=this.__index__>=this.__values__.length,t=e?A:this.__values__[this.__index__++];return{done:e,value:t}}function xf(){return this}function Lf(e){for(var t,i=this;i instanceof Dr;){var h=ua(i);h.__index__=0,h.__values__=A,t?C.__wrapped__=h:t=h;var C=h;i=i.__wrapped__}return C.__wrapped__=e,t}function Rf(){var e=this.__wrapped__;if(e instanceof De){var t=e;return this.__actions__.length&&(t=new De(this)),t=t.reverse(),t.__actions__.push({func:zr,args:[Qs],thisArg:A}),new kt(t,this.__chain__)}return this.thru(Qs)}function Df(){return Oo(this.__wrapped__,this.__actions__)}var Af=Ir(function(e,t,i){Pe.call(e,i)?++e[i]:Yt(e,i,1)});function kf(e,t,i){var h=me(e)?Gn:Sc;return i&&dt(e,t,i)&&(t=A),h(e,_e(t,3))}function Bf(e,t){var i=me(e)?oi:go;return i(e,_e(t,3))}var Tf=qo(fa),Mf=qo(da);function Of(e,t){return ht(Kr(e,t),1)}function If(e,t){return ht(Kr(e,t),se)}function Pf(e,t,i){return i=i===A?1:Se(i),ht(Kr(e,t),i)}function Sa(e,t){var i=me(e)?Dt:ci;return i(e,_e(t,3))}function Ca(e,t){var i=me(e)?el:po;return i(e,_e(t,3))}var Hf=Ir(function(e,t,i){Pe.call(e,i)?e[i].push(t):Yt(e,i,[t])});function Ff(e,t,i,h){e=pt(e)?e:Wi(e),i=i&&!h?Se(i):0;var C=e.length;return i<0&&(i=Qe(C+i,0)),Xr(e)?i<=C&&e.indexOf(t,i)>-1:!!C&&Ri(e,t,i)>-1}var Wf=be(function(e,t,i){var h=-1,C=typeof t=="function",L=pt(e)?N(e.length):[];return ci(e,function(B){L[++h]=C?Ct(t,B,i):er(B,t,i)}),L}),Uf=Ir(function(e,t,i){Yt(e,i,t)});function Kr(e,t){var i=me(e)?Ne:yo;return i(e,_e(t,3))}function Nf(e,t,i,h){return e==null?[]:(me(t)||(t=t==null?[]:[t]),i=h?A:i,me(i)||(i=i==null?[]:[i]),Ro(e,t,i))}var $f=Ir(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function zf(e,t,i){var h=me(e)?fs:Jn,C=arguments.length<3;return h(e,_e(t,4),i,C,ci)}function Kf(e,t,i){var h=me(e)?tl:Jn,C=arguments.length<3;return h(e,_e(t,4),i,C,po)}function qf(e,t){var i=me(e)?oi:go;return i(e,Vr(_e(t,3)))}function Gf(e){var t=me(e)?uo:Hc;return t(e)}function Vf(e,t,i){(i?dt(e,t,i):t===A)?t=1:t=Se(t);var h=me(e)?_c:Fc;return h(e,t)}function jf(e){var t=me(e)?vc:Uc;return t(e)}function Xf(e){if(e==null)return 0;if(pt(e))return Xr(e)?Ai(e):e.length;var t=ct(e);return t==Ee||t==nt?e.size:Bs(e).length}function Jf(e,t,i){var h=me(e)?ds:Nc;return i&&dt(e,t,i)&&(t=A),h(e,_e(t,3))}var Yf=be(function(e,t){if(e==null)return[];var i=t.length;return i>1&&dt(e,t[0],t[1])?t=[]:i>2&&dt(t[0],t[1],t[2])&&(t=[t[0]]),Ro(e,ht(t,1),[])}),qr=kl||function(){return at.Date.now()};function Zf(e,t){if(typeof t!="function")throw new At(j);return e=Se(e),function(){if(--e<1)return t.apply(this,arguments)}}function wa(e,t,i){return t=i?A:t,t=e&&t==null?e.length:t,Zt(e,w,A,A,A,A,t)}function ba(e,t){var i;if(typeof t!="function")throw new At(j);return e=Se(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=A),i}}var tn=be(function(e,t,i){var h=n;if(i.length){var C=hi(i,Hi(tn));h|=p}return Zt(e,h,t,i,C)}),ya=be(function(e,t,i){var h=n|o;if(i.length){var C=hi(i,Hi(ya));h|=p}return Zt(t,h,e,i,C)});function Ea(e,t,i){t=i?A:t;var h=Zt(e,s,A,A,A,A,A,t);return h.placeholder=Ea.placeholder,h}function xa(e,t,i){t=i?A:t;var h=Zt(e,l,A,A,A,A,A,t);return h.placeholder=xa.placeholder,h}function La(e,t,i){var h,C,L,B,I,W,G=0,V=!1,Y=!1,oe=!0;if(typeof e!="function")throw new At(j);t=Ot(t)||0,$e(i)&&(V=!!i.leading,Y="maxWait"in i,L=Y?Qe(Ot(i.maxWait)||0,t):L,oe="trailing"in i?!!i.trailing:oe);function ce(je){var Ut=h,ri=C;return h=C=A,G=je,B=e.apply(ri,Ut),B}function ve(je){return G=je,I=nr(xe,t),V?ce(je):B}function Ce(je){var Ut=je-W,ri=je-G,qa=t-Ut;return Y?lt(qa,L-ri):qa}function pe(je){var Ut=je-W,ri=je-G;return W===A||Ut>=t||Ut<0||Y&&ri>=L}function xe(){var je=qr();if(pe(je))return Ae(je);I=nr(xe,Ce(je))}function Ae(je){return I=A,oe&&h?ce(je):(h=C=A,B)}function Et(){I!==A&&Po(I),G=0,h=W=C=I=A}function _t(){return I===A?B:Ae(qr())}function xt(){var je=qr(),Ut=pe(je);if(h=arguments,C=this,W=je,Ut){if(I===A)return ve(W);if(Y)return Po(I),I=nr(xe,t),ce(W)}return I===A&&(I=nr(xe,t)),B}return xt.cancel=Et,xt.flush=_t,xt}var Qf=be(function(e,t){return vo(e,1,t)}),ed=be(function(e,t,i){return vo(e,Ot(t)||0,i)});function td(e){return Zt(e,y)}function Gr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new At(j);var i=function(){var h=arguments,C=t?t.apply(this,h):h[0],L=i.cache;if(L.has(C))return L.get(C);var B=e.apply(this,h);return i.cache=L.set(C,B)||L,B};return i.cache=new(Gr.Cache||Jt),i}Gr.Cache=Jt;function Vr(e){if(typeof e!="function")throw new At(j);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function id(e){return ba(2,e)}var rd=$c(function(e,t){t=t.length==1&&me(t[0])?Ne(t[0],wt(_e())):Ne(ht(t,1),wt(_e()));var i=t.length;return be(function(h){for(var C=-1,L=lt(h.length,i);++C<L;)h[C]=t[C].call(this,h[C]);return Ct(e,this,h)})}),rn=be(function(e,t){var i=hi(t,Hi(rn));return Zt(e,p,A,t,i)}),Ra=be(function(e,t){var i=hi(t,Hi(Ra));return Zt(e,g,A,t,i)}),sd=Qt(function(e,t){return Zt(e,f,A,A,A,t)});function nd(e,t){if(typeof e!="function")throw new At(j);return t=t===A?t:Se(t),be(e,t)}function od(e,t){if(typeof e!="function")throw new At(j);return t=t==null?0:Qe(Se(t),0),be(function(i){var h=i[t],C=di(i,0,t);return h&&ai(C,h),Ct(e,this,C)})}function ad(e,t,i){var h=!0,C=!0;if(typeof e!="function")throw new At(j);return $e(i)&&(h="leading"in i?!!i.leading:h,C="trailing"in i?!!i.trailing:C),La(e,t,{leading:h,maxWait:t,trailing:C})}function hd(e){return wa(e,1)}function ld(e,t){return rn(Us(t),e)}function cd(){if(!arguments.length)return[];var e=arguments[0];return me(e)?e:[e]}function ud(e){return Bt(e,S)}function fd(e,t){return t=typeof t=="function"?t:A,Bt(e,S,t)}function dd(e){return Bt(e,c|S)}function _d(e,t){return t=typeof t=="function"?t:A,Bt(e,c|S,t)}function vd(e,t){return t==null||_o(e,t,rt(t))}function Wt(e,t){return e===t||e!==e&&t!==t}var pd=Wr(Ds),gd=Wr(function(e,t){return e>=t}),Ei=Co(function(){return arguments}())?Co:function(e){return qe(e)&&Pe.call(e,"callee")&&!no.call(e,"callee")},me=N.isArray,md=Un?wt(Un):xc;function pt(e){return e!=null&&jr(e.length)&&!ti(e)}function Ve(e){return qe(e)&&pt(e)}function Sd(e){return e===!0||e===!1||qe(e)&&ft(e)==R}var _i=Tl||_n,Cd=Nn?wt(Nn):Lc;function wd(e){return qe(e)&&e.nodeType===1&&!or(e)}function bd(e){if(e==null)return!0;if(pt(e)&&(me(e)||typeof e=="string"||typeof e.splice=="function"||_i(e)||Fi(e)||Ei(e)))return!e.length;var t=ct(e);if(t==Ee||t==nt)return!e.size;if(sr(e))return!Bs(e).length;for(var i in e)if(Pe.call(e,i))return!1;return!0}function yd(e,t){return tr(e,t)}function Ed(e,t,i){i=typeof i=="function"?i:A;var h=i?i(e,t):A;return h===A?tr(e,t,A,i):!!h}function sn(e){if(!qe(e))return!1;var t=ft(e);return t==ne||t==z||typeof e.message=="string"&&typeof e.name=="string"&&!or(e)}function xd(e){return typeof e=="number"&&ao(e)}function ti(e){if(!$e(e))return!1;var t=ft(e);return t==ie||t==we||t==U||t==vi}function Da(e){return typeof e=="number"&&e==Se(e)}function jr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Q}function $e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function qe(e){return e!=null&&typeof e=="object"}var Aa=$n?wt($n):Dc;function Ld(e,t){return e===t||ks(e,t,Vs(t))}function Rd(e,t,i){return i=typeof i=="function"?i:A,ks(e,t,Vs(t),i)}function Dd(e){return ka(e)&&e!=+e}function Ad(e){if(uu(e))throw new ge(st);return wo(e)}function kd(e){return e===null}function Bd(e){return e==null}function ka(e){return typeof e=="number"||qe(e)&&ft(e)==Me}function or(e){if(!qe(e)||ft(e)!=ue)return!1;var t=wr(e);if(t===null)return!0;var i=Pe.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&gr.call(i)==Ll}var nn=zn?wt(zn):Ac;function Td(e){return Da(e)&&e>=-Q&&e<=Q}var Ba=Kn?wt(Kn):kc;function Xr(e){return typeof e=="string"||!me(e)&&qe(e)&&ft(e)==Lt}function yt(e){return typeof e=="symbol"||qe(e)&&ft(e)==q}var Fi=qn?wt(qn):Bc;function Md(e){return e===A}function Od(e){return qe(e)&&ct(e)==he}function Id(e){return qe(e)&&ft(e)==ze}var Pd=Wr(Ts),Hd=Wr(function(e,t){return e<=t});function Ta(e){if(!e)return[];if(pt(e))return Xr(e)?Ht(e):vt(e);if(Vi&&e[Vi])return _l(e[Vi]());var t=ct(e),i=t==Ee?Ss:t==nt?_r:Wi;return i(e)}function ii(e){if(!e)return e===0?e:0;if(e=Ot(e),e===se||e===-se){var t=e<0?-1:1;return t*E}return e===e?e:0}function Se(e){var t=ii(e),i=t%1;return t===t?i?t-i:t:0}function Ma(e){return e?Ci(Se(e),0,M):0}function Ot(e){if(typeof e=="number")return e;if(yt(e))return k;if($e(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$e(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Yn(e);var i=gh.test(e);return i||Sh.test(e)?Yh(e.slice(2),i?2:8):ph.test(e)?k:+e}function Oa(e){return Gt(e,gt(e))}function Fd(e){return e?Ci(Se(e),-Q,Q):e===0?e:0}function Oe(e){return e==null?"":bt(e)}var Wd=Ii(function(e,t){if(sr(t)||pt(t)){Gt(t,rt(t),e);return}for(var i in t)Pe.call(t,i)&&Zi(e,i,t[i])}),Ia=Ii(function(e,t){Gt(t,gt(t),e)}),Jr=Ii(function(e,t,i,h){Gt(t,gt(t),e,h)}),Ud=Ii(function(e,t,i,h){Gt(t,rt(t),e,h)}),Nd=Qt(xs);function $d(e,t){var i=Oi(e);return t==null?i:fo(i,t)}var zd=be(function(e,t){e=He(e);var i=-1,h=t.length,C=h>2?t[2]:A;for(C&&dt(t[0],t[1],C)&&(h=1);++i<h;)for(var L=t[i],B=gt(L),I=-1,W=B.length;++I<W;){var G=B[I],V=e[G];(V===A||Wt(V,Bi[G])&&!Pe.call(e,G))&&(e[G]=L[G])}return e}),Kd=be(function(e){return e.push(A,Zo),Ct(Pa,A,e)});function qd(e,t){return Vn(e,_e(t,3),qt)}function Gd(e,t){return Vn(e,_e(t,3),Rs)}function Vd(e,t){return e==null?e:Ls(e,_e(t,3),gt)}function jd(e,t){return e==null?e:mo(e,_e(t,3),gt)}function Xd(e,t){return e&&qt(e,_e(t,3))}function Jd(e,t){return e&&Rs(e,_e(t,3))}function Yd(e){return e==null?[]:Br(e,rt(e))}function Zd(e){return e==null?[]:Br(e,gt(e))}function on(e,t,i){var h=e==null?A:wi(e,t);return h===A?i:h}function Qd(e,t){return e!=null&&ta(e,t,wc)}function an(e,t){return e!=null&&ta(e,t,bc)}var e_=Vo(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=mr.call(t)),e[t]=i},ln(mt)),t_=Vo(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=mr.call(t)),Pe.call(e,t)?e[t].push(i):e[t]=[i]},_e),i_=be(er);function rt(e){return pt(e)?co(e):Bs(e)}function gt(e){return pt(e)?co(e,!0):Tc(e)}function r_(e,t){var i={};return t=_e(t,3),qt(e,function(h,C,L){Yt(i,t(h,C,L),h)}),i}function s_(e,t){var i={};return t=_e(t,3),qt(e,function(h,C,L){Yt(i,C,t(h,C,L))}),i}var n_=Ii(function(e,t,i){Tr(e,t,i)}),Pa=Ii(function(e,t,i,h){Tr(e,t,i,h)}),o_=Qt(function(e,t){var i={};if(e==null)return i;var h=!1;t=Ne(t,function(L){return L=fi(L,e),h||(h=L.length>1),L}),Gt(e,qs(e),i),h&&(i=Bt(i,c|v|S,Qc));for(var C=t.length;C--;)Hs(i,t[C]);return i});function a_(e,t){return Ha(e,Vr(_e(t)))}var h_=Qt(function(e,t){return e==null?{}:Oc(e,t)});function Ha(e,t){if(e==null)return{};var i=Ne(qs(e),function(h){return[h]});return t=_e(t),Do(e,i,function(h,C){return t(h,C[0])})}function l_(e,t,i){t=fi(t,e);var h=-1,C=t.length;for(C||(C=1,e=A);++h<C;){var L=e==null?A:e[Vt(t[h])];L===A&&(h=C,L=i),e=ti(L)?L.call(e):L}return e}function c_(e,t,i){return e==null?e:ir(e,t,i)}function u_(e,t,i,h){return h=typeof h=="function"?h:A,e==null?e:ir(e,t,i,h)}var Fa=Jo(rt),Wa=Jo(gt);function f_(e,t,i){var h=me(e),C=h||_i(e)||Fi(e);if(t=_e(t,4),i==null){var L=e&&e.constructor;C?i=h?new L:[]:$e(e)?i=ti(L)?Oi(wr(e)):{}:i={}}return(C?Dt:qt)(e,function(B,I,W){return t(i,B,I,W)}),i}function d_(e,t){return e==null?!0:Hs(e,t)}function __(e,t,i){return e==null?e:Mo(e,t,Us(i))}function v_(e,t,i,h){return h=typeof h=="function"?h:A,e==null?e:Mo(e,t,Us(i),h)}function Wi(e){return e==null?[]:ms(e,rt(e))}function p_(e){return e==null?[]:ms(e,gt(e))}function g_(e,t,i){return i===A&&(i=t,t=A),i!==A&&(i=Ot(i),i=i===i?i:0),t!==A&&(t=Ot(t),t=t===t?t:0),Ci(Ot(e),t,i)}function m_(e,t,i){return t=ii(t),i===A?(i=t,t=0):i=ii(i),e=Ot(e),yc(e,t,i)}function S_(e,t,i){if(i&&typeof i!="boolean"&&dt(e,t,i)&&(t=i=A),i===A&&(typeof t=="boolean"?(i=t,t=A):typeof e=="boolean"&&(i=e,e=A)),e===A&&t===A?(e=0,t=1):(e=ii(e),t===A?(t=e,e=0):t=ii(t)),e>t){var h=e;e=t,t=h}if(i||e%1||t%1){var C=ho();return lt(e+C*(t-e+Jh("1e-"+((C+"").length-1))),t)}return Os(e,t)}var C_=Pi(function(e,t,i){return t=t.toLowerCase(),e+(i?Ua(t):t)});function Ua(e){return hn(Oe(e).toLowerCase())}function Na(e){return e=Oe(e),e&&e.replace(wh,ll).replace(Uh,"")}function w_(e,t,i){e=Oe(e),t=bt(t);var h=e.length;i=i===A?h:Ci(Se(i),0,h);var C=i;return i-=t.length,i>=0&&e.slice(i,C)==t}function b_(e){return e=Oe(e),e&&ts.test(e)?e.replace(Ye,cl):e}function y_(e){return e=Oe(e),e&&ah.test(e)?e.replace(is,"\\$&"):e}var E_=Pi(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),x_=Pi(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),L_=Ko("toLowerCase");function R_(e,t,i){e=Oe(e),t=Se(t);var h=t?Ai(e):0;if(!t||h>=t)return e;var C=(t-h)/2;return Fr(xr(C),i)+e+Fr(Er(C),i)}function D_(e,t,i){e=Oe(e),t=Se(t);var h=t?Ai(e):0;return t&&h<t?e+Fr(t-h,i):e}function A_(e,t,i){e=Oe(e),t=Se(t);var h=t?Ai(e):0;return t&&h<t?Fr(t-h,i)+e:e}function k_(e,t,i){return i||t==null?t=0:t&&(t=+t),Pl(Oe(e).replace(rs,""),t||0)}function B_(e,t,i){return(i?dt(e,t,i):t===A)?t=1:t=Se(t),Is(Oe(e),t)}function T_(){var e=arguments,t=Oe(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var M_=Pi(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function O_(e,t,i){return i&&typeof i!="number"&&dt(e,t,i)&&(t=i=A),i=i===A?M:i>>>0,i?(e=Oe(e),e&&(typeof t=="string"||t!=null&&!nn(t))&&(t=bt(t),!t&&Di(e))?di(Ht(e),0,i):e.split(t,i)):[]}var I_=Pi(function(e,t,i){return e+(i?" ":"")+hn(t)});function P_(e,t,i){return e=Oe(e),i=i==null?0:Ci(Se(i),0,e.length),t=bt(t),e.slice(i,i+t.length)==t}function H_(e,t,i){var h=x.templateSettings;i&&dt(e,t,i)&&(t=A),e=Oe(e),t=Jr({},t,h,Yo);var C=Jr({},t.imports,h.imports,Yo),L=rt(C),B=ms(C,L),I,W,G=0,V=t.interpolate||lr,Y="__p += '",oe=Cs((t.escape||lr).source+"|"+V.source+"|"+(V===mn?vh:lr).source+"|"+(t.evaluate||lr).source+"|$","g"),ce="//# sourceURL="+(Pe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qh+"]")+`
`;e.replace(oe,function(pe,xe,Ae,Et,_t,xt){return Ae||(Ae=Et),Y+=e.slice(G,xt).replace(bh,ul),xe&&(I=!0,Y+=`' +
__e(`+xe+`) +
'`),_t&&(W=!0,Y+=`';
`+_t+`;
__p += '`),Ae&&(Y+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),G=xt+pe.length,pe}),Y+=`';
`;var ve=Pe.call(t,"variable")&&t.variable;if(!ve)Y=`with (obj) {
`+Y+`
}
`;else if(dh.test(ve))throw new ge(a);Y=(W?Y.replace(Zr,""):Y).replace(Qr,"$1").replace(de,"$1;"),Y="function("+(ve||"obj")+`) {
`+(ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(W?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Y+`return __p
}`;var Ce=za(function(){return Te(L,ce+"return "+Y).apply(A,B)});if(Ce.source=Y,sn(Ce))throw Ce;return Ce}function F_(e){return Oe(e).toLowerCase()}function W_(e){return Oe(e).toUpperCase()}function U_(e,t,i){if(e=Oe(e),e&&(i||t===A))return Yn(e);if(!e||!(t=bt(t)))return e;var h=Ht(e),C=Ht(t),L=Zn(h,C),B=Qn(h,C)+1;return di(h,L,B).join("")}function N_(e,t,i){if(e=Oe(e),e&&(i||t===A))return e.slice(0,to(e)+1);if(!e||!(t=bt(t)))return e;var h=Ht(e),C=Qn(h,Ht(t))+1;return di(h,0,C).join("")}function $_(e,t,i){if(e=Oe(e),e&&(i||t===A))return e.replace(rs,"");if(!e||!(t=bt(t)))return e;var h=Ht(e),C=Zn(h,Ht(t));return di(h,C).join("")}function z_(e,t){var i=T,h=O;if($e(t)){var C="separator"in t?t.separator:C;i="length"in t?Se(t.length):i,h="omission"in t?bt(t.omission):h}e=Oe(e);var L=e.length;if(Di(e)){var B=Ht(e);L=B.length}if(i>=L)return e;var I=i-Ai(h);if(I<1)return h;var W=B?di(B,0,I).join(""):e.slice(0,I);if(C===A)return W+h;if(B&&(I+=W.length-I),nn(C)){if(e.slice(I).search(C)){var G,V=W;for(C.global||(C=Cs(C.source,Oe(Sn.exec(C))+"g")),C.lastIndex=0;G=C.exec(V);)var Y=G.index;W=W.slice(0,Y===A?I:Y)}}else if(e.indexOf(bt(C),I)!=I){var oe=W.lastIndexOf(C);oe>-1&&(W=W.slice(0,oe))}return W+h}function K_(e){return e=Oe(e),e&&es.test(e)?e.replace(qi,ml):e}var q_=Pi(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),hn=Ko("toUpperCase");function $a(e,t,i){return e=Oe(e),t=i?A:t,t===A?dl(e)?wl(e):sl(e):e.match(t)||[]}var za=be(function(e,t){try{return Ct(e,A,t)}catch(i){return sn(i)?i:new ge(i)}}),G_=Qt(function(e,t){return Dt(t,function(i){i=Vt(i),Yt(e,i,tn(e[i],e))}),e});function V_(e){var t=e==null?0:e.length,i=_e();return e=t?Ne(e,function(h){if(typeof h[1]!="function")throw new At(j);return[i(h[0]),h[1]]}):[],be(function(h){for(var C=-1;++C<t;){var L=e[C];if(Ct(L[0],this,h))return Ct(L[1],this,h)}})}function j_(e){return mc(Bt(e,c))}function ln(e){return function(){return e}}function X_(e,t){return e==null||e!==e?t:e}var J_=Go(),Y_=Go(!0);function mt(e){return e}function cn(e){return bo(typeof e=="function"?e:Bt(e,c))}function Z_(e){return Eo(Bt(e,c))}function Q_(e,t){return xo(e,Bt(t,c))}var ev=be(function(e,t){return function(i){return er(i,e,t)}}),tv=be(function(e,t){return function(i){return er(e,i,t)}});function un(e,t,i){var h=rt(t),C=Br(t,h);i==null&&!($e(t)&&(C.length||!h.length))&&(i=t,t=e,e=this,C=Br(t,rt(t)));var L=!($e(i)&&"chain"in i)||!!i.chain,B=ti(e);return Dt(C,function(I){var W=t[I];e[I]=W,B&&(e.prototype[I]=function(){var G=this.__chain__;if(L||G){var V=e(this.__wrapped__),Y=V.__actions__=vt(this.__actions__);return Y.push({func:W,args:arguments,thisArg:e}),V.__chain__=G,V}return W.apply(e,ai([this.value()],arguments))})}),e}function iv(){return at._===this&&(at._=Rl),this}function fn(){}function rv(e){return e=Se(e),be(function(t){return Lo(t,e)})}var sv=$s(Ne),nv=$s(Gn),ov=$s(ds);function Ka(e){return Xs(e)?_s(Vt(e)):Ic(e)}function av(e){return function(t){return e==null?A:wi(e,t)}}var hv=jo(),lv=jo(!0);function dn(){return[]}function _n(){return!1}function cv(){return{}}function uv(){return""}function fv(){return!0}function dv(e,t){if(e=Se(e),e<1||e>Q)return[];var i=M,h=lt(e,M);t=_e(t),e-=M;for(var C=gs(h,t);++i<e;)t(i);return C}function _v(e){return me(e)?Ne(e,Vt):yt(e)?[e]:vt(ca(Oe(e)))}function vv(e){var t=++xl;return Oe(e)+t}var pv=Hr(function(e,t){return e+t},0),gv=zs("ceil"),mv=Hr(function(e,t){return e/t},1),Sv=zs("floor");function Cv(e){return e&&e.length?kr(e,mt,Ds):A}function wv(e,t){return e&&e.length?kr(e,_e(t,2),Ds):A}function bv(e){return Xn(e,mt)}function yv(e,t){return Xn(e,_e(t,2))}function Ev(e){return e&&e.length?kr(e,mt,Ts):A}function xv(e,t){return e&&e.length?kr(e,_e(t,2),Ts):A}var Lv=Hr(function(e,t){return e*t},1),Rv=zs("round"),Dv=Hr(function(e,t){return e-t},0);function Av(e){return e&&e.length?ps(e,mt):0}function kv(e,t){return e&&e.length?ps(e,_e(t,2)):0}return x.after=Zf,x.ary=wa,x.assign=Wd,x.assignIn=Ia,x.assignInWith=Jr,x.assignWith=Ud,x.at=Nd,x.before=ba,x.bind=tn,x.bindAll=G_,x.bindKey=ya,x.castArray=cd,x.chain=ma,x.chunk=mu,x.compact=Su,x.concat=Cu,x.cond=V_,x.conforms=j_,x.constant=ln,x.countBy=Af,x.create=$d,x.curry=Ea,x.curryRight=xa,x.debounce=La,x.defaults=zd,x.defaultsDeep=Kd,x.defer=Qf,x.delay=ed,x.difference=wu,x.differenceBy=bu,x.differenceWith=yu,x.drop=Eu,x.dropRight=xu,x.dropRightWhile=Lu,x.dropWhile=Ru,x.fill=Du,x.filter=Bf,x.flatMap=Of,x.flatMapDeep=If,x.flatMapDepth=Pf,x.flatten=_a,x.flattenDeep=Au,x.flattenDepth=ku,x.flip=td,x.flow=J_,x.flowRight=Y_,x.fromPairs=Bu,x.functions=Yd,x.functionsIn=Zd,x.groupBy=Hf,x.initial=Mu,x.intersection=Ou,x.intersectionBy=Iu,x.intersectionWith=Pu,x.invert=e_,x.invertBy=t_,x.invokeMap=Wf,x.iteratee=cn,x.keyBy=Uf,x.keys=rt,x.keysIn=gt,x.map=Kr,x.mapKeys=r_,x.mapValues=s_,x.matches=Z_,x.matchesProperty=Q_,x.memoize=Gr,x.merge=n_,x.mergeWith=Pa,x.method=ev,x.methodOf=tv,x.mixin=un,x.negate=Vr,x.nthArg=rv,x.omit=o_,x.omitBy=a_,x.once=id,x.orderBy=Nf,x.over=sv,x.overArgs=rd,x.overEvery=nv,x.overSome=ov,x.partial=rn,x.partialRight=Ra,x.partition=$f,x.pick=h_,x.pickBy=Ha,x.property=Ka,x.propertyOf=av,x.pull=Uu,x.pullAll=pa,x.pullAllBy=Nu,x.pullAllWith=$u,x.pullAt=zu,x.range=hv,x.rangeRight=lv,x.rearg=sd,x.reject=qf,x.remove=Ku,x.rest=nd,x.reverse=Qs,x.sampleSize=Vf,x.set=c_,x.setWith=u_,x.shuffle=jf,x.slice=qu,x.sortBy=Yf,x.sortedUniq=Zu,x.sortedUniqBy=Qu,x.split=O_,x.spread=od,x.tail=ef,x.take=tf,x.takeRight=rf,x.takeRightWhile=sf,x.takeWhile=nf,x.tap=Cf,x.throttle=ad,x.thru=zr,x.toArray=Ta,x.toPairs=Fa,x.toPairsIn=Wa,x.toPath=_v,x.toPlainObject=Oa,x.transform=f_,x.unary=hd,x.union=of,x.unionBy=af,x.unionWith=hf,x.uniq=lf,x.uniqBy=cf,x.uniqWith=uf,x.unset=d_,x.unzip=en,x.unzipWith=ga,x.update=__,x.updateWith=v_,x.values=Wi,x.valuesIn=p_,x.without=ff,x.words=$a,x.wrap=ld,x.xor=df,x.xorBy=_f,x.xorWith=vf,x.zip=pf,x.zipObject=gf,x.zipObjectDeep=mf,x.zipWith=Sf,x.entries=Fa,x.entriesIn=Wa,x.extend=Ia,x.extendWith=Jr,un(x,x),x.add=pv,x.attempt=za,x.camelCase=C_,x.capitalize=Ua,x.ceil=gv,x.clamp=g_,x.clone=ud,x.cloneDeep=dd,x.cloneDeepWith=_d,x.cloneWith=fd,x.conformsTo=vd,x.deburr=Na,x.defaultTo=X_,x.divide=mv,x.endsWith=w_,x.eq=Wt,x.escape=b_,x.escapeRegExp=y_,x.every=kf,x.find=Tf,x.findIndex=fa,x.findKey=qd,x.findLast=Mf,x.findLastIndex=da,x.findLastKey=Gd,x.floor=Sv,x.forEach=Sa,x.forEachRight=Ca,x.forIn=Vd,x.forInRight=jd,x.forOwn=Xd,x.forOwnRight=Jd,x.get=on,x.gt=pd,x.gte=gd,x.has=Qd,x.hasIn=an,x.head=va,x.identity=mt,x.includes=Ff,x.indexOf=Tu,x.inRange=m_,x.invoke=i_,x.isArguments=Ei,x.isArray=me,x.isArrayBuffer=md,x.isArrayLike=pt,x.isArrayLikeObject=Ve,x.isBoolean=Sd,x.isBuffer=_i,x.isDate=Cd,x.isElement=wd,x.isEmpty=bd,x.isEqual=yd,x.isEqualWith=Ed,x.isError=sn,x.isFinite=xd,x.isFunction=ti,x.isInteger=Da,x.isLength=jr,x.isMap=Aa,x.isMatch=Ld,x.isMatchWith=Rd,x.isNaN=Dd,x.isNative=Ad,x.isNil=Bd,x.isNull=kd,x.isNumber=ka,x.isObject=$e,x.isObjectLike=qe,x.isPlainObject=or,x.isRegExp=nn,x.isSafeInteger=Td,x.isSet=Ba,x.isString=Xr,x.isSymbol=yt,x.isTypedArray=Fi,x.isUndefined=Md,x.isWeakMap=Od,x.isWeakSet=Id,x.join=Hu,x.kebabCase=E_,x.last=Mt,x.lastIndexOf=Fu,x.lowerCase=x_,x.lowerFirst=L_,x.lt=Pd,x.lte=Hd,x.max=Cv,x.maxBy=wv,x.mean=bv,x.meanBy=yv,x.min=Ev,x.minBy=xv,x.stubArray=dn,x.stubFalse=_n,x.stubObject=cv,x.stubString=uv,x.stubTrue=fv,x.multiply=Lv,x.nth=Wu,x.noConflict=iv,x.noop=fn,x.now=qr,x.pad=R_,x.padEnd=D_,x.padStart=A_,x.parseInt=k_,x.random=S_,x.reduce=zf,x.reduceRight=Kf,x.repeat=B_,x.replace=T_,x.result=l_,x.round=Rv,x.runInContext=F,x.sample=Gf,x.size=Xf,x.snakeCase=M_,x.some=Jf,x.sortedIndex=Gu,x.sortedIndexBy=Vu,x.sortedIndexOf=ju,x.sortedLastIndex=Xu,x.sortedLastIndexBy=Ju,x.sortedLastIndexOf=Yu,x.startCase=I_,x.startsWith=P_,x.subtract=Dv,x.sum=Av,x.sumBy=kv,x.template=H_,x.times=dv,x.toFinite=ii,x.toInteger=Se,x.toLength=Ma,x.toLower=F_,x.toNumber=Ot,x.toSafeInteger=Fd,x.toString=Oe,x.toUpper=W_,x.trim=U_,x.trimEnd=N_,x.trimStart=$_,x.truncate=z_,x.unescape=K_,x.uniqueId=vv,x.upperCase=q_,x.upperFirst=hn,x.each=Sa,x.eachRight=Ca,x.first=va,un(x,function(){var e={};return qt(x,function(t,i){Pe.call(x.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),x.VERSION=tt,Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){x[e].placeholder=x}),Dt(["drop","take"],function(e,t){De.prototype[e]=function(i){i=i===A?1:Qe(Se(i),0);var h=this.__filtered__&&!t?new De(this):this.clone();return h.__filtered__?h.__takeCount__=lt(i,h.__takeCount__):h.__views__.push({size:lt(i,M),type:e+(h.__dir__<0?"Right":"")}),h},De.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Dt(["filter","map","takeWhile"],function(e,t){var i=t+1,h=i==$||i==ee;De.prototype[e]=function(C){var L=this.clone();return L.__iteratees__.push({iteratee:_e(C,3),type:i}),L.__filtered__=L.__filtered__||h,L}}),Dt(["head","last"],function(e,t){var i="take"+(t?"Right":"");De.prototype[e]=function(){return this[i](1).value()[0]}}),Dt(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");De.prototype[e]=function(){return this.__filtered__?new De(this):this[i](1)}}),De.prototype.compact=function(){return this.filter(mt)},De.prototype.find=function(e){return this.filter(e).head()},De.prototype.findLast=function(e){return this.reverse().find(e)},De.prototype.invokeMap=be(function(e,t){return typeof e=="function"?new De(this):this.map(function(i){return er(i,e,t)})}),De.prototype.reject=function(e){return this.filter(Vr(_e(e)))},De.prototype.slice=function(e,t){e=Se(e);var i=this;return i.__filtered__&&(e>0||t<0)?new De(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==A&&(t=Se(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},De.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},De.prototype.toArray=function(){return this.take(M)},qt(De.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),h=/^(?:head|last)$/.test(t),C=x[h?"take"+(t=="last"?"Right":""):t],L=h||/^find/.test(t);C&&(x.prototype[t]=function(){var B=this.__wrapped__,I=h?[1]:arguments,W=B instanceof De,G=I[0],V=W||me(B),Y=function(xe){var Ae=C.apply(x,ai([xe],I));return h&&oe?Ae[0]:Ae};V&&i&&typeof G=="function"&&G.length!=1&&(W=V=!1);var oe=this.__chain__,ce=!!this.__actions__.length,ve=L&&!oe,Ce=W&&!ce;if(!L&&V){B=Ce?B:new De(this);var pe=e.apply(B,I);return pe.__actions__.push({func:zr,args:[Y],thisArg:A}),new kt(pe,oe)}return ve&&Ce?e.apply(this,I):(pe=this.thru(Y),ve?h?pe.value()[0]:pe.value():pe)})}),Dt(["pop","push","shift","sort","splice","unshift"],function(e){var t=vr[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);x.prototype[e]=function(){var C=arguments;if(h&&!this.__chain__){var L=this.value();return t.apply(me(L)?L:[],C)}return this[i](function(B){return t.apply(me(B)?B:[],C)})}}),qt(De.prototype,function(e,t){var i=x[t];if(i){var h=i.name+"";Pe.call(Mi,h)||(Mi[h]=[]),Mi[h].push({name:t,func:i})}}),Mi[Pr(A,o).name]=[{name:"wrapper",func:A}],De.prototype.clone=zl,De.prototype.reverse=Kl,De.prototype.value=ql,x.prototype.at=wf,x.prototype.chain=bf,x.prototype.commit=yf,x.prototype.next=Ef,x.prototype.plant=Lf,x.prototype.reverse=Rf,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Df,x.prototype.first=x.prototype.head,Vi&&(x.prototype[Vi]=xf),x},ki=bl();pi?((pi.exports=ki)._=ki,ls._=ki):at._=ki}).call(ar)})(Yr,Yr.exports);var rp=Yr.exports;const sp={class:"setting-bar"},np=Ja({__name:"terminal",props:["dirPath"],setup(ye){const Fe=ye,A=Bv(),tt=ke(A.username),Be=ke(Fe.dirPath),st=ke(),j=ke(),a=ke(new tp.Terminal({fontSize:14,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#181d28"},cursorBlink:!0,cursorStyle:"underline",convertEol:!0})),u=new ip.FitAddon,_=ke(30);ke(14);let m=ke(new $v("/micro/webui/term"));const c=s=>{a.value&&a.value.resize(a.value.cols,s)},v=s=>{if(!s){console.error("éè¦ä¼ å¥ä¸ä¸ªåç´ ");return}document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():s.requestFullscreen?s.requestFullscreen().catch(l=>{console.error("å¨å±è¯·æ±å¤±è´¥:",l)}):console.error("å½åæµè§å¨ä¸æ¯æå¨å±API"),b()},S=()=>{let s="";a.value.onData(l=>{if(l.endsWith(`
`)||l.endsWith("\r")||l.endsWith("\r")){const p=s.replace("\r","").replace(`
`,"");if(p)try{m.value.sendWs(JSON.stringify({type:"exec",params:{cmd:p,path:null}}))}catch(g){g&&a.value.write(JSON.stringify(g))}s="",a.value.write(l),a.value.write(`
`),a.value.write(`\x1B[36;1m ${tt.value} <\x1B[36m${Be.value}>\x1B[36;1m ~\x1B[0m $ `)}else l==="\b"||l===""?(s=s.slice(0,-1),a.value.write("\b \b")):(s+=l,a.value.write(l));console.log(s,"è¾å¥")})},b=()=>{u.fit()},d=rp.debounce(()=>b(),500),n=()=>{window.addEventListener("resize",d)},o=()=>{window.removeEventListener("resize",d)},r=async()=>{await m.value.openWs("",()=>{m.value.sendWs(JSON.stringify({type:"exec",params:{cmd:"cd",path:Fe.dirPath}}))})};return Tv(()=>m.value.msgQueue,s=>{const l=s[s.length-1];l.action!="meta"&&(a.value.write(l.params),l.params.startsWith("UpdateCwd:")&&(Be.value=l.params.replace("UpdateCwd:",""),a.value.write(`
`),a.value.write(`\x1B[36;1m ${tt.value} <\x1B[36m${Be.value}>\x1B[36;1m ~\x1B[0m $ `)))},{deep:!0}),Ya(()=>{a.value.open(j.value),a.value.write(`\x1B[36;1m Systerm ~\x1B[0m $ Welcome to the micro-terminal!\r
`),a.value.write(`\x1B[36;1m Systerm ~\x1B[0m $ You can execute some simple scripts, but progress display is not supported. For example, when executing asynchronous tasks, please be patient and wait for the result!\r
`),a.value.write(`\x1B[36;1m Systerm ~\x1B[0m $ cd ${Fe.dirPath}`),r(),a.value.loadAddon(u),b(),n(),S()}),Mv(()=>{m.value.closeWs(),o()}),(s,l)=>{const p=et("el-slider"),g=et("el-form-item"),w=et("el-form"),f=et("el-button"),y=et("el-popover");return Xe(),$t("div",{class:"bg-main",ref_key:"termboxRef",ref:st},[ut("div",sp,[Re(y,{placement:"bottom",title:"ç¼è¾å¨è®¾ç½®",width:300,trigger:"hover"},{reference:Le(()=>[Re(f,{icon:"Setting",circle:"",size:"small",style:{"margin-left":"auto"}})]),default:Le(()=>[Re(w,null,{default:Le(()=>[Re(g,{label:"é«åº¦(è¡)"},{default:Le(()=>[Re(p,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=T=>_.value=T),size:"large",min:20,max:100,onInput:c},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Re(f,{size:"small",icon:"FullScreen",circle:"",style:{margin:"0 5px"},onClick:l[1]||(l[1]=T=>v(st.value))})]),ut("div",{ref_key:"terminal",ref:j,id:"terminal"},null,512)],512)}}});const op=Za(np,[["__scopeId","data-v-ebeb44f0"]]),ap={class:"search_bar"},hp={style:{width:"100%","margin-right":"10px"}},lp={class:"search_file"},cp={class:"handle_tabbar",style:{"margin-top":"10px"}},up=["onContextmenu"],fp=["onClick"],dp=["onContextmenu"],_p={key:0},vp=["onClick"],pp=["onContextmenu"],gp={key:0,class:"file_upload_box"},mp={key:1},Sp={key:2,style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},Cp=["src"],wp={key:3,style:{width:"100","max-height":"100%"}},bp=["src"],yp=["src"],Ep=Ja({__name:"index",setup(ye){const Fe=ke(window.innerHeight-210);window.onresize=()=>{Fe.value=window.innerHeight-210};const A=ke(!1),tt=ke(""),Be=ke(""),st=ke(""),j=ke(""),a=ke(!1),u=ke(!1),_=ke(""),m=ke(),c=ke(),v=ke();let S=Ga({path:""}),b=Ga({name:"",mtime:"",type:"",size:"",path:"",isBlur:!1,isRightClicked:!1}),d=ke([{name:"å é¤"},{name:"ä¸ä¼ "},{name:"ç§»å¨"},{name:"ä¸è½½"},{name:"å¤å¶"},{name:"å½å"}]),n=ke("0"),o=ke([]),r=ke(!1),s=ke("name"),l=ke(!1),p=ke(""),g=ke(""),w=ke(0),f=ke([]),y=ke({}),T=ke(""),O=ke(""),P=ke([]);const D=async(q="0")=>{A.value=!0;let te=await zv(q);te.code==200&&(o.value=te.data.children,n.value=te.data.path,A.value=!1)},$=async q=>{let te=await Kv(q.path,q.type);te.code==200&&(q.size=te.data)},X=Ov(()=>{let q=[];if(s.value=="name"){let te=[],he=[];o.value.forEach(ze=>{ze.type=="file"?he.push(ze):te.push(ze)}),q=[...te,...he]}else s.value=="time"?q=o.value.slice().sort((te,he)=>{const ze=new Date(te.mtime).getTime(),Ke=new Date(he.mtime).getTime();return ze-Ke}):q=o.value;return l.value?q.reverse():q}),ee=q=>{q=="name"?s.value=="name"?l.value=!l.value:(s.value="name",l.value=!1):q=="time"&&(s.value=="time"?l.value=!l.value:(s.value="time",l.value=!1))},se=()=>{let q=n.value.lastIndexOf("/");q==-1&&(q=n.value.lastIndexOf("\\")),n.value=n.value.slice(0,q),D(n.value)},Q=()=>{D(n.value)},E=async()=>{let q=await Qv(n.value,p.value);p.value="",q.code==200&&(o.value=q.data)},k=q=>{const te=q.lastIndexOf(".");return te===-1?"js":q.substring(te+1)},M=async q=>{if(q.type=="file"){if(Object.assign(b,q),/\.(png|jpg|jpeg|gif|bmp|tiff|webp|svg)$/.test(q.name)){let he=await gn(q.path);Be.value=URL.createObjectURL(he),_.value="viewImage",u.value=!0;return}if(/\.(mp3|wav|aac|m4a|ogg|flac|wma|ape|alac|amr|awb|aiff|caf|mka|opus|ra|rm|spx|tta|voc|wavpack|xm|mod|s3m|it|xmf|mid|midi|kar|rmi)$/.test(q.name)){let he=await gn(q.path);st.value=URL.createObjectURL(he),_.value="viewAudio",u.value=!0;return}if(/\.(mp4|avi|mov|wmv|mpeg|flv|mkv|vob|3gp|webm|m4v)$/.test(q.name)){let he=await gn(q.path);j.value=URL.createObjectURL(he),_.value="viewVideo",u.value=!0;return}let te=await Gv(q.path);te.code==200&&(w.value=1,g.value=te.data,tt.value=k(q.name));return}D(q.path)},H=async q=>{(await Xa(b.path,q.toString())).code==200&&(xi.success("ä¿å­æåï¼"),w.value=0,g.value="")},Z=q=>{q=="æä»¶"?o.value.unshift({name:"",mtime:"",type:"file",size:"",path:n.value,isBlur:!0}):q=="ç®å½"&&o.value.unshift({name:"",mtime:"",type:"directory",size:"",path:n.value,isBlur:!0});let te=o.value.find(he=>he.isBlur==!0);ja(()=>{y.value[te.name.replace(/\./g,"")+te.type].focus()})},re=(q,te)=>{const he=new Set;for(let ze=0;ze<q.length;ze++){const Ke=q[ze][te];if(he.has(Ke))return!0;he.add(Ke)}return!1},le=async(q,te="blur",he="create")=>{if(q.isBlur=!1,te=="enter")return;if(q.name||(q.name="æ°å»ºæ é¢"),re(o.value,"name")){xi.error("è¯¥æ é¢å·²å­å¨ï¼ï¼"),D(n.value);return}let Ke;q.handlerMode=="å½å"&&(he="rename"),he=="create"?q.type=="file"?Ke=await Xa(n.value+"/"+q.name,""):Ke=await qv(n.value+"/"+q.name):he=="rename"&&(Ke=await Zv(n.value+"/"+T.value,n.value+"/"+q.name),q.handlerMode==""),Ke.code==200&&D(n.value)},fe=async q=>{let te;q.type=="file"?te=await Vv(q.path):te=await jv(q.path),te.code==200&&(console.log(te),D(n.value))},U=async q=>{f.value.push(q)},R=async()=>{for(let q=0;q<f.value.length;q++){let te=f.value[q],he;te.handlerMode=="ç§»å¨"?he=await Xv(te.path,n.value+"/"+te.name):te.handlerMode=="å¤å¶"?te.type=="file"?he=await Jv(te.path,n.value+"/"+te.name):he=await Yv(te.path,n.value+"/"+te.name):xi.error("è¯·éæ©å³ä¾§æä½"),he.code==200&&xi.success("ç²è´´æåï¼")}f.value=[],D(n.value)},J=q=>{T.value=q.name,q.isBlur=!0,ja(()=>{y.value[q.name.replace(/\./g,"")+q.type].focus()})},z=q=>{for(let te=0;te<o.value.length;te++)o.value[te].isRightClicked=!1;q.isRightClicked=!0},ne=()=>{for(let q=0;q<o.value.length;q++)o.value[q].isRightClicked=!1},ie=()=>{S.path=n.value,_.value="upload",u.value=!0},we=()=>{w.value=2},Ee=(q,te)=>{switch(q.isRightClicked=!1,te.name){case"å é¤":fe(q);break;case"ç§»å¨":q.handlerMode="ç§»å¨",U(q);break;case"å¤å¶":q.handlerMode="å¤å¶",U(q);break;case"å½å":q.handlerMode="å½å",J(q);break;case"ä¸ä¼ ":q.handlerMode="ä¸ä¼ ",ie();break;case"ä¸è½½":q.handlerMode="ä¸è½½",It(q);break;default:xi.error("å³é®ç¸å³æä½åºéäº")}},Me=q=>{f.value.some(he=>!!he.handlerMode)||(f.value=JSON.parse(JSON.stringify(q)))},Je=q=>{for(let te=0;te<f.value.length;te++)f.value[te].handlerMode=q},ue=q=>{O.value=q.url,u.value=!0},zt=q=>{console.log(q),D(n.value)},vi=()=>{m.value.submit(),u.value=!1},It=async q=>{if(console.log(q),q.type=="file"){let te=await ep(q.path);xi.success("å¼å§ä¸è½½...");const he=document.createElement("a");he.href=URL.createObjectURL(te),he.download=q.name,document.body.appendChild(he),he.click(),document.body.removeChild(he)}else xi.warning("è¯·ä¸è½½æä»¶æåç¼©å")},nt=()=>{a.value=!1},Lt=q=>{};return Ya(()=>{D("0")}),(q,te)=>{const he=et("el-button"),ze=et("el-input"),Ke=et("el-popover"),it=et("el-option"),Kt=et("el-select"),ot=et("el-table-column"),Pt=et("el-popconfirm"),Ie=et("el-table"),jt=et("el-card"),Ni=et("Back"),$i=et("el-icon"),zi=et("el-upload"),Ki=et("el-image"),Zr=et("el-dialog"),Qr=Iv("loading");return Xe(),$t("div",null,[vn(Re(jt,{class:"box-card",ref:"cardRef"},{default:Le(()=>[ut("div",ap,[ut("div",hp,[Re(ze,{modelValue:Ge(n),"onUpdate:modelValue":te[0]||(te[0]=de=>Ui(n)?n.value=de:n=de),style:{"max-width":"600px",width:"100%","min-width":"200px"},class:"input-with-select"},{prepend:Le(()=>[Re(he,{icon:"Back",onClick:se})]),append:Le(()=>[Re(he,{icon:"DArrowRight",onClick:Q})]),_:1},8,["modelValue"])]),ut("div",lp,[Re(Ke,{placement:"bottom",title:"æç´¢",width:300,trigger:"hover"},{reference:Le(()=>[Re(he,{icon:"Search",circle:""})]),default:Le(()=>[Re(ze,{modelValue:Ge(p),"onUpdate:modelValue":te[1]||(te[1]=de=>Ui(p)?p.value=de:p=de),placeholder:"è¾å¥æç´¢æä»¶æç®å½"},{append:Le(()=>[Re(he,{icon:"Search",onClick:E})]),_:1},8,["modelValue"])]),_:1})])]),ut("div",cp,[Re(he,{size:"small",style:{"margin-right":"5px"},icon:Ge(r)?"ArrowLeftBold":"ArrowRightBold",onClick:te[2]||(te[2]=de=>Ui(r)?r.value=!Ge(r):r=!Ge(r))},null,8,["icon"]),Re(Kt,{size:"small",placeholder:"æ°å»º",style:{width:"60px"},onChange:Z},{default:Le(()=>[Re(it,{label:"ç®å½",value:"ç®å½"}),Re(it,{label:"æä»¶",value:"æä»¶"})]),_:1}),Ge(f).length>0&&Ge(f).every(de=>de.handlerMode)?(Xe(),si(he,{key:0,type:"primary",onClick:te[3]||(te[3]=de=>R()),size:"small",style:{"margin-left":"5px"}},{default:Le(()=>[Nt(" ç²è´´ ")]),_:1})):ni("",!0),Ge(f).length>0?(Xe(),si(he,{key:1,disabled:Ge(f).every(de=>de.handlerMode=="å¤å¶"),type:"primary",onClick:te[4]||(te[4]=de=>Je("å¤å¶")),size:"small",style:{"margin-left":"5px"}},{default:Le(()=>[Nt(" å¤å¶ ")]),_:1},8,["disabled"])):ni("",!0),Ge(f).length>0?(Xe(),si(he,{key:2,disabled:Ge(f).every(de=>de.handlerMode=="ç§»å¨"),type:"primary",onClick:te[5]||(te[5]=de=>Je("ç§»å¨")),size:"small",style:{"margin-left":"5px"}},{default:Le(()=>[Nt(" ç§»å¨ ")]),_:1},8,["disabled"])):ni("",!0),Re(he,{onClick:ie,size:"small",style:{"margin-left":"5px"}},{default:Le(()=>[Nt(" ä¸ä¼  ")]),_:1}),Re(he,{onClick:we,size:"small",style:{"margin-left":"5px"}},{default:Le(()=>[Nt(" ç»ç«¯ ")]),_:1})]),vn((Xe(),si(Ie,{style:{margin:"10px 0"},data:X.value,"max-height":Fe.value,onSelectionChange:Me,onClick:ne},{default:Le(()=>[Ge(r)?(Xe(),si(ot,{key:0,type:"selection",align:"center"})):ni("",!0),Re(ot,{label:"æä»¶åç§°"},{header:Le(()=>[ut("div",{class:"title-active",onClick:te[6]||(te[6]=de=>ee("name"))}," æä»¶åç§° ")]),default:Le(({row:de,$index:qi})=>[Re(Ke,{placement:"bottom",title:de.type=="file"?"æä»¶æä½":"æä»¶å¤¹æä½",width:150,trigger:"contextmenu",visible:de.isRightClicked},{reference:Le(()=>[ut("div",{onContextmenu:pn(Ye=>z(de),["prevent"])},[ut("i",{class:Pv(`iconfont icon-file 
                                            icon-${de.type=="file"?de.name.split(".").at(-1):"yellowFolder"}
                                        `),style:{"font-size":"20px"}},null,2),Nt(" Â  "),de.isBlur?(Xe(),si(ze,{key:1,ref:Ye=>{Ge(y)[de.name.replace(/\./g,"")+de.type]=Ye},onBlur:Ye=>le(de,"blur"),onKeyup:Hv(Ye=>le(de,"enter"),["enter"]),modelValue:de.name,"onUpdate:modelValue":Ye=>de.name=Ye},null,8,["onBlur","onKeyup","modelValue","onUpdate:modelValue"])):(Xe(),$t("a",{key:0,onClick:Ye=>M(de)},hr(de.name),9,fp))],40,up)]),default:Le(()=>[(Xe(!0),$t(Fv,null,Wv(Ge(d),(Ye,es)=>(Xe(),$t("span",{class:"pop_menu",key:es},[Ye.name=="å é¤"?(Xe(),si(Pt,{key:0,title:`æ¨å³å°å é¤è·¯å¾ã${de.path}ã,æ¯å¦ç»§ç»­ï¼`,onConfirm:ts=>Ee(de,Ye)},{reference:Le(()=>[Re(he,null,{default:Le(()=>[Nt(hr(Ye.name),1)]),_:2},1024)]),_:2},1032,["title","onConfirm"])):(Xe(),si(he,{key:1,onClick:ts=>Ee(de,Ye)},{default:Le(()=>[Nt(hr(Ye.name),1)]),_:2},1032,["onClick"]))]))),128))]),_:2},1032,["title","visible"])]),_:1}),Re(ot,{label:"å¤§å°",width:"80px"},{default:Le(({row:de,$index:qi})=>[ut("div",{onContextmenu:pn(Ye=>z(de),["prevent"]),style:{"font-size":"12px"}},[de.size?(Xe(),$t("span",_p,hr(de.size),1)):(Xe(),$t("a",{key:1,onClick:Ye=>$(de)},"è®¡ç®",8,vp))],40,dp)]),_:1}),Re(ot,{label:"ä¿®æ¹æ¶é´"},{header:Le(()=>[ut("div",{class:"title-active",onClick:te[7]||(te[7]=de=>ee("time"))}," ä¿®æ¹æ¶é´ ")]),default:Le(({row:de,$index:qi})=>[ut("div",{onContextmenu:pn(Ye=>z(de),["prevent"]),style:{"font-size":"12px"}},hr(de.mtime.replace(/T/," ").replace(/\.\d{3}Z/,"")),41,pp)]),_:1})]),_:1},8,["data","max-height"])),[[Qr,A.value]])]),_:1},512),[[Va,Ge(w)==0]]),vn(Re(jt,null,{default:Le(()=>[Re(he,{style:{"margin-bottom":"5px"},onClick:te[8]||(te[8]=de=>Ui(w)?w.value=0:w=0)},{default:Le(()=>[Nt(" è¿å ")]),_:1}),Re(Nv,{code:Ge(g),ext:tt.value,onGetCode:H},null,8,["code","ext"])]),_:1},512),[[Va,Ge(w)==1]]),Ge(w)==2?(Xe(),si(jt,{key:0},{default:Le(()=>[Re(he,{style:{"margin-bottom":"5px"},onClick:te[9]||(te[9]=de=>Ui(w)?w.value=0:w=0)},{default:Le(()=>[Re($i,null,{default:Le(()=>[Re(Ni)]),_:1})]),_:1}),Re(op,{dirPath:Ge(n)},null,8,["dirPath"])]),_:1})):ni("",!0),Re(Zr,{modelValue:u.value,"onUpdate:modelValue":te[11]||(te[11]=de=>u.value=de),title:Ge(b).name},Uv({default:Le(()=>[_.value=="upload"?(Xe(),$t("div",gp,[Re(zi,{class:"file_uploader",action:"/api/fs/upload",multiple:"",ref_key:"uploadRef",ref:m,"file-list":Ge(P),"onUpdate:fileList":te[10]||(te[10]=de=>Ui(P)?P.value=de:P=de),data:Ge(S),"show-file-list":!0,"on-preview":ue,"on-success":zt,"before-upload":Lt,"auto-upload":!1},{trigger:Le(()=>[Re(he,{type:"primary"},{default:Le(()=>[Nt("éæ©æä»¶")]),_:1})]),_:1},8,["file-list","data"])])):ni("",!0),_.value=="viewImage"?(Xe(),$t("div",mp,[Re(Ki,{src:Be.value,lazy:""},null,8,["src"])])):ni("",!0),_.value=="viewAudio"?(Xe(),$t("div",Sp,[ut("audio",{ref_key:"audioElement",ref:c,controls:"",src:st.value,style:{width:"100%"},onEnded:nt},null,40,Cp)])):ni("",!0),_.value=="viewVideo"?(Xe(),$t("div",wp,[ut("video",{controls:"",ref_key:"videoElement",ref:v,style:{width:"100%",height:"100%","object-fit":"cover"}},[ut("source",{src:j.value,type:"video/mp4"},null,8,bp),ut("source",{src:j.value,type:"video/ogg"},null,8,yp)],512)])):ni("",!0)]),_:2},[_.value=="upload"?{name:"footer",fn:Le(()=>[Re(he,{type:"primary",size:"default",onClick:vi},{default:Le(()=>[Nt(" ç¡®è®¤æäº¤ ")]),_:1})]),key:"0"}:void 0]),1032,["modelValue","title"])])}}});const Dp=Za(Ep,[["__scopeId","data-v-8ff5e833"]]);export{Dp as default};
