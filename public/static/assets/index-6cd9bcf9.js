import{a as I}from"./index-7bf5870e.js";import{a as $,k as o,B as j,r as c,o as m,h as T,w as i,b as r,i as s,u as a,x as b,c as C,F as B,g as D,P as S,t as w,A as J,C as Q,D as X,_ as Y}from"./index-22075a7d.js";const ee=g=>(Q("data-v-5ba2c0ea"),g=g(),X(),g),le={class:"log_select"},oe={class:"log_title"},te=ee(()=>r("span",{style:{"margin-right":"10px"}},"日志",-1)),ae={class:"select_log"},se={class:"timestamp"},ne=$({__name:"index",setup(g){let z=o([]),R=o([]),E=o("0"),d=o(""),u=o(500),k=o(500),p=o("#c8c7c7"),A=o("#c8c7c7"),_=o(16),v=o(16);const F=o(["#c8c7c7","rgba(30, 244, 251, 1)","#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]),L=o({STDOUT:"stdout",TRACE:"level-trace",DEBUG:"level-debug",INFO:"level-info",WARN:"level-warn",WARNING:"level-warn",ERROR:"level-error",ERRO:"level-error",FATAL:"level-fatal",MARK:"level-mark"});j(()=>{V()});const U=t=>{k.value=u.value},N=t=>{v.value=_.value},M=()=>{A.value=p.value},V=async t=>{let l;t=="0"||!t?l=await I("0"):l=await I(t),l.code==200&&(z.value=l.data.logText.split("\r").map(n=>G(n.trim())),R.value=l.data.logList,d.value=l.data.curLog)},O=t=>{V(t)},H=()=>{V(E.value)},G=t=>{const n=/^(\[\d+:\d+:\d+.\d+\])\[([A-Z]+?)\](.*)/.exec(t);if(n&&n.length>=4){const f=n[1],h=n[2],x=n[3];return{time:f,level:h,detail:x}}else return{time:"",level:"",detail:t}};return(t,l)=>{const n=c("el-color-picker"),f=c("el-button"),h=c("el-slider"),x=c("el-form-item"),P=c("el-form"),W=c("el-popover"),q=c("el-option"),K=c("el-select"),Z=c("el-card");return m(),T(Z,{class:"log_box"},{default:i(()=>[r("div",le,[r("div",oe,[te,s(n,{onChange:M,modelValue:a(p),"onUpdate:modelValue":l[0]||(l[0]=e=>b(p)?p.value=e:p=e),size:"small","show-alpha":"",predefine:F.value},null,8,["modelValue","predefine"])]),r("div",ae,[s(f,{class:"update_btn",size:"small",icon:"Refresh",circle:"",onClick:H,style:{"margin-right":"-5px"}}),s(W,{placement:"bottom",title:"日志设置",width:300,trigger:"hover"},{reference:i(()=>[s(f,{size:"small",icon:"Setting",circle:"",style:{"margin-right":"5px"}})]),default:i(()=>[s(P,null,{default:i(()=>[s(x,{label:"窗口高度"},{default:i(()=>[s(h,{modelValue:a(u),"onUpdate:modelValue":l[1]||(l[1]=e=>b(u)?u.value=e:u=e),size:"large",min:400,max:1e3,onInput:U},null,8,["modelValue"])]),_:1}),s(x,{label:"字体大小"},{default:i(()=>[s(h,{modelValue:a(_),"onUpdate:modelValue":l[2]||(l[2]=e=>b(_)?_.value=e:_=e),size:"large",min:12,max:30,onInput:N},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(K,{modelValue:a(d),"onUpdate:modelValue":l[3]||(l[3]=e=>b(d)?d.value=e:d=e),placeholder:"Select",size:"small",style:{width:"130px"},onChange:O},{default:i(()=>[(m(!0),C(B,null,D(a(R),(e,y)=>(m(),T(q,{key:y,label:e.replace("command.",""),value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),r("div",{class:"page-logs",style:S({height:`${a(k)}px`})},[(m(!0),C(B,null,D(a(z),(e,y)=>(m(),C("div",{class:"line",key:y,style:S({fontSize:`${a(v)}px`,marginTop:`${Math.round(a(v)*.2)}px`,lineHeight:`${String(Math.round(1.5*a(v)))}px`})},[r("span",se,w(e.time),1),r("span",{class:J(L.value[e.level]?L.value[e.level]:L.value.STDOUT)}," ["+w(e.level)+"] ",3),r("span",{class:"detail",style:S({color:`${a(A)}`})},w(e.detail),5)],4))),128))],4)]),_:1})}}});const ie=Y(ne,[["__scopeId","data-v-5ba2c0ea"]]);export{ie as default};
