import{a7 as E,a as F,k as y,l as Y,r as u,o as a,h as p,w as m,c as V,g as T,b as N,t as z,e as g,i as v,F as B,y as O,_ as J,A as j,ad as S}from"./index-85ec3edf.js";const G=x=>E.get("/bot/getcfg?name="+x),L=(x,k)=>E.post("/bot/setcfg?name="+x,k),H={class:"sub-title"},K={key:3},W=F({__name:"single",props:["cfg"],emits:["update:cfg"],setup(x,{emit:k}){const _=x,i=k,l=y();Y(()=>_.cfg,r=>{l.value=r},{immediate:!0,deep:!0});const b=(r,s)=>{r&&Array.isArray(r)?l.value[s].value.push(l.value[s].cur):l.value[s].value=[l.value[s].cur]};return(r,s)=>{const C=u("el-input"),w=u("el-input-number"),$=u("el-switch"),A=u("el-button"),c=u("el-tag"),t=u("el-form-item"),o=u("el-form");return a(),p(o,null,{default:m(()=>[(a(!0),V(B,null,T(l.value,(e,f,U)=>(a(),p(t,{key:f,lable:e.desc},{default:m(()=>[N("div",H,z(e.desc),1),e.type=="string"?(a(),p(C,{key:0,modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,onInput:s[0]||(s[0]=n=>i("update:cfg",l.value))},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type=="number"?(a(),p(w,{key:1,modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,onInput:s[1]||(s[1]=n=>i("update:cfg",l.value))},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type=="boolean"?(a(),p($,{key:2,modelValue:e.value,"onUpdate:modelValue":n=>e.value=n,class:"ml-2","inline-prompt":"",style:{"--el-switch-on-color":"#13ce66"},"active-text":"Y","inactive-text":"N",onChange:s[2]||(s[2]=n=>i("update:cfg",l.value))},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type=="array"?(a(),V("div",K,[e.subType=="string"?(a(),p(C,{key:0,modelValue:e.cur,"onUpdate:modelValue":n=>e.cur=n,size:"small",onInput:s[3]||(s[3]=n=>i("update:cfg",l.value))},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.subType=="number"?(a(),p(w,{key:1,modelValue:e.cur,"onUpdate:modelValue":n=>e.cur=n,onInput:s[4]||(s[4]=n=>i("update:cfg",l.value)),size:"small"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.subType=="boolean"?(a(),p($,{key:2,value:e.cur,class:"ml-2","inline-prompt":"",style:{"--el-switch-on-color":"#13ce66"},"active-text":"Y","inactive-text":"N",onChange:n=>{l.value[f].cur=n,i("update:cfg",l.value)}},null,8,["value","onChange"])):g("",!0),v(A,{size:"small",icon:"Plus",onClick:n=>{b(e.value,f),i("update:cfg",l.value)},style:{"margin-left":"5px"}},null,8,["onClick"]),N("span",null,[(a(!0),V(B,null,T(e.value,(n,h)=>(a(),p(c,{key:h,class:"mx-1",closable:"",onClose:q=>{l.value[f].value.splice(h,1),i("update:cfg",l.value)},style:{"margin-left":"5px"}},{default:m(()=>[O(z(n),1)]),_:2},1032,["onClose"]))),128))])])):g("",!0)]),_:2},1032,["lable"]))),128))]),_:1})}}});const D=J(W,[["__scopeId","data-v-34d18c2c"]]),X={style:{width:"100%",display:"flex","justify-content":"space-between"}},Z={key:0},ee={key:1},te={style:{"margin-bottom":"10px",display:"flex"}},le=F({__name:"index",setup(x){const k=y([{title:"Bot",name:"bot"},{title:"群组",name:"group"},{title:"通知",name:"notice"},{title:"其它",name:"other"},{title:"截图工具",name:"puppeteer"},{title:"QQ",name:"qq"},{title:"Redis",name:"redis"},{title:"渲染器",name:"renderer"}]),_=y({title:"Bot",name:"bot"}),i=y(),l=y("default"),b=y(""),r=y([]);let s=1;const C=async c=>{_.value.name=c;let t=await G(c);if(t.code==200)if(c=="group"){r.value=[];for(let o in t.data)r.value.push({title:o,name:o,content:t.data[o]})}else i.value=t.data},w=()=>{if(r.value.find(o=>o.name==b.value)){S.error("该群已存在！");return}const c=`${++s}`;let t=r.value.find(o=>o.name=="default");r.value.push({title:b.value,name:b.value,content:JSON.parse(JSON.stringify(t==null?void 0:t.content))}),l.value=c},$=c=>{const t=r.value;if(c=="default"){S.error("默认配置不能删除！");return}let o=l.value;o===c&&t.forEach((e,f)=>{if(e.name===c){const U=t[f+1]||t[f-1];U&&(o=U.name)}}),l.value=o,r.value=t.filter(e=>e.name!==c)},A=async()=>{let c;_.value.name=="group"?c=r.value.reduce((o,e)=>(o[e.name]=e.content,o),{}):c=i.value,console.log(_.value.name),(await L(_.value.name,c)).code==200&&S.success("保存成功！")};return j(()=>{C("bot")}),(c,t)=>{const o=u("el-button"),e=u("el-tooltip"),f=u("el-option"),U=u("el-select"),n=u("el-divider"),h=u("el-input"),q=u("Avatar"),M=u("el-icon"),P=u("el-tab-pane"),Q=u("el-tabs"),R=u("el-card");return a(),p(R,null,{default:m(()=>[N("div",X,[v(e,{class:"box-item",effect:"dark",content:"注意只保存当前标签配置，切换标签会刷新配置",placement:"bottom"},{default:m(()=>[v(o,{type:"primary",onClick:A},{default:m(()=>[O("保存配置")]),_:1})]),_:1}),v(U,{modelValue:_.value.title,"onUpdate:modelValue":t[0]||(t[0]=d=>_.value.title=d),placeholder:"Select",style:{width:"100px"},onChange:C},{default:m(()=>[(a(!0),V(B,null,T(k.value,(d,I)=>(a(),p(f,{key:I,label:d.title,value:d.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),v(n),_.value.name!="group"?(a(),V("div",Z,[v(D,{cfg:i.value,"onUpdate:cfg":t[1]||(t[1]=d=>i.value=d)},null,8,["cfg"])])):(a(),V("div",ee,[N("div",te,[_.value.name=="group"?(a(),p(h,{key:0,modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=d=>b.value=d),style:{width:"100%","margin-left":"5px"}},null,8,["modelValue"])):g("",!0),_.value.name=="group"?(a(),p(o,{key:1,onClick:w,icon:"Plus",style:{"margin-left":"5px"}},{default:m(()=>[v(M,null,{default:m(()=>[v(q)]),_:1})]),_:1})):g("",!0)]),v(Q,{modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=d=>l.value=d),type:"card",class:"demo-tabs",closable:"",onTabRemove:$},{default:m(()=>[(a(!0),V(B,null,T(r.value,d=>(a(),p(P,{lazy:!1,key:d.name,label:d.title,name:d.name},{default:m(()=>[v(D,{cfg:d.content,"onUpdate:cfg":I=>d.content=I},null,8,["cfg","onUpdate:cfg"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]))]),_:1})}}});const ae=J(le,[["__scopeId","data-v-dcd79a7f"]]);export{ae as default};
